<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://nant.sf.net/schemas/nant.xsd" name="scratch" default="test" >

  <property name="CCNetBuildCondition" value="ForceBuild "/>
  <property name="CCNetIntegrationStatus" value="Success"/>
  <property name="CCNetLastIntegrationStatus" value="Success"/>
  <property name="CCNetBuildDate" value="2008-08-04"/>
  <property name="CCNetBuildTime" value="08:32:47"/>
  <property name="CCNetArtifactDirectory" value="C:\Temp\CCNetArtifactDirectory"/>
  <property name="CCNetWorkingDirectory" value="C:\Temp\CCNetWorkingDirectory"/>
  
  <property name="CCNetLabel" value="2.2.0.67"/>
  <property name="CCNetProject" value="NHINC"/>
  <property name="CCNetLogFilePath" value="C:\temp\log20080904154412Lbuild.1.0.0.749.xml"/>


  <property name="JavaHome" value="C:\Java\jdk1.6.0_07" />
  <property name="Compile.ConfigName" value="Debug"/>

  <include buildfile="Properties.Build.xml"/>
  <include buildfile="Common.Build.xml" />
  <include buildfile="Custom.Build.xml" />

  <include buildfile="${PackagesDirectory}\Subversion\SourceControl.Target.xml" />
  <include buildfile="${PackagesDirectory}\SourceModificationReport\SourceModificationReport.Target.xml" />
  <include buildfile="${PackagesDirectory}\Deployment\Deployment.Target.xml" />
  <include buildfile="${PackagesDirectory}\Workspace\Workspace.Targets.xml" />
  <include buildfile="${PackagesDirectory}\Ant\Ant.Target.xml" />
  <include buildfile="${PackagesDirectory}\GlassFish\GlassFish.Targets.xml" />
  <include buildfile="${PackagesDirectory}\TargetProcess\TargetProcess.Target.xml" />
  <include buildfile="${PackagesDirectory}\Alerts\Alerts.Target.xml" />

  <target name="test">
    <property name="CCNetRemotingUrl" value="tcp://${BuildServerHostName}:${BuildServerPort}/CruiseManager.rem"/>
    <property name="ProjectNameToPullFrom" value="${ProjectName}-${ProjectCodeLineName}-Release"/>

    <call target="Common.FindBuild"/>
    <regex input="${build}" pattern="log(?'BuildArchiveFolderName'\d+)Lbuild\.${CCNetLabel}\.xml$"/>
    <regex input="${BuildArchiveFolderName}" pattern="(?'Year'\d\d\d\d)(?'Month'\d\d)(?'Day'\d\d)"/>

    <property name="Release.Application.Zip.File.Name" value="${ProjectName}-Release-Installer-${CCNetLabel}.zip"/>
    <property name="Release.Application.Zip.File.Path" value="${Common.TempDirectory}\${Release.Application.Zip.File.Name}"/>

    <get
      dest="${Release.Application.Zip.File.Path}"
      src="https://${BuildServerHostName}/${ProjectName}-${ProjectCodeLineName}/Artifacts/${BuildArchiveFolderName}/${Release.Application.Zip.File.Name}"
      verbose="true"
    >
      <credentials username="${Web.Credentials.UserName}" password="${Web.Credentials.Password}"/>
      <certificates>
        <include name="C:\temp\build.agilexhealth.com.cer"/>
      </certificates>
    </get>
	</target>

</project>