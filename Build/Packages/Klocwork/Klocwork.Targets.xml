<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://nant.sf.net/schemas/nant.xsd" name="Klocwork">

  <target name="Klocwork.CreateBuildSpecification">
    <setenv>
      <environment refid="${Common.EnvironmentVariables.RefId}" />
    </setenv>
    <!--<exec program="kwant.exe"
				  commandline='-o nhin_kwinject.out build-test'
          failonerror="true"
				  workingdir="${Common.Directory.Product.Path}"
          verbose="true"/>-->
          
    <ant
      antbat="kwant.exe"
      target="build-test"
      verbose="true"
    >
       <args>
         <arg line="-o nhin_kwinject.out"/>
       </args>
    </ant>
  </target>

  <target name="Klocwork.RunAnalysis">
    <setenv>
      <environment refid="${Common.EnvironmentVariables.RefId}" />
    </setenv>
    <exec program="kwbuildproject"
				  commandline='${Klocwork.Build.Specification} --tables-directory ${Klocwork.Tables.Directory.Path} --force'
				  workingdir='${Common.Directory.Product.Path}'/>
  </target>

  <target name="Klocwork.LoadAnalysisResults">
    <setenv>
      <environment refid="${Common.EnvironmentVariables.RefId}" />
    </setenv>
    <exec program="kwadmin"
				  commandline='load ${Klocwork.Project.Name} ${Klocwork.Tables.Directory.Path}'
				  workingdir='${Common.Directory.Product.Path}'/>
  </target>

</project>