<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://nant.sf.net/schemas/nant.xsd" name="SoapUI.Custom">

  <target name="SoapUI.RunTests" override="True">
    <property name="GlassFish.Domain.Server.Log.File.Path" value="${GlassFish.Home.Directory.Path}\domains\${GlassFish.Domain.Name}\logs\server.log"/>
    
    <call target="GlassFish.StopServer"/>
    <delete file="${GlassFish.Domain.Server.Log.File.Path}" />
    <call target="GlassFish.StartServer"/>

    <trycatch>
      <try>
        <call target="SoapUI::SoapUI.RunTests"/>
      </try>
      <finally>
        <call target="GlassFish.StopServer"/>
        <copy file="${GlassFish.Domain.Server.Log.File.Path}" tofile="${Common.Directory.Artifact.Path}\server.log.txt" overwrite="True" />
        <call target="GlassFish.StartServer"/>
      </finally>
    </trycatch>

  </target>
  
</project>