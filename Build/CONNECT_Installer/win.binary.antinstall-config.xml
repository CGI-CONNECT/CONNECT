<?xml version="1.0"?>
<!DOCTYPE installer PUBLIC "-//tp23 //DTD Ant Installer Config//EN" "http://antinstaller.sf.net/dtd/antinstall-config-0.8.dtd">
<!-- 
vim:expandtab: softtabstop=4 shiftwidth=4 tabstop=4
-->
<!--
//*****************************************************************************
// FILE: antinstall-config.xml
//
// Copyright (C) 2010 TBD
//
// CLASSIFICATION: Unclassified
//
// DESCRIPTION: XML document to generate AntInstaller pages
//
// LIMITATIONS: None
//
// CHANGE HISTORY:
//
// Date         Proj   Act    Assign     Desc
// ============ ====== ====== ========== ======================================
// 2010/03/20   964G   1000   bgrantha   Initial Coding.
// 2010/04/05   964G   1000   bgrantha   Request from bpark - banner to include
//                                       created by harris, java to have its
//                                       own page
// 2010/04/05   964G   1000   bgrantha   Request from ckempton - one prereq per
//                                       page
// 2010/04/15   964G   1000   ckempton   Added prerequisite installation  
//                                       instructions to install pages.
// 2010/04/21   964G   1000   bgrantha   General cleanup, fixed XML errors
// 2010/04/22   964G   1000   bgrantha   Renamed file
//
//*****************************************************************************
-->
<installer
    ui="swing,text"
    verbose="true"
    debug="false"
    lookAndFeel="org.tp23.jgoodies.plaf.plastic.PlasticXPLookAndFeel"
    name="NHIN CONNECT Gateway (2.4) Installer"
    windowIcon="/resources/gkmain_inv.png"
    defaultImageResource="/resources/img/connect.PNG"
    minJavaVersion="1.4">

    <!-- WELCOME -->
    <page
        type="input"
        name="welcome"
        displayText="Welcome to the NHIN CONNECT (2.4) Installer"
        postDisplayTarget="antinstaller-setup"
        target="connect-install">
        <comment
            displayText="This application partially automates the install of the NHIN CONNECT Gateway"
            bold="false" />
        <comment
            displayText=""
            bold="true" />
        <comment
            explanatoryText="The installer will extract and setup the NHIN CONNECT Windows Binary files, and the Third Party Components as described in the Windows Binary Install Guide"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            explanatoryText="Simple validation will occur at the time of install to ensure necessary environment variables have been initialized on the system and the installer will make changes as needed"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Warning: Any existing installation will be overwritten by this installer"
            bold="true" />
        <comment
            displayText="Any existing installation should be backed up before continuing this installation"
            bold="false" />
    </page>

    <!-- LICENSE -->
    <!--  ... -->

    <!-- PREREQUISITES 0 (Java) -->
    <page
        type="input"
        name="prerequisites0"
        displayText="NHIN CONNECT - Install JDK"
        postDisplayTarget="antinstaller-launch-browser-0">
        <comment
            explanatoryText="The following prerequisite software must be installed and configured prior to installing the CONNECT software"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Java Platform Standard Edition (Java SE) 6 Update 16"
            bold="true" />
        <comment
            displayText="Available for download at http://www.sun.com/"
            bold="false" />
        <checkbox
            property="launch.browser.for.java"
            displayText="Download JDK?"
            defaultValue="false"
            force="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Click Next to continue"
            bold="false" />            

    </page>

    <!-- FOLLOWUP 0 (Java) -->
    <page
        type="input"
        name="followup0"
        displayText="NHIN CONNECT - Install JDK (continued)"
        ifProperty="${launch.browser.for.java}=true">
        <comment
            displayText="Download and install Java (Java SE) 6 Update 16"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Install the JDK to the following folder:"
            bold="false" />
        <comment
            displayText="C:\Java\jdk1.6.0_16"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Install the JRE to the following folder:"
            bold="false" />
        <comment
            displayText="C:\Java\jre6"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Click Next once Java has been installed"
            bold="false" />
    </page>

    <!-- PREREQUISITES 1 (GlassFish) -->
    <page
        type="input"
        name="prerequisites1"
        displayText="NHIN CONNECT - Install NetBeans/GlassFish App."
        postDisplayTarget="antinstaller-launch-browser-1">
        <comment
            explanatoryText="The following prerequisite software must be installed and configured prior to installing the CONNECT software"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="NetBeans 6.7.1 Bundle with GlassFish 2.1 Application Server"
            bold="true" />
        <comment
            displayText="Available for download at http://www.netbeans.org/"
            bold="false" />
        <checkbox
            property="launch.browser.for.netbeans.glassfish"
            displayText="Download NetBeans/GlassFish?"
            defaultValue="false"
            force="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Click Next to continue"
            bold="false" />

    </page>

    <!-- FOLLOWUP 1 (GlassFish) -->
    <page
        type="input"
        name="followup1"
        displayText="NHIN CONNECT - Install NetBeans/GlassFish App. (continued)"
        ifProperty="${launch.browser.for.netbeans.glassfish}=true">
        <comment
            displayText="Download the Java NetBeans IDE Bundle"
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="- Install GlassFish Enterprise Server v2.1.1 (exclude v3 Prelude)"
            bold="false" />
        <comment
            explanatoryText="    - To Exclude v3 Prelude, select the Customize... button on the NetBeans installer                        Welcome page."
            bold="true" />           
        <comment
            displayText="- Sun GlassFish Enterprise Server v2.1.1 Install location:  C:\Sun\AppServer"
            bold="false" />
        <comment
            displayText="- JDK Install location for the NetBeans IDE:  C:\Java\jdk1.6.0_16"
            bold="false" />
        <comment
            displayText="- Keep all other defaults"
            bold="false" />
        <comment
            displayText="- Record:  Admin UserName:  admin; Admin Password:  adminadmin"
            bold="false" />
        <comment
            displayText="- It is recommended that the ports be kept at the default values"
            bold="false" />

        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Click Next once the NetBeans/GlassFish have been installed"
            bold="false" />
    </page>

    <!-- SET ENVIRONMENT VARIABLES -->
    <!-- @param actual.JAVA_HOME  -->
    <!-- @param actual.IDE_HOME  -->
    <!-- @param actual.AS_HOME  -->
    <!-- @param actual.NHINC_PROPERTIES_DIR  -->
    <!-- @param actual.ANT_HOME  -->
    <!-- @param actual.ANT_OPTS  -->
    <page
        type="input"
        name="setEnvironmentVariables"
        displayText="NHIN CONNECT - Environment Variables">
        <app-root
            property="actual.JAVA_HOME"
            defaultValue=""
            defaultValueWin="${expected.JAVA_HOME}"
            displayText="%JAVA_HOME%"
            checkFile1="COPYRIGHT"
            checkFile2="LICENSE"
            checkDir1="jre"
            checkDir2="bin">
        </app-root>
        <app-root
            property="actual.IDE_HOME"
            defaultValue=""
            defaultValueWin="${expected.IDE_HOME}"
            displayText="%IDE_HOME%"
            checkFile1="netbeans.css"
            checkFile2="moduleCluster.properties"
            checkDir1="platform10"
            checkDir2="profiler3">
        </app-root>

        <comment
            displayText=" "
            bold="false" />

        <app-root
            property="actual.AS_HOME"
            defaultValue=""
            defaultValueWin="${expected.AS_HOME}"
            displayText="%AS_HOME%"
            checkFile1="License_Notice_Translated.pdf"
            checkFile2="3RD-PARTY-LICENSE.txt"
            checkDir1="javadb"
            checkDir2="domains">
        </app-root>
        <directory
            property="actual.NHINC_PROPERTIES_DIR"
            defaultValue=""
            defaultValueWin="${expected.NHINC_PROPERTIES_DIR}"
            displayText="%NHINC_PROPERTIES_DIR%">
        </directory>

        <comment
            displayText=" "
            bold="false" />

        <app-root
            property="actual.ANT_HOME"
            defaultValue=""
            defaultValueWin="${expected.ANT_HOME}"
            displayText="%ANT_HOME%">
        </app-root>
        <text
            property="actual.ANT_OPTS"
            displayText="%ANT_OPTS"
            defaultValue="${expected.ANT_OPTS}">
        </text>

        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Default values are recommended"
            bold="false" />

        <comment
            displayText="Click Next to continue (validation will occur)"
            bold="false" />

    </page>

    <!-- FOLLOWUP FOR ENV VARS -->
    <page
        type="input"
        name="setEnvironmentVariables2"
        displayText="NHIN CONNECT - Environment Variables"
        postDisplayTarget="antinstaller-set-env">

        <comment
            displayText="The installer will now set and update necessary environment variables"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Do not change or close any Windows Helper or Environment windows"
            bold="false" />
        <comment
            displayText="These will close automatically once they have completed executing"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Click Next to continue"
            bold="false" />
    </page>

    <!-- PREREQUISITES 2 (Metro) -->
    <page
        type="input"
        name="prerequisites2"
        displayText="NHIN CONNECT - Install Metro Web Service"
        postDisplayTarget="antinstaller-launch-browser-2">
        <comment
            explanatoryText="The following prerequisite software must be installed and configured prior to installing the CONNECT software"
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Metro Web Service Stack 1.5 for GlassFish"
            bold="true" />
        <comment
            displayText="Available for download at https://metro.dev.java.net/"
            bold="false" />
        <checkbox
            property="launch.browser.for.metro"
            displayText="Download Metro?"
            defaultValue="false"
            force="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />            
        <comment
            displayText="Click Next to continue"
            bold="false" />

    </page>

    <!-- FOLLOWUP 2 (Metro) -->
    <page
        type="input"
        name="followup2"
        displayText="NHIN CONNECT - Install Metro Web Service (continued)"
        ifProperty="${launch.browser.for.metro}=true">
        <comment
            displayText="1.  Save the Metro JAR to C:\NHINC\ThirdPartyTools"
            bold="false" />
        <comment
            displayText="2.  From command window prompt execute:"
            bold="false" />

        <comment
            displayText="  > cd C:\NHINC\ThirdPartyTools"
            bold="false" />
        <comment
            displayText="  > java -jar metro-1_5.jar"
            bold="false" />
        <comment
            displayText="  > cd metro"
            bold="false" />
        <comment
            displayText="  > ant -f metro-on-glassfish.xml install"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Click Next once Metro has been installed"
            bold="false" />
    </page>

    <!-- PREREQUISITES 3 (MySQL) -->
    <page
        type="input"
        name="prerequisites3"
        displayText="NHIN CONNECT - Install MySQL"
        postDisplayTarget="antinstaller-launch-browser-3">
        <comment
            explanatoryText="The following prerequisite software must be installed and configured prior to installing the CONNECT software"
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="MySQL Database Server 5.1"
            bold="true" />
        <comment
            displayText="Available for download at http://dev.mysql.com/"
            bold="false" />
        <checkbox
            property="launch.browser.for.mysql"
            displayText="Download MySQL?"
            defaultValue="false"
            force="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Click Next to continue"
            bold="false" />

    </page>

    <!-- FOLLOWUP 3 (MySQL) -->
    <page
        type="input"
        name="followup3"
        displayText="NHIN CONNECT - Install MySQL (continued)"
        ifProperty="${launch.browser.for.mysql}=true">
        <comment
            displayText="1.  Using the file download dialog displayed, save *.msi file in C:\NHINC\ThirdPartyTools"
            bold="false" />
        <comment
            displayText="2.  Run the MySQL wizard"
            bold="false" />
        <comment
            displayText="    - Accept the defaults for install"
            bold="false" />
        <comment
            displayText="    - After install is complete, select to setup Database Configuration"
            bold="false" />
        <comment
            displayText="      - Select Standard Configuration and enter the following:"
            bold="false" />
        <comment
            displayText="        - User Name: root (default);  Password: NHIE-Gateway"
            bold="false" />
        <comment
            displayText="        - Install MySQL as a windows service."
            bold="false" />
        <comment
            displayText="        - Leave Enable root access from remote machines unchecked"
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Click Next once MySQL has been installed"
            bold="false" />
    </page>

    <!-- PREREQUISITES 4 (MySQL Tools) -->
    <page
        type="input"
        name="prerequisites4"
        displayText="NHIN CONNECT - Install MySQL GUI Tools"
        postDisplayTarget="antinstaller-launch-browser-4">
        <comment
            explanatoryText="The following prerequisite software must be installed and configured prior to installing the CONNECT software"
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="MySQL Database Server 5.1 GUI Tools"
            bold="true" />
        <comment
            displayText="Available for download at http://dev.mysql.com/"
            bold="false" />
        <checkbox
            property="launch.browser.for.mysql.tools"
            displayText="Download MySQL GUI Tools?"
            defaultValue="false"
            force="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Click Next to continue"
            bold="false" />

    </page>

    <!-- FOLLOWUP 4a (MySQL Tools) -->
    <page
        type="input"
        name="followup4a"
        displayText="NHIN CONNECT - Install MySQL GUI Tools (continued)"
        ifProperty="${launch.browser.for.mysql.tools}=true">
        <comment
            explanatoryText="Save the *.msi file to C:\NHINC\ThirdPartyTools.  Run the MySQL GUI Tools installer and accept the defaults.  Open the MySQL Administrator:  Start->All Programs->MySQL->MySQL Administrator."
            bold="false" />
        <comment
            displayText="1.  Open Options dialog by clicking the button next to the Stored Connections field"
            bold="false" />
        <comment
            displayText="2.  Show the Connections panel by clicking Connections icon on left side of window"
            bold="false" />
        <comment
            displayText="3.  Click the New Connection button to activate the Connections panel"  
            bold="false" />
        <comment
            displayText="4.  On the Connections panel, enter the following values in the specified fields:"
            bold="false" />
        <comment
            displayText="    - Connection: NHINConnect        - Hostname: localhost"
            bold="false" />
        <comment
            displayText="    - Username: root                         - Port: 3306"
            bold="false" />
        <comment
            displayText="    - Password: NHIE-Gateway         - Schema: test"
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Click Next to continue with MySQL GUI Tools install"
            bold="false" />
    </page>

    <!-- FOLLOWUP 4b (MySQL Tools) -->
    <page
        type="input"
        name="followup4b"
        displayText="NHIN CONNECT - Install MySQL GUI Tools (continued)"
        ifProperty="${launch.browser.for.mysql.tools}=true">
        <comment
            explanatoryText="On the Connections panel, click the Apply button, and then click Close button.  After closing the Options window you should now see your new entry in the Stored Connection drop-down field."
            bold="false" />
        <comment
            displayText=" 5.  Select new database from Stored Connections drop down menu"
            bold="false" />
        <comment
            displayText="     Enter:  user name as root; password as NHIE-Gateway"
            bold="false" />
        <comment
            displayText="     Select OK button"
            bold="false" />
        <comment
            explanatoryText="6.  Verify MySQL Administrator - Connection: NHINConnect window is displayed. Close the MySQL Administrator Tool."
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Click Next once MySQL GUI Tools has been installed and configured"
            bold="false" />
    </page>

    <!-- PREREQUISITES 5 (OID) -->
    <page
        type="input"
        name="prerequisites5"
        displayText="NHIN CONNECT - Object Identifier Request (OID)"
        postDisplayTarget="antinstaller-launch-browser-5">
        <comment
            displayText="An Object Identifier may be needed prior to installing CONNECT software"
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Object Identifier Request (OID)"
            bold="true" />
        <comment
            displayText="Required if system is to be used in the NHIN Production Environment"
            bold="false" />
        <checkbox
            property="launch.browser.for.oid"
            displayText="Request OID?"
            defaultValue="false"
            force="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Click Next to continue"
            bold="false" />

    </page>

    <!-- FOLLOWUP 5 (OID) -->
    <page
        type="input"
        name="followup5"
        displayText="NHIN CONNECT - Object Identifier Request (OID) (continued)"
        ifProperty="${launch.browser.for.oid}=true">
        <comment
            explanatoryText="Follow the instructions detailed in the NHIN CONNECT Request Object Identifier guide launched in the browser to request your OID."
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="true" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Click Next once the OID has been requested"
            bold="false" />
    </page>

    <!-- OPTIONS -->
    <page
        type="input"
        name="installOptions"
        displayText="NHIN CONNECT - Install Options"
        postDisplayTarget="antinstaller-set-env-mysql">
        <comment
            displayText="The following steps are required, but optional as part of the installer"
            bold="false" />
        <comment
            displayText="These will need to be executed manually if not done as part of the installer"
            bold="false" />

        <comment
            displayText=""
            bold="false" />
        <comment
            displayText=""
            bold="false" />

        <target
            displayText="Create DB Schema/Tables"
            defaultValue="true"
            force="false"
            target="create-db" />

        <target
            displayText="Create GlassFish domain"
            defaultValue="true"
            force="false"
            target="create-glassfish-domain" />

        <target
            displayText="Deploy CONNECT"
            defaultValue="true"
            force="false"
            target="deployment" />

        <comment
            displayText=""
            bold="false" />

        <comment
            displayText=""
            bold="false" />

        <comment
            displayText="Click Next to continue"
            bold="false" />

    </page>

    <!-- FINAL INFO -->
    <page
        type="input"
        name="finalInfo"
        displayText="NHIN CONNECT - Install Notes **USER EDITS REQUIRED**">
        <comment
            displayText="During the install, the gateway.properties file will be launched for editing."
            bold="false" />
        <comment
            displayText="- Verify/set the following properties are set.  Close file when complete."
            bold="false" />
        <comment
            displayText="  - UUDIInquiryEndpointURL = https://216.12.136.142/uddi/inquiry"
            bold="false" />
        <comment
            displayText="  - localHomeCommunityId = [OID requested and obtained in previous step]"
            bold="false" />
        <comment
            displayText="  - localHomeCommunityDescription = [text description of your environment]"
            bold="false" />
        <comment
            displayText="  - localDeviceId = [localHomeCommunityId]"
            bold="false" />

        <comment
            displayText="The NHIN CONNECT Gateway will be extracted to ${directory.nhin.connect}"
            bold="false" />
        <comment
            displayText="The Third Party Components will be extracted to ${directory.nhin.connect.third.party}"
            bold="false" />
        <comment
            displayText="SSL Request and Installation needs to be done after the installation completes"
            bold="false" />
        <comment
            displayText=""
            bold="false" />
        <comment
            displayText="Click Next to begin the installation"
            bold="false" />
    </page>

    <!-- INSTALL PROGRESS -->
    <page
        type="progress"
        name="installProgress"
        displayText="Installation progress"
        showTargets="true"
        target="cleanup">
    </page>

</installer>
