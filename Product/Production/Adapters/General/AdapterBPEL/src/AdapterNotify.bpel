<?xml version="1.0" encoding="UTF-8"?>
<process
    name="AdapterNotify"
    targetNamespace="urn:gov:hhs:fha:nhinc:adapters:general:adapterbpel:adapternotify"
    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:sxt="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Trace" 
    xmlns:sxed="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Editor"
    xmlns:sxat="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Attachment"
    xmlns:sxeh="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/ErrorHandling"
    xmlns:tns="urn:gov:hhs:fha:nhinc:adapters:general:adapterbpel:adapternotify" 
    xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon">
    <import namespace="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" location="Interfaces/wsdl/AdapterNotificationConsumer.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <partnerLinks>
        <partnerLink name="AdapterNotifyPL" xmlns:tns="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" partnerLinkType="tns:AdapterNotificationConsumer" myRole="AdapterNotificationConsumerPortTypeRole"/>
    </partnerLinks>
    <variables>
        <variable name="NotifySubscribersOfCdcBioPackageOut" xmlns:tns="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" messageType="tns:NotifySubscribersOfCdcBioPackageResponseMessage"/>
        <variable name="NotifySubscribersOfDocumentOut" xmlns:tns="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" messageType="tns:NotifySubscribersOfDocumentResponseMessage"/>
        <variable name="NotifyOut" xmlns:tns="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" messageType="tns:NotifyResponseMessage"/>
        <variable name="NotifySubscribersOfCdcBioPackageIn" xmlns:tns="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" messageType="tns:NotifySubscribersOfCdcBioPackageRequestMessage"/>
        <variable name="NotifySubscribersOfDocumentIn" xmlns:tns="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" messageType="tns:NotifySubscribersOfDocumentRequestMessage"/>
        <variable name="NotifyIn" xmlns:tns="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" messageType="tns:NotifyRequestMessage"/>
    </variables>
    <sequence>
        <pick name="PickNotifyMessages" createInstance="yes">
            <onMessage partnerLink="AdapterNotifyPL" operation="Notify" xmlns:tns="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" portType="tns:AdapterNotificationConsumerPortType" variable="NotifyIn">
                <sequence name="GenericNotifySeq">
                    <assign name="AssignNotifyResp">
                        <copy>
                            <from>'Successful Notify'</from>
                            <to>$NotifyOut.NotifyResponse/nccommon:message</to>
                        </copy>
                    </assign>
                    <reply name="ReplyNotify" partnerLink="AdapterNotifyPL" operation="Notify" portType="tns:AdapterNotificationConsumerPortType" variable="NotifyOut"/>
                </sequence>
            </onMessage>
            <onMessage partnerLink="AdapterNotifyPL" operation="NotifySubscribersOfDocument" xmlns:tns="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" portType="tns:AdapterNotificationConsumerPortType" variable="NotifySubscribersOfDocumentIn">
                <sequence name="DocumentNotifySeq">
                    <assign name="AssignDocNotifyResp">
                        <copy>
                            <from>'Successful Document Notify'</from>
                            <to>$NotifySubscribersOfDocumentOut.NotifySubscribersOfDocumentResponse/nccommon:message</to>
                        </copy>
                    </assign>
                    <reply name="ReplyDocumentNotify" partnerLink="AdapterNotifyPL" operation="NotifySubscribersOfDocument" portType="tns:AdapterNotificationConsumerPortType" variable="NotifySubscribersOfDocumentOut"/>
                </sequence>
            </onMessage>
            <onMessage partnerLink="AdapterNotifyPL" operation="NotifySubscribersOfCdcBioPackage" xmlns:tns="urn:gov:hhs:fha:nhinc:adapternotificationconsumer" portType="tns:AdapterNotificationConsumerPortType" variable="NotifySubscribersOfCdcBioPackageIn">
                <sequence name="CdcNotifySeq">
                    <assign name="AssignCdcNotifyResp">
                        <copy>
                            <from>'Successful Cdc Notify'</from>
                            <to>$NotifySubscribersOfCdcBioPackageOut.NotifySubscribersOfCdcBioPackageResponse/nccommon:message</to>
                        </copy>
                    </assign>
                    <reply name="ReplyCdcNotify" partnerLink="AdapterNotifyPL" operation="NotifySubscribersOfCdcBioPackage" portType="tns:AdapterNotificationConsumerPortType" variable="NotifySubscribersOfCdcBioPackageOut"/>
                </sequence>
            </onMessage>
        </pick>
    </sequence>
</process>
