<?xml version="1.0" encoding="UTF-8" standalone="no"?><con:soapui-project xmlns:con="http://eviware.com/soapui/config" abortOnError="false" name="DocQueryTestsForUDDI" resourceRoot="" runType="SEQUENTIAL" soapui-version="3.5.1">
  <con:settings/>
  <con:interface xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:entitydocquery}EntityDocQueryBindingSoap" definition="WSDL path not set.  #EntityDocQuery.wsdl" name="EntityDocQueryBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface">
    <con:settings/>
    
    <con:endpoints>
      <con:endpoint>http://localhost:${HttpDefaultPort}/CONNECTGateway/EntityService/EntityDocQueryUnsecured</con:endpoint>
      <con:endpoint>http://ATHC-GFAS:9080/CONNECTGateway/EntityService/EntityDocQueryUnsecured</con:endpoint>
      <con:endpoint>http://172.16.50.54:9080/CONNECTGateway/EntityService/EntityDocQueryUnsecured</con:endpoint>
      <con:endpoint>http://172.16.50.82:9080/CONNECTGateway/EntityService/EntityDocQueryUnsecured</con:endpoint>
      <con:endpoint>http://DVANHIE3.fedsconnect.org:9080/CONNECTGateway/EntityService/EntityDocQueryUnsecured</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/EntityDocQuery</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:RespondingGateway_CrossGatewayQuery" anonymous="optional" bindingOperationName="RespondingGateway_CrossGatewayQuery" inputName="RespondingGateway_CrossGatewayQueryRequest" isOneWay="false" name="RespondingGateway_CrossGatewayQuery" outputName="RespondingGateway_CrossGatewayQueryResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:nhincdocquery}NhincDocQueryPortTypeBinding" definition="WSDL path not set.  #NhincDocQuery.wsdl" name="NhincDocQueryPortTypeBinding" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface">
    <con:settings/>
    
    <con:endpoints>
      <con:endpoint>http://localhost:${HttpDefaultPort}/CONNECTAdapter/NhincDocQuery</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincDocQuery</con:endpoint>
    </con:endpoints>
    <con:operation action="RespondingGateway_CrossGatewayQuery" anonymous="optional" bindingOperationName="RespondingGateway_CrossGatewayQuery" inputName="CrossGatewayQueryRequest" isOneWay="false" name="RespondingGateway_CrossGatewayQuery" outputName="CrossGatewayQueryResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:testSuite name="DocQueryTestsForUDDI TestSuite">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="e195718a-c6ce-4de8-a813-7b932eb9f174" keepSession="false" maxResults="0" name="Empty Target XML - Correlation for HCID not in UDDI file" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID not in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def remoteAA = context.findProperty( "testHCID" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, remoteAA, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/&gt;</con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="Empty Target XML - Correlation for HCID not in UDDI file">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion disabled="true" name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns13='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns13:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion disabled="true" type="Simple Contains">
              <con:configuration>
                <token>RegistryObjectList/</token>
                <ignoreCase>false</ignoreCase>
                <useRegEx>false</useRegEx>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@codeContext</path>
                <content>No patient correlations found.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:10:14Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="5d62165c-7a92-4211-b4a8-22f1793f3c0c" keepSession="false" maxResults="0" name="Empty Target XML - Correlation for HCID IN UDDI file" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - gateway.properties" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiVA1 = context.findProperty( "UDDIhcid1" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiVA1, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - internalconnectioninfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
//def docQueryURL = "https://" + NHINGatewayHost + ":8181/RespondingGateway_Query_Service/DocQueryTestHelper";
def mockdocQueryURL = "http://" + mockHost + ":18088/mockdocquery";
def LocalHCID = context.findProperty( "LocalAA" );


//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "2.2", "documentquery", docQueryURL, context, log)
//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, LocalHCID, "mockdocumentquery", mockdocQueryURL, context, log)

FileUtils.CreateOrUpdateConnection(destConfigFileLocation, LocalHCID, "mockdocumentquery", mockdocQueryURL, context, log)</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="Empty Target XML - Correlation for HCID IN UDDI file">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion disabled="true" type="Simple Contains">
              <con:configuration>
                <token>&lt;ns5:RegistryObjectList/&gt;</token>
                <ignoreCase>false</ignoreCase>
                <useRegEx>false</useRegEx>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns6='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns6:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject)</path>
                <content>3</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Mock Response" type="mockresponse">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="Document Query" xsi:type="con:MockResponseStep">
          <con:interface>NhincDocQueryPortTypeBinding</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:path>/mockdocquery</con:path>
          <con:port>18088</con:port>
          <con:timeout>10000</con:timeout>
          <con:response>
            <con:settings/>
            <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns16:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" xmlns:ns2="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns3="http://www.w3.org/2005/08/addressing" xmlns:ns4="http://docs.oasis-open.org/wsn/b-2" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns6="http://www.hhs.gov/healthit/nhin/cdc" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:ns8="http://docs.oasis-open.org/wsn/t-1" xmlns:ns9="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns10="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns11="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:ns12="http://nhinc.services.com/schema/auditmessage" xmlns:ns13="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ns14="urn:ihe:iti:xds-b:2007" xmlns:ns15="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns16="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns17="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns18="urn:gov:hhs:fha:nhinc:common:subscription">
         <ns5:RegistryObjectList>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080617124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>be56ce49a2a021c5c88bd4a3eef617ce5b94e002</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>DocQueryMock</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20000320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30845</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.11111</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 1"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 1 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.11111" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20070517124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>e2cad0cdfdf929725a883067637d8268f6d9c578</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20040320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20050101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>31486</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.22222</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 2"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 2 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.22222" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080417124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>a5c654f3db2f22284eb212fb941b4dba5c73f7d2</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20060510040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080801040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30666</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.33333</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 3"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 3 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.33333" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
         </ns5:RegistryObjectList>
      </ns16:AdhocQueryResponse>
   </S:Body>
</S:Envelope>]]></con:responseContent>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
          </con:response>
          <con:assertion type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[1]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIhcid1}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:10:48Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="887d9364-6c82-4903-8190-46476508147f" keepSession="false" maxResults="0" name="Empty Target XML - No Patient Correlations" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (?, ?, ?)"
  sql.executeUpdate(insertSql, [1, remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [2, aa1, hcid1])
  sql.executeUpdate(insertSql, [3, aa2, hcid2])
  sql.executeUpdate(insertSql, [4, aa3, hcid3])
  sql.executeUpdate(insertSql, [5, aa4, hcid4])
  sql.executeUpdate(insertSql, [6, testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="Empty Target XML - No Patient Correlations">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Severity" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@severity</path>
                <content>Error</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="errorCode" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@errorCode</path>
                <content>XDSRepositoryError</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="codeContext" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@codeContext</path>
                <content>No patient correlations found.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:10:55Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="2ac7a10e-f0e6-4d32-b45d-6874809b4e08" keepSession="false" maxResults="0" name="HCID Happy Path - No Patient Correlations" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="HCID Happy Path - No Patient Correlations">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#UDDIhc1description}</urn3:description>
                  <urn3:homeCommunityId>${#Project#UDDIhcid1}</urn3:homeCommunityId>
                  <urn3:name>${#Project#UDDIhc1description}</urn3:name>
               </urn3:homeCommunity>
               <!--<urn3:homeCommunity>
                  <urn3:description>${#Project#UDDIhc2description}</urn3:description>
                  <urn3:homeCommunityId>${#Project#UDDIhcid2}</urn3:homeCommunityId>
                  <urn3:name>${#Project#UDDIhc2description}</urn3:name>
               </urn3:homeCommunity> -->
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Severity" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@severity</path>
                <content>Error</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="errorCode" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@errorCode</path>
                <content>XDSRepositoryError</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="codeContext" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@codeContext</path>
                <content>No patient correlations found.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:10:58Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="5c44df01-4f70-48d3-8930-a31ac9100e8e" keepSession="false" maxResults="0" name="HCID Happy Path - Correlation for HCID IN UDDI file/target XML" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - gateway.properties" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiVA1 = context.findProperty( "UDDIhcid1" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiVA1, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - internalconnectioninfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
//def docQueryURL = "https://" + NHINGatewayHost + ":8181/RespondingGateway_Query_Service/DocQueryTestHelper";
def mockdocQueryURL = "http://" + mockHost + ":18088/mockdocquery";
def LocalHCID = context.findProperty( "LocalAA" );


//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "2.2", "Docquery", auditQueryURL, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, LocalHCID, "mockdocumentquery", mockdocQueryURL, context, log)</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="HCID Happy Path - Correlation for HCID IN UDDI file/target XML">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#UDDIhc1description}</urn3:description>
                  <urn3:homeCommunityId>${#Project#UDDIhcid1}</urn3:homeCommunityId>
                  <urn3:name>${#Project#UDDIhc1description}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#UDDIhc2description}</urn3:description>
                  <urn3:homeCommunityId>${#Project#UDDIhcid2}</urn3:homeCommunityId>
                  <urn3:name>${#Project#UDDIhc2description}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion disabled="true" type="Simple Contains">
              <con:configuration>
                <token>&lt;ns5:RegistryObjectList/&gt;</token>
                <ignoreCase>false</ignoreCase>
                <useRegEx>false</useRegEx>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns6='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns6:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject)</path>
                <content>3</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Mock Response" type="mockresponse">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="Document Query" xsi:type="con:MockResponseStep">
          <con:interface>NhincDocQueryPortTypeBinding</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:path>/mockdocquery</con:path>
          <con:port>18088</con:port>
          <con:timeout>10000</con:timeout>
          <con:response>
            <con:settings/>
            <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns16:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" xmlns:ns2="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns3="http://www.w3.org/2005/08/addressing" xmlns:ns4="http://docs.oasis-open.org/wsn/b-2" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns6="http://www.hhs.gov/healthit/nhin/cdc" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:ns8="http://docs.oasis-open.org/wsn/t-1" xmlns:ns9="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns10="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns11="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:ns12="http://nhinc.services.com/schema/auditmessage" xmlns:ns13="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ns14="urn:ihe:iti:xds-b:2007" xmlns:ns15="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns16="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns17="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns18="urn:gov:hhs:fha:nhinc:common:subscription">
         <ns5:RegistryObjectList>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080617124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>be56ce49a2a021c5c88bd4a3eef617ce5b94e002</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>DocQueryMock</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20000320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30845</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.11111</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 1"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 1 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.11111" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20070517124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>e2cad0cdfdf929725a883067637d8268f6d9c578</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20040320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20050101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>31486</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.22222</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 2"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 2 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.22222" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080417124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>a5c654f3db2f22284eb212fb941b4dba5c73f7d2</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20060510040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080801040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30666</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.33333</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 3"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 3 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.33333" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
         </ns5:RegistryObjectList>
      </ns16:AdhocQueryResponse>
   </S:Body>
</S:Envelope>]]></con:responseContent>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
          </con:response>
          <con:assertion type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[1]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIaa1}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="7b1a13e3-8d02-46ed-bef0-981f0f967fc7" keepSession="false" maxResults="0" name="HCID Happy Path - Correlation for HCID not in UDDI file/target XML" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID not in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def remoteAA = context.findProperty( "testHCID" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, remoteAA, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="HCID Happy Path - Correlation for HCID not in UDDI file/target XML">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#UDDIhc1description}</urn3:description>
                  <urn3:homeCommunityId>${#Project#UDDIhcid1}</urn3:homeCommunityId>
                  <urn3:name>${#Project#UDDIhc1description}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#UDDIhc2description}</urn3:description>
                  <urn3:homeCommunityId>${#Project#UDDIhcid2}</urn3:homeCommunityId>
                  <urn3:name>${#Project#UDDIhc2description}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Severity" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@severity</path>
                <content>Error</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="errorCode" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@errorCode</path>
                <content>XDSRepositoryError</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="codeContext" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@codeContext</path>
                <content>No patient correlations found.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:08Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="4d4e3ed4-32ff-4ac4-9292-e78373844464" keepSession="false" maxResults="0" name="HCID Happy Path - Correlation for both HCID IN UDDI file/target XML" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - gateway.properties" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiVA1 = context.findProperty( "UDDIhcid1" )
   def uddiVA3 = context.findProperty( "UDDIhcid3" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (?, ?, ?, ?, ?)"
                 
sql.executeUpdate(insertSql, [1, localAA, localPatientID, uddiVA1, remotePatientID])
sql.executeUpdate(insertSql, [2, localAA, localPatientID, uddiVA3, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - internalconnectioninfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
//def docQueryURL = "https://" + NHINGatewayHost + ":8181/RespondingGateway_Query_Service/DocQueryTestHelper";
def mockdocQueryURL = "http://" + mockHost + ":18088/mockdocquery";
def LocalHCID = context.findProperty( "LocalAA" );


//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "2.2", "Docquery", auditQueryURL, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, LocalHCID, "mockdocumentquery", mockdocQueryURL, context, log)</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="HCID Happy Path - Correlation for both HCID IN UDDI file/target XML">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#UDDIhc1description}</urn3:description>
                  <urn3:homeCommunityId>${#Project#UDDIhcid1}</urn3:homeCommunityId>
                  <urn3:name>${#Project#UDDIhc1description}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#UDDIhc3description}</urn3:description>
                  <urn3:homeCommunityId>${#Project#UDDIhcid3}</urn3:homeCommunityId>
                  <urn3:name>${#Project#UDDIhc3description}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion disabled="true" type="Simple Contains">
              <con:configuration>
                <token>&lt;ns5:RegistryObjectList/&gt;</token>
                <ignoreCase>false</ignoreCase>
                <useRegEx>false</useRegEx>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns6='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns6:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject)</path>
                <content>6</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Mock Response" type="mockresponse">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="Document Query" xsi:type="con:MockResponseStep">
          <con:interface>NhincDocQueryPortTypeBinding</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:path>/mockdocquery</con:path>
          <con:port>18088</con:port>
          <con:timeout>10000</con:timeout>
          <con:response>
            <con:settings/>
            <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns16:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" xmlns:ns2="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns3="http://www.w3.org/2005/08/addressing" xmlns:ns4="http://docs.oasis-open.org/wsn/b-2" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns6="http://www.hhs.gov/healthit/nhin/cdc" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:ns8="http://docs.oasis-open.org/wsn/t-1" xmlns:ns9="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns10="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns11="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:ns12="http://nhinc.services.com/schema/auditmessage" xmlns:ns13="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ns14="urn:ihe:iti:xds-b:2007" xmlns:ns15="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns16="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns17="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns18="urn:gov:hhs:fha:nhinc:common:subscription">
         <ns5:RegistryObjectList>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080617124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>be56ce49a2a021c5c88bd4a3eef617ce5b94e002</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>DocQueryMock</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20000320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30845</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.11111</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 1"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 1 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.11111" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20070517124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>e2cad0cdfdf929725a883067637d8268f6d9c578</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20040320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20050101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>31486</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.22222</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 2"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 2 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.22222" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080417124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>a5c654f3db2f22284eb212fb941b4dba5c73f7d2</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20060510040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080801040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30666</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.33333</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 3"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 3 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.33333" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
         </ns5:RegistryObjectList>
      </ns16:AdhocQueryResponse>
   </S:Body>
</S:Envelope>]]></con:responseContent>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
          </con:response>
          <con:assertion type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[1]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIaa1}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:11Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="9e22c57d-13af-4120-ab1d-fe1eae63e18b" keepSession="false" maxResults="0" name="HCID Happy Path - Expired Correlation for HCID IN UDDI file/target XML" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - gateway.properties" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiVA1 = context.findProperty( "UDDIhcid1" )
   def uddiVA3 = context.findProperty( "UDDIhcid3" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId, CorrelationExpirationDate) " + 
                   "values (?, ?, ?, ?, ?, ?)"
                 
sql.executeUpdate(insertSql, [1, localAA, localPatientID, uddiVA1, remotePatientID,'2010-01-01 00:00:00'])

}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - internalconnectioninfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
//def docQueryURL = "https://" + NHINGatewayHost + ":8181/RespondingGateway_Query_Service/DocQueryTestHelper";
def mockdocQueryURL = "http://" + mockHost + ":18088/mockdocquery";
def LocalHCID = context.findProperty( "LocalAA" );


//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "2.2", "Docquery", auditQueryURL, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, LocalHCID, "mockdocumentquery", mockdocQueryURL, context, log)</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="HCID Happy Path - Expired Correlation for HCID IN UDDI file/target XML">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#UDDIhc1description}</urn3:description>
                  <urn3:homeCommunityId>${#Project#UDDIhcid1}</urn3:homeCommunityId>
                  <urn3:name>${#Project#UDDIhc1description}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns11='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns11:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion disabled="true" type="Simple Contains">
              <con:configuration>
                <token>&lt;ns5:RegistryObjectList/&gt;</token>
                <ignoreCase>false</ignoreCase>
                <useRegEx>false</useRegEx>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns6='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns6:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject)</path>
                <content>0</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns11='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns11:AdhocQueryResponse[1]/ns8:RegistryErrorList[1]/ns8:RegistryError[1]/@severity</path>
                <content>Error</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns11='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns11:AdhocQueryResponse[1]/ns8:RegistryErrorList[1]/ns8:RegistryError[1]/@errorCode</path>
                <content>XDSRepositoryError</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns11='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns11:AdhocQueryResponse[1]/ns8:RegistryErrorList[1]/ns8:RegistryError[1]/@codeContext</path>
                <content>No patient correlations found.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:17Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="0d6f86ae-5976-4334-8822-ac08fdb49c77" keepSession="false" maxResults="0" name="HCID Alt Path - No Patient Correlations" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="HCID Alt Path - No Patient Correlations">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#testHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#testHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#testHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns13='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns13:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:21Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="02cf8e64-e873-47ae-b7f2-6cc377efb1b5" keepSession="false" maxResults="0" name="HCID Alt Path - Correlation for HCID in target XML and not in UDDI" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID not in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def remoteAA = context.findProperty( "testHCID" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, remoteAA, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="HCID Alt Path - Correlation for HCID in target XML and not in UDDI">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#testHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#testHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#testHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns13='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns13:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:22Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="7c286477-8a88-4aad-ab67-d6968f946de2" keepSession="false" maxResults="0" name="State Happy Path - Correlation for HCID not in UDDI file/target XML" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy InternalConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-internalConnectionInfo";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID not in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def remoteAA = context.findProperty( "testHCID" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, remoteAA, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="State Happy Path - Correlation for HCID not in UDDI file/target XML">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description/>
                  <urn1:homeCommunityId/>
                  <urn1:name/>
               </urn1:homeCommunity>
               <urn1:list/>
               <urn1:region>${#Project#Region1}</urn1:region>
            </urn1:nhinTargetCommunity>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description/>
                  <urn1:homeCommunityId/>
                  <urn1:name/>
               </urn1:homeCommunity>
               <urn1:list/>
               <urn1:region>${#Project#Region2}</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Severity" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@severity</path>
                <content>Error</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="errorCode" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@errorCode</path>
                <content>XDSRepositoryError</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="codeContext" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@codeContext</path>
                <content>No patient correlations found.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:25Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="2ca4b220-9c88-4ea0-b153-bee84cc4e2b3" keepSession="false" maxResults="0" name="State Happy Path - Correlation for HCID IN UDDI file/target XML" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - gateway.properties" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy InternalConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-internalConnectionInfo";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiVA1 = context.findProperty( "UDDIhcid1" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiVA1, remotePatientID])
}


context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiFL1 = context.findProperty( "UDDIhcid3" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (2, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiFL1, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - internalconnectioninfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
//def docQueryURL = "https://" + NHINGatewayHost + ":8181/RespondingGateway_Query_Service/DocQueryTestHelper";
def mockdocQueryURL = "http://" + mockHost + ":18088/mockdocquery";
def LocalHCID = context.findProperty( "LocalAA" );


//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "2.2", "Docquery", auditQueryURL, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, LocalHCID, "mockdocumentquery", mockdocQueryURL, context, log)</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="State Happy Path - Correlation for HCID IN UDDI file/target XML">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description/>
                  <urn1:homeCommunityId/>
                  <urn1:name/>
               </urn1:homeCommunity>
               <urn1:list/>
               <urn1:region>${#Project#Region1}</urn1:region>
            </urn1:nhinTargetCommunity>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description/>
                  <urn1:homeCommunityId/>
                  <urn1:name/>
               </urn1:homeCommunity>
               <urn1:list/>
               <urn1:region>${#Project#Region2}</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion disabled="true" type="Simple Contains">
              <con:configuration>
                <token>&lt;ns5:RegistryObjectList/&gt;</token>
                <ignoreCase>false</ignoreCase>
                <useRegEx>false</useRegEx>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns6='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns6:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject)</path>
                <content>6</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Mock Response" type="mockresponse">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="Document Query" xsi:type="con:MockResponseStep">
          <con:interface>NhincDocQueryPortTypeBinding</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:path>/mockdocquery</con:path>
          <con:port>18088</con:port>
          <con:timeout>10000</con:timeout>
          <con:response>
            <con:settings/>
            <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns16:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" xmlns:ns2="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns3="http://www.w3.org/2005/08/addressing" xmlns:ns4="http://docs.oasis-open.org/wsn/b-2" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns6="http://www.hhs.gov/healthit/nhin/cdc" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:ns8="http://docs.oasis-open.org/wsn/t-1" xmlns:ns9="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns10="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns11="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:ns12="http://nhinc.services.com/schema/auditmessage" xmlns:ns13="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ns14="urn:ihe:iti:xds-b:2007" xmlns:ns15="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns16="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns17="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns18="urn:gov:hhs:fha:nhinc:common:subscription">
         <ns5:RegistryObjectList>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080617124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>be56ce49a2a021c5c88bd4a3eef617ce5b94e002</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>DocQueryMock</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20000320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30845</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.11111</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 1"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 1 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.11111" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20070517124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>e2cad0cdfdf929725a883067637d8268f6d9c578</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20040320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20050101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>31486</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.22222</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 2"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 2 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.22222" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080417124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>a5c654f3db2f22284eb212fb941b4dba5c73f7d2</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20060510040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080801040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30666</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.33333</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 3"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 3 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.33333" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
         </ns5:RegistryObjectList>
      </ns16:AdhocQueryResponse>
   </S:Body>
</S:Envelope>]]></con:responseContent>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
          </con:response>
          <con:assertion name="DocQuery sent to VA" type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[1]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIhcid1}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
          <con:assertion disabled="true" name="DocQuery sent to FL" type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[2]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIhcid1}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:28Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="acb08d49-8426-462e-ba13-d78fc9eb1dbc" keepSession="false" maxResults="0" name="State Happy Path - No Patient Correlations" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Intialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="State Happy Path - No Patient Correlations">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:list/>
               <urn3:region>US-MA</urn3:region>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns13='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns13:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:33Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="213ffdab-3205-42f3-b9f3-b70f0c097c9e" keepSession="false" maxResults="0" name="State Alt Path - No Patient Correlations" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Initialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy InternalConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-internalConnectionInfo";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="State Alt Path - No Patient Correlations">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#UDDIdc3description}</urn1:description>
                  <urn1:homeCommunityId>${#Project#UDDIhcid3}</urn1:homeCommunityId>
                  <urn1:name>${#Project#UDDIdc3description}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description/>
                  <urn1:homeCommunityId/>
                  <urn1:name/>
               </urn1:homeCommunity>
               <urn1:list/>
               <urn1:region>${#Project#Region3}</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Severity" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@severity</path>
                <content>Error</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="errorCode" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@errorCode</path>
                <content>XDSRepositoryError</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="codeContext" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@codeContext</path>
                <content>No patient correlations found.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:37Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="513d71ab-aff5-45ef-a71d-f2fafb41545f" keepSession="false" maxResults="0" name="State Alt Path - Correlation for HCID not in UDDI file/target XML" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Initialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy InternalConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-internalConnectionInfo";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID not in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def remoteAA = context.findProperty( "testHCID" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, remoteAA, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="State Alt Path - Correlation for HCID not in UDDI file/target XML">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#UDDIdc3description}</urn3:description>
                  <urn3:homeCommunityId>${#Project#UDDIhcid3}</urn3:homeCommunityId>
                  <urn3:name>${#Project#UDDIdc3description}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description/>
                  <urn3:homeCommunityId/>
                  <urn3:name/>
               </urn3:homeCommunity>
               <urn3:list/>
               <urn3:region>${#Project#Region3}</urn3:region>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion disabled="true" type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Severity" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@severity</path>
                <content>Error</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="errorCode" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@errorCode</path>
                <content>XDSRepositoryError</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="codeContext" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns15='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns16:AdhocQueryResponse[1]/ns15:RegistryErrorList[1]/ns15:RegistryError[1]/@codeContext</path>
                <content>No patient correlations found.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:43Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="9e940daf-b52b-4d96-992c-cef25421fd38" keepSession="false" maxResults="0" name="State Alt Path - Correlation for HCID IN UDDI file/target XML" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Initialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy InternalConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-internalConnectionInfo";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - gateway.properties" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiVA1 = context.findProperty( "UDDIhcid1" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiVA1, remotePatientID])
}

context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiVA2 = context.findProperty( "UDDIhcid2" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (2, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiVA2, remotePatientID])
}

context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiFL1 = context.findProperty( "UDDIhcid3" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (3, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiFL1, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - internalconnectioninfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
//def docQueryURL = "https://" + NHINGatewayHost + ":8181/RespondingGateway_Query_Service/DocQueryTestHelper";
def mockdocQueryURL = "http://" + mockHost + ":18088/mockdocquery";
def LocalHCID = context.findProperty( "LocalAA" );


//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "2.2", "Docquery", auditQueryURL, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, LocalHCID, "mockdocumentquery", mockdocQueryURL, context, log)</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/&gt;</con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="State Alt Path - Correlation for HCID IN UDDI file/target XML">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>

               <urn3:nhinTargetCommunity>
                  <urn3:homeCommunity>
                     <urn3:description>${#Project#UDDIdc3description}</urn3:description>
                     <urn3:homeCommunityId>${#Project#UDDIhcid3}</urn3:homeCommunityId>
                     <urn3:name>${#Project#UDDIdc3description}</urn3:name>
                  </urn3:homeCommunity>
               </urn3:nhinTargetCommunity>
               <urn3:nhinTargetCommunity>
                  <urn3:homeCommunity>
                     <urn3:description/>
                     <urn3:homeCommunityId/>
                     <urn3:name/>
                  </urn3:homeCommunity>
                  <urn3:list/>
                  <urn3:region>${#Project#Region1}</urn3:region>
               </urn3:nhinTargetCommunity>

         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion disabled="true" type="Simple Contains">
              <con:configuration>
                <token>&lt;ns5:RegistryObjectList/&gt;</token>
                <ignoreCase>false</ignoreCase>
                <useRegEx>false</useRegEx>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns6='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns6:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject)</path>
                <content>6</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Mock Response" type="mockresponse">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="Document Query" xsi:type="con:MockResponseStep">
          <con:interface>NhincDocQueryPortTypeBinding</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:path>/mockdocquery</con:path>
          <con:port>18088</con:port>
          <con:response>
            <con:settings/>
            <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns16:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" xmlns:ns2="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns3="http://www.w3.org/2005/08/addressing" xmlns:ns4="http://docs.oasis-open.org/wsn/b-2" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns6="http://www.hhs.gov/healthit/nhin/cdc" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:ns8="http://docs.oasis-open.org/wsn/t-1" xmlns:ns9="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns10="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns11="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:ns12="http://nhinc.services.com/schema/auditmessage" xmlns:ns13="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ns14="urn:ihe:iti:xds-b:2007" xmlns:ns15="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns16="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns17="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns18="urn:gov:hhs:fha:nhinc:common:subscription">
         <ns5:RegistryObjectList>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080617124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>be56ce49a2a021c5c88bd4a3eef617ce5b94e002</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>DocQueryMock</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20000320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30845</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.11111</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 1"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 1 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.11111" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20070517124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>e2cad0cdfdf929725a883067637d8268f6d9c578</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20040320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20050101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>31486</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.22222</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 2"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 2 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.22222" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080417124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>a5c654f3db2f22284eb212fb941b4dba5c73f7d2</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20060510040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080801040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30666</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.33333</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 3"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 3 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.33333" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
         </ns5:RegistryObjectList>
      </ns16:AdhocQueryResponse>
   </S:Body>
</S:Envelope>]]></con:responseContent>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
          </con:response>
          <con:assertion name="Doc Query sent to VA -1" type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[1]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIhcid1}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
          <con:assertion disabled="true" name="Doc Query sent to VA -2" type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[2]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIhcid2}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
          <con:assertion disabled="true" name="Doc Query sent to FL - 1" type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[3]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIhcid3}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:19:36Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="b673cce6-4e31-401e-8fb0-1b98f7e35455" keepSession="false" maxResults="0" name="State Alt Path - Region and associated HCID in target xml results in one response" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Initialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy InternalConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-internalConnectionInfo";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - gateway.properties" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiFL1 = context.findProperty( "UDDIhcid4" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiFL1, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - internalconnectioninfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
//def docQueryURL = "https://" + NHINGatewayHost + ":8181/RespondingGateway_Query_Service/DocQueryTestHelper";
def mockdocQueryURL = "http://" + mockHost + ":18088/mockdocquery";
def LocalHCID = context.findProperty( "LocalAA" );


//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "2.2", "Docquery", auditQueryURL, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, LocalHCID, "mockdocumentquery", mockdocQueryURL, context, log)</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="State Alt Path - Region and associated HCID in target xml results in one response">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>

               <urn3:nhinTargetCommunity>
                  <urn3:homeCommunity>
                     <urn3:description>${#Project#UDDIdc4description}</urn3:description>
                     <urn3:homeCommunityId>${#Project#UDDIhcid4}</urn3:homeCommunityId>
                     <urn3:name>${#Project#UDDIdc4description}</urn3:name>
                  </urn3:homeCommunity>
               </urn3:nhinTargetCommunity>
               <urn3:nhinTargetCommunity>
                  <urn3:homeCommunity>
                     <urn3:description/>
                     <urn3:homeCommunityId/>
                     <urn3:name/>
                  </urn3:homeCommunity>
                  <urn3:list/>
                  <urn3:region>${#Project#Region3}</urn3:region>
               </urn3:nhinTargetCommunity>

         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion disabled="true" type="Simple Contains">
              <con:configuration>
                <token>&lt;ns5:RegistryObjectList/&gt;</token>
                <ignoreCase>false</ignoreCase>
                <useRegEx>false</useRegEx>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns6='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns6:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject)</path>
                <content>3</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Mock Response" type="mockresponse">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="Document Query" xsi:type="con:MockResponseStep">
          <con:interface>NhincDocQueryPortTypeBinding</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:path>/mockdocquery</con:path>
          <con:port>18088</con:port>
          <con:response>
            <con:settings/>
            <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns16:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" xmlns:ns2="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns3="http://www.w3.org/2005/08/addressing" xmlns:ns4="http://docs.oasis-open.org/wsn/b-2" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns6="http://www.hhs.gov/healthit/nhin/cdc" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:ns8="http://docs.oasis-open.org/wsn/t-1" xmlns:ns9="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns10="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns11="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:ns12="http://nhinc.services.com/schema/auditmessage" xmlns:ns13="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ns14="urn:ihe:iti:xds-b:2007" xmlns:ns15="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns16="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns17="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns18="urn:gov:hhs:fha:nhinc:common:subscription">
         <ns5:RegistryObjectList>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080617124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>be56ce49a2a021c5c88bd4a3eef617ce5b94e002</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>DocQueryMock</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20000320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30845</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.11111</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 1"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 1 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.11111" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20070517124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>e2cad0cdfdf929725a883067637d8268f6d9c578</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20040320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20050101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>31486</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.22222</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 2"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 2 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.22222" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080417124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>a5c654f3db2f22284eb212fb941b4dba5c73f7d2</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20060510040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080801040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30666</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.33333</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 3"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 3 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.33333" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
         </ns5:RegistryObjectList>
      </ns16:AdhocQueryResponse>
   </S:Body>
</S:Envelope>]]></con:responseContent>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
          </con:response>
          <con:assertion name="one Doc Query result" type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[1]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIhcid4}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:53Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="ecb4d188-094b-4f8c-bb59-b5cf33c4e974" keepSession="false" maxResults="0" name="State Alt Path - Multiple regions and correlations" searchProperties="true">
      <con:settings/>
      <con:testStep disabled="true" name="Initialize Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-uddiConnectionInfo.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Copy InternalConfigurationInfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "UDDIcopy-internalConnectionInfo";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - gateway.properties" type="groovy">
        <con:settings/>
        <con:config>
          <script>//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];

void UpdateProperty(String directory, String filename, String propertyKey, String propertyValue,context,log) {
			  
   log.info("begin UpdateProperty; directory='" + directory + "';filename='" + filename + "';key='" + propertyKey + "';value='" + propertyValue + "';");
   File file = new File(directory,filename);
   Properties properties = new Properties();
   FileInputStream frPropFile = new FileInputStream(file);
   properties.load(frPropFile);
   properties.setProperty(propertyKey, propertyValue);
   FileOutputStream fwPropFile = new FileOutputStream(file);
   properties.store(fwPropFile, "**DO NOT CHECK IN** - written by groovy script FileUtils.groovy-&gt;UpdateProperty");
   properties = null;
}

UpdateProperty(destConfigFileLocation,"gateway.properties","documentQueryQuerySelf","false",context,log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Generate patient ID for Doc Query" type="groovy">
        <con:settings/>
        <con:config>
          <script>def localAA = context.findProperty('LocalAA')
def dqPatientID = context.findProperty('DQPatientID')

context.testCase.setPropertyValue('FullPatientID', "'${dqPatientID}^^^&amp;amp;${localAA}&amp;amp;ISO'");</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Add Correlation for HCID in the UDDI" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiVA1 = context.findProperty( "UDDIhcid1" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (1, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiVA1, remotePatientID])
}

context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiGA1 = context.findProperty( "UDDIhcid4" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (2, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiGA1, remotePatientID])
}

context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  def localAA = context.findProperty( "LocalAA" )	
  def localPatientID = context.findProperty("LocalPatientID")
  def uddiFL1 = context.findProperty( "UDDIhcid3" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (3, ?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [localAA, localPatientID, uddiFL1, remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -&gt; 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def hcid1 = context.findProperty("UDDIhcid1")
  def hcid2 = context.findProperty("UDDIhcid2")
  def hcid3 = context.findProperty("UDDIhcid3")
  def hcid4 = context.findProperty("UDDIhcid4")
  def testhcid = context.findProperty("testHCID")
  def aa1 = context.findProperty("UDDIaa1")
  def aa2 = context.findProperty("UDDIaa2")
  def aa3 = context.findProperty("UDDIaa3")
  def aa4 = context.findProperty("UDDIaa4")
  def testaa = context.findProperty("testAA")
  
  def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
                   "values (1, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, [aa1, hcid1])
  sql.executeUpdate(insertSql, [aa2, hcid2])
  sql.executeUpdate(insertSql, [aa3, hcid3])
  sql.executeUpdate(insertSql, [aa4, hcid4])
  sql.executeUpdate(insertSql, [testaa, testhcid])
  
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config - internalconnectioninfo" type="groovy">
        <con:settings/>
        <con:config>
          <script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
//def docQueryURL = "https://" + NHINGatewayHost + ":8181/RespondingGateway_Query_Service/DocQueryTestHelper";
def mockdocQueryURL = "http://" + mockHost + ":18088/mockdocquery";
def LocalHCID = context.findProperty( "LocalAA" );


//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "2.2", "Docquery", auditQueryURL, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, LocalHCID, "mockdocumentquery", mockdocQueryURL, context, log)</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="DocQueryTestsForUDDI" testCase="State Alt Path - Multiple regions and correlations">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="RegistryObject" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:2.16.840.1.113883.3.200" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>${#TestCase#FullPatientID}</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:dateOfSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#sigDate}</urn3:dateOfSignature>
            <urn3:expirationDate xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">${#Project#expireDate}</urn3:expirationDate>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:purposeOfDisclosure xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">TREATMENT</urn3:purposeOfDisclosure>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerb</urn3:userName>
               <urn3:role>Pharmacy</urn3:role>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:claimFormRef>Ref-Clm-123</urn3:claimFormRef>
            <urn3:claimFormRaw>YWVvbGlhbQ==</urn3:claimFormRaw>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description/>
                  <urn3:homeCommunityId/>
                  <urn3:name/>
               </urn3:homeCommunity>
               <urn3:list/>
               <urn3:region>${#Project#Region1}</urn3:region>
            </urn3:nhinTargetCommunity>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description/>
                  <urn3:homeCommunityId/>
                  <urn3:name/>
               </urn3:homeCommunity>
               <urn3:list/>
               <urn3:region>${#Project#Region2}</urn3:region>
            </urn3:nhinTargetCommunity>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description/>
                  <urn3:homeCommunityId/>
                  <urn3:name/>
               </urn3:homeCommunity>
               <urn3:list/>
               <urn3:region>${#Project#Region3}</urn3:region>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response"/>
            <con:assertion type="Schema Compliance">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion"/>
            <con:assertion name="Status" type="XPath Match">
              <con:configuration>
                <path>declare namespace ns16='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns16:AdhocQueryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion disabled="true" type="Simple Contains">
              <con:configuration>
                <token>&lt;ns5:RegistryObjectList/&gt;</token>
                <ignoreCase>false</ignoreCase>
                <useRegEx>false</useRegEx>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match">
              <con:configuration>
                <path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns6='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns6:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject)</path>
                <content>9</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Mock Response" type="mockresponse">
        <con:settings/>
        <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="Document Query" xsi:type="con:MockResponseStep">
          <con:interface>NhincDocQueryPortTypeBinding</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:path>/mockdocquery</con:path>
          <con:port>18088</con:port>
          <con:response>
            <con:settings/>
            <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns16:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" xmlns:ns2="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns3="http://www.w3.org/2005/08/addressing" xmlns:ns4="http://docs.oasis-open.org/wsn/b-2" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns6="http://www.hhs.gov/healthit/nhin/cdc" xmlns:ns7="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:ns8="http://docs.oasis-open.org/wsn/t-1" xmlns:ns9="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns10="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns11="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:ns12="http://nhinc.services.com/schema/auditmessage" xmlns:ns13="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ns14="urn:ihe:iti:xds-b:2007" xmlns:ns15="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns16="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns17="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns18="urn:gov:hhs:fha:nhinc:common:subscription">
         <ns5:RegistryObjectList>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080617124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>be56ce49a2a021c5c88bd4a3eef617ce5b94e002</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>DocQueryMock</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20000320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30845</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.11111</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 1"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 1 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.11111" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:4080daaa-7d9f-469a-9091-a38a7f442b83" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20070517124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>e2cad0cdfdf929725a883067637d8268f6d9c578</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20040320050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20050101050000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>31486</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.22222</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 2"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 2 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.22222" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:e0bb3044-10d9-4487-991c-8c0d0be55f04" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
            <ns5:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966">
               <ns5:Slot name="creationTime">
                  <ns5:ValueList>
                     <ns5:Value>20080417124906</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="hash">
                  <ns5:ValueList>
                     <ns5:Value>a5c654f3db2f22284eb212fb941b4dba5c73f7d2</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="intendedRecipient">
                  <ns5:ValueList>
                     <ns5:Value>Scott Borst</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="languageCode">
                  <ns5:ValueList>
                     <ns5:Value>en-US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="legalAuthenticator">
                  <ns5:ValueList>
                     <ns5:Value>legal</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStartTime">
                  <ns5:ValueList>
                     <ns5:Value>20060510040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="serviceStopTime">
                  <ns5:ValueList>
                     <ns5:Value>20080801040000</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="size">
                  <ns5:ValueList>
                     <ns5:Value>30666</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientId">
                  <ns5:ValueList>
                     <ns5:Value>D123401</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="sourcePatientInfo">
                  <ns5:ValueList>
                     <ns5:Value>PID-3|pid1^^^domain</ns5:Value>
                     <ns5:Value>PID-5|Younger^Gallow^^^</ns5:Value>
                     <ns5:Value>PID-7|19990627</ns5:Value>
                     <ns5:Value>PID-8|M</ns5:Value>
                     <ns5:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="URI">
                  <ns5:ValueList>
                     <ns5:Value>1.123401.33333</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Slot name="repositoryUniqueId">
                  <ns5:ValueList>
                     <ns5:Value>1</ns5:Value>
                  </ns5:ValueList>
               </ns5:Slot>
               <ns5:Name>
                  <ns5:LocalizedString value="Younger CONNECT TESTGATEWAY Document 3"/>
               </ns5:Name>
               <ns5:Description>
                  <ns5:LocalizedString value="Document 3 Younder CONNECT TESTGATEWAY comments"/>
               </ns5:Description>
               <ns5:Classification nodeRepresentation="" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns5:Slot name="authorPerson">
                     <ns5:ValueList>
                        <ns5:Value>Dr. Joseph Hoodwink</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorInstitution">
                     <ns5:ValueList>
                        <ns5:Value>Main Children's Hospital</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorRole">
                     <ns5:ValueList>
                        <ns5:Value>Primary Care Provider</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Slot name="authorSpecialty">
                     <ns5:ValueList>
                        <ns5:Value>Pediatrician</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>2.16.840.1.113883.6.1</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Summarization of Episode Note"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>Confidential</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="Confidential"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>formatCodeScheme_value</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>UTF-8</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="UTF-8"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:Classification nodeRepresentation="test" classifiedObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns5:Slot name="codingScheme">
                     <ns5:ValueList>
                        <ns5:Value>test</ns5:Value>
                     </ns5:ValueList>
                  </ns5:Slot>
                  <ns5:Name>
                     <ns5:LocalizedString value="test"/>
                  </ns5:Name>
               </ns5:Classification>
               <ns5:ExternalIdentifier value="1.123401.33333" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
               <ns5:ExternalIdentifier value="'D123401^^^&amp;1.1&amp;ISO'" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:f034edf1-23fd-4aea-a3f8-d14c080f2966" id="">
                  <ns5:Name>
                     <ns5:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns5:Name>
               </ns5:ExternalIdentifier>
            </ns5:ExtrinsicObject>
         </ns5:RegistryObjectList>
      </ns16:AdhocQueryResponse>
   </S:Body>
</S:Envelope>]]></con:responseContent>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
          </con:response>
          <con:assertion name="Doc Query sent to VA -1" type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[1]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIhcid1}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
          <con:assertion disabled="true" name="Doc Query sent to VA -2" type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[2]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIhcid2}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
          <con:assertion disabled="true" name="Doc Query sent to FL - 1" type="XPath Match">
            <con:configuration>
              <path>declare namespace ns10='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns12='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
declare namespace ns8='urn:gov:hhs:fha:nhinc:common:nhinccommoninternalorch';
//ns8:RespondingGateway_CrossGatewayQueryRequest[1]/ns12:AdhocQueryRequest[3]/ns10:AdhocQuery[1]/ns10:Slot[1]/ns10:ValueList[1]/ns10:Value[1]</path>
              <content>'D123401^^^&amp;${#Project#UDDIhcid3}&amp;ISO'</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            </con:configuration>
          </con:assertion>
        </con:config>
      </con:testStep>
      <con:testStep name="Restore Configurations" type="groovy">
        <con:settings/>
        <con:config>
          <script>FileUtils.InitializeNHINCProperties(context, log);</script>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2010-09-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2010-09-01T02:11:59Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/01/2010 00:00:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2010-10-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    <con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript></con:testCase>
    <con:properties/>
    <con:reportParameters/>
  </con:testSuite>
  <con:requirements/>
  <con:properties>
    
    
    <con:property><con:name>AAMappingDB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>AAMappingTable</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>AQPatientID</con:name><con:value>D123401</con:value></con:property>
    
    
    
    
    
    
    <con:property><con:name>AQUserID</con:name><con:value>kskagerb</con:value></con:property><con:property><con:name>DBHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>DBPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>DBPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>DBUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>DQDocID</con:name><con:value>1.123401.11111</con:value></con:property><con:property><con:name>DQPatientID</con:name><con:value>D123401</con:value></con:property>
    
    
    <con:property><con:name>DRDocID</con:name><con:value>1.123407.777777</con:value></con:property><con:property><con:name>DRRepoID</con:name><con:value>1</con:value></con:property>
    
    
    
    
    <con:property><con:name>Endpoint-DocQuery</con:name><con:value>http://localhost:8080/Gateway/DocumentQuery/2_0/EntityService/EntityDocQueryUnsecured</con:value></con:property>
    
    
    
    
    
    
    
    
    <con:property><con:name>LocalAA</con:name><con:value>1.1</con:value></con:property><con:property><con:name>LocalConfigDir</con:name><con:value>C:/SelfTest/EndToEndSelfTest</con:value></con:property><con:property><con:name>LocalHCDescription</con:name><con:value>InternalTest1</con:value></con:property><con:property><con:name>LocalHCID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>LocalPatientID</con:name><con:value>D123401</con:value></con:property>
    
    
    
    <con:property><con:name>MockHost</con:name><con:value>localhost</con:value></con:property>
    
    <con:property><con:name>MPIDir</con:name><con:value>C:/Sun/AppServer/domains/domain1/config</con:value></con:property><con:property><con:name>NHINGatewayConfigDir</con:name><con:value>C:/Sun/AppServer/domains/domain1/config/nhin</con:value></con:property><con:property><con:name>NHINGatewayHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>NotificationEndpoint</con:name><con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationConsumerService/HiemNotify</con:value></con:property><con:property><con:name>NotifySubscriptionID</con:name><con:value>-f7c1a5d:1204e50e42e:-79eb</con:value></con:property>
    
    <con:property><con:name>NotifySubscriptionManagerEndpointAddress</con:name><con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property><con:property><con:name>PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property>
    <con:property><con:name>PseudonymAA</con:name><con:value>ABC</con:value></con:property><con:property><con:name>PseudonymPatientID</con:name><con:value>PSEUDO001</con:value></con:property><con:property><con:name>RealAA</con:name><con:value>1.1.1</con:value></con:property>
    
    
    
    <con:property><con:name>RealPatientID</con:name><con:value>D1234010050</con:value></con:property><con:property><con:name>Region1</con:name><con:value>US-VA</con:value></con:property><con:property><con:name>Region2</con:name><con:value>US-FL</con:value></con:property>
    
    <con:property><con:name>Region3</con:name><con:value>US-GA</con:value></con:property><con:property><con:name>Region4</con:name><con:value>US-MA</con:value></con:property><con:property><con:name>RemoteAA</con:name><con:value>2.2</con:value></con:property><con:property><con:name>RemoteHCDescription</con:name><con:value>InternalTest2</con:value></con:property><con:property><con:name>RemoteHCID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>RemotePatientID</con:name><con:value>D123401</con:value></con:property>
    
    
    
    
    
    
    <con:property><con:name>SubscribePatientID</con:name><con:value>D123401</con:value></con:property><con:property><con:name>SubscriptionDB</con:name><con:value>subscriptionrepository</con:value></con:property><con:property><con:name>SubscriptionEndpoint</con:name><con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationProducerService/HiemSubscription</con:value></con:property><con:property><con:name>SubscriptionManagerEndpointAddress</con:name><con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value></con:property>
    <con:property><con:name>SubscriptionTable</con:name><con:value>subscription</con:value></con:property>
    
    
    
    <con:property><con:name>testAA</con:name><con:value>8.8</con:value></con:property><con:property><con:name>testHCDescription</con:name><con:value>Test HCID</con:value></con:property>
    
    
    <con:property><con:name>testHCID</con:name><con:value>8.8</con:value></con:property><con:property><con:name>UDDI4</con:name><con:value>4.4</con:value></con:property><con:property><con:name>UDDIaa1</con:name><con:value>4.4</con:value></con:property><con:property><con:name>UDDIaa2</con:name><con:value>5.5</con:value></con:property><con:property><con:name>UDDIaa3</con:name><con:value>6.6</con:value></con:property><con:property><con:name>UDDIaa4</con:name><con:value>7.7</con:value></con:property><con:property><con:name>UDDIdc3description</con:name><con:value>UDDI Test3</con:value></con:property><con:property><con:name>UDDIhc1description</con:name><con:value>UDDI Test1</con:value></con:property>
    
    
    
    
    
    
    
    <con:property><con:name>UDDIhc2description</con:name><con:value>UDDI Test2</con:value></con:property><con:property><con:name>UDDIhc3description</con:name><con:value>UDDI Test3</con:value></con:property><con:property><con:name>UDDIhc4description</con:name><con:value>UDDI Test4</con:value></con:property>
    
    
    
  <con:property><con:name>UDDIhcid1</con:name><con:value>4.4</con:value></con:property><con:property><con:name>UDDIhcid2</con:name><con:value>5.5</con:value></con:property><con:property><con:name>UDDIhcid3</con:name><con:value>6.6</con:value></con:property><con:property><con:name>UDDIhcid4</con:name><con:value>7.7</con:value></con:property><con:property><con:name>UnSubscriptionID</con:name><con:value>3e74139f-5271-4db1-98c0-88748fa3e4e3</con:value></con:property></con:properties>
  <con:afterLoadScript>def propertiesFile = new File(new File(project.path).parent, 'DocQueryTestsForUDDI-soapui-project.properties')
if (propertiesFile.exists()) {
	def props = new Properties()
	props.load(new FileReader(propertiesFile))
	props.each { key, value -&gt;
	    project.setPropertyValue(key, value)
	}
}


TimeZone.setDefault(TimeZone.getTimeZone("UTC"))
def testRunListener = [
  afterRun: { testRunner, runContext -&gt; },
  afterStep: { testRunner, runContext, result -&gt; },
  beforeStep: { testRunner, runContext -&gt; },
  beforeStep: { testRunner, runContext, testStep -&gt; },
  beforeRun: { testRunner, runContext -&gt; 
    use (org.codehaus.groovy.runtime.TimeCategory) {
      def startDate = 5.minutes.ago
      def endDate = 5.minutes.from.now
      def expireDate = 30.days.from.now

      def df = "yyyy-MM-dd'T'HH:mm:ss'Z'"
      def dfSig = "MM/dd/yyyy' 'HH:mm:ss"

      runContext.testCase.setPropertyValue("startDate", startDate.format(df))
      runContext.testCase.setPropertyValue("endDate", endDate.format(df))
      runContext.testCase.setPropertyValue("sigDate", startDate.format(dfSig))
      runContext.testCase.setPropertyValue("expireDate", expireDate.format(df))
    }
  }   
] as com.eviware.soapui.model.testsuite.TestRunListener

project.testSuiteList*.testCaseList.flatten()*.addTestRunListener(testRunListener)



com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.findProperty = { propertyName -&gt;
    return delegate.getProperty(propertyName) ?:
                delegate.testCase.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.project.getPropertyValue(propertyName)
}

com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.withSql = { dbOrPropertyName, block -&gt;
  def dbName = delegate.findProperty(dbOrPropertyName) ?: dbOrPropertyName
  def host = delegate.findProperty('DBHost')
  def port = delegate.findProperty('DBPort')
  def user = delegate.findProperty('DBUser')
  def pass = delegate.findProperty('DBPass')
  
  def connectString = "jdbc:mysql://${host}:${port}/${dbName}"
  def sql = groovy.sql.Sql.newInstance(connectString, user, pass, "com.mysql.jdbc.Driver");
  try {
     block(sql)
  } finally {
    sql.close()
  }
}</con:afterLoadScript>
  <con:wssContainer/>
  <con:databaseConnectionContainer/>
  <con:reporting>
    <con:reportTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:parameters/>
  </con:reporting>
  <con:eventHandlers name="TestSuiteRunListener.beforeTestCase" type="TestSuiteRunListener.beforeTestCase">
    <con:script>FileUtils.backupConfiguration(context, log);</con:script>
  </con:eventHandlers>
  <con:eventHandlers name="TestSuiteRunListener.afterTestCase" type="TestSuiteRunListener.afterTestCase">
    <con:script>FileUtils.restoreConfiguration(context, log)</con:script>
  </con:eventHandlers>
</con:soapui-project>