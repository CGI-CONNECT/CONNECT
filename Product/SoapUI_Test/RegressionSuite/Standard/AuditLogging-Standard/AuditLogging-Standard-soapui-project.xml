<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="AuditLogging-Standard" resourceRoot="${projectDir}" soapui-version="4.5.1" abortOnError="false" runType="SEQUENTIAL" id="5db14dc5-8331-41c4-a9aa-da6343567d30" xmlns:con="http://eviware.com/soapui/config">
  <con:settings/>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:entityadmindistribution}AdministrativeDistribution_Binding_Soap12" definition="../../../target/wsdl/EntityAdminDist_g1.wsdl" name="AdministrativeDistribution_Binding_Soap12_g1" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="c126afab-fa89-4571-a3dd-26a231fd90a8" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache/><con:endpoints>
      <con:endpoint>http://localhost:${HttpDefaultPort}/Gateway/AdminDistribution/2_0/AdministrativeDistribution_Service</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:oasis:names:tc:emergency:EDXL:DE:1.0:SendAlertMessage" bindingOperationName="SendAlertMessage" inputName="" isOneWay="false" name="SendAlertMessage" sendsAttachments="false" type="One-Way" id="3ad22219-5a5d-4db3-8df4-5a9902fadc6a">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:nhincentityxdr}EntityXDR_Binding" definition="../../../target/wsdl/EntityXDR.wsdl" name="EntityXDR_Binding" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="b45a46f7-4b7d-45cb-9cf8-7acfd1895d25" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache type="TEXT" rootPart="file:/C:/dev/CONNECT/Product/SoapUI_Test/target/wsdl/EntityXDR.wsdl"><con:part><con:url>file:/C:/dev/CONNECT/Product/SoapUI_Test/target/wsdl/EntityXDR.wsdl</con:url><con:content><![CDATA[<!--This wsdl file is for an XDS.b Document Repository Actor-->
<definitions name="NhincEntityXDR" targetNamespace="urn:gov:hhs:fha:nhinc:nhincentityxdr" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:ihe="urn:ihe:iti:xds-b:2007" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:nhincentityxdr" xmlns:nccommonentity="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:wsaws="http://www.w3.org/2005/08/addressing" xmlns:vprop="http://docs.oasis-open.org/wsbpel/2.0/varprop" xmlns:sxnmp="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/NMProperty" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/">
  <documentation>IHE XDR Document Repository</documentation>
  <types>
    <xsd:schema>
      <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="../schemas/ebRS/rs.xsd"/>
      <xsd:import namespace="urn:ihe:iti:xds-b:2007" schemaLocation="../schemas/ihe/XDS.b_DocumentRepository.xsd"/>
      <xsd:import schemaLocation="../schemas/ebRS/query.xsd" namespace="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0"/>
      <xsd:import namespace="urn:gov:hhs:fha:nhinc:gateway:samltokendata" schemaLocation="../schemas/nhinc/gateway/SamlTokenData.xsd"/>
      <xsd:import namespace="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" schemaLocation="../schemas/nhinc/common/NhincCommonEntity.xsd"/>
    </xsd:schema>
    <!--Importing all schemas within one seems to confuse some parsers
      and code-generation tools (and may be invalid)
    <xsd:schema elementFormDefault="qualified">
      <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0"
        schemaLocation="../schema/ebRS/rs.xsd"/>
      <xsd:import namespace="urn:ihe:iti:xds-b:2007"
        schemaLocation="../schema/IHE/XDS.b_DocumentRepository.xsd"/>
    </xsd:schema>-->
  </types>
  <message name="ProvideAndRegisterDocumentSet-b_Message">
    <documentation>Provide and Register Document Set</documentation>
    <part name="body" element="nccommonentity:RespondingGateway_ProvideAndRegisterDocumentSetRequest"/>
  </message>
  <message name="ProvideAndRegisterDocumentSet-bResponse_Message">
    <documentation>Provide And Register Document Set Response</documentation>
    <part name="body" element="rs:RegistryResponse"/>
  </message>
  <portType name="EntityXDR_PortType">
    <operation name="ProvideAndRegisterDocumentSet-b">
      <input message="tns:ProvideAndRegisterDocumentSet-b_Message" wsaw:Action="tns:ProvideAndRegisterDocumentSet-b"/>
      <output message="tns:ProvideAndRegisterDocumentSet-bResponse_Message" wsaw:Action="tns:ProvideAndRegisterDocumentSet-bResponse"/>
    </operation>
  </portType>
  <binding name="EntityXDR_Binding" type="tns:EntityXDR_PortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="ProvideAndRegisterDocumentSet-b">
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
  </binding>
  <service name="EntityXDR_Service">
    <port name="EntityXDR_Port" binding="tns:EntityXDR_Binding">
      <soap:address location="http://localhost:${HttpDefaultPort}/Gateway/DocumentSubmission/1_1/EntityService/EntityDocSubmissionUnsecured"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ebRS\rs.xsd</con:url><con:content><![CDATA[<!--$Header: /cvsroot/ebxmlrr/ebxmlrr-spec/misc/3.0/schema/rs.xsd,v 1.9 2005/01/31 22:33:54 farrukh_najmi Exp $-->
<schema targetNamespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:tns="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0">
  <annotation>
    <documentation xml:lang="en">The schema for OASIS ebXML Registry Services</documentation>
  </annotation>
  <!--Import the rim.xsd file with XML schema mappaing from RIM-->
  <import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" schemaLocation="rim.xsd"/>
  <complexType name="RegistryRequestType">
    <annotation>
      <documentation xml:lang="en">Base type for all ebXML Registry requests</documentation>
    </annotation>
    <sequence>
      <!--every request may be extended using Slots.-->
      <element maxOccurs="1" minOccurs="0" name="RequestSlotList" type="rim:SlotListType"/>
    </sequence>
    <attribute name="id" type="anyURI" use="optional"/>
    <!--Comment may be used by requestor to describe the request. Used in VersionInfo.comment-->
    <attribute name="comment" type="string" use="optional"/>
  </complexType>
  <element name="RegistryRequest" type="tns:RegistryRequestType"/>
  <element name="RegistryErrorList">
    <annotation>
      <documentation xml:lang="en">The RegistryErrorList is derived from the ErrorList element from the ebXML Message Service Specification</documentation>
    </annotation>
    <complexType>
      <sequence>
        <element maxOccurs="unbounded" ref="tns:RegistryError"/>
      </sequence>
      <attribute name="highestSeverity" type="rim:referenceURI" use="optional"/>
    </complexType>
  </element>
  <element name="RegistryError">
    <complexType>
      <simpleContent>
        <extension base="string">
          <attribute name="codeContext" type="string" use="required"/>
          <attribute name="errorCode" type="string" use="required"/>
          <attribute default="urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error" name="severity" type="rim:referenceURI"/>
          <attribute name="location" type="string" use="optional"/>
        </extension>
      </simpleContent>
    </complexType>
  </element>
  <complexType name="RegistryResponseType">
    <annotation>
      <documentation xml:lang="en">Base type for all ebXML Registry responses</documentation>
    </annotation>
    <sequence>
      <!--every response may be extended using Slots.-->
      <element maxOccurs="1" minOccurs="0" name="ResponseSlotList" type="rim:SlotListType"/>
      <element minOccurs="0" ref="tns:RegistryErrorList"/>
    </sequence>
    <attribute name="status" type="rim:referenceURI" use="required"/>
    <!--id is the request if for the request for which this is a response-->
    <attribute name="requestId" type="anyURI" use="optional"/>
  </complexType>
  <element name="RegistryResponse" type="tns:RegistryResponseType"/>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ebRS\rim.xsd</con:url><con:content><![CDATA[<!--$Header: /cvsroot/ebxmlrr/ebxmlrr-spec/misc/3.0/schema/rim.xsd,v 1.20 2005/02/03 19:28:15 farrukh_najmi Exp $-->
<schema targetNamespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
  <annotation>
    <documentation xml:lang="en">The schema for OASIS ebXML Registry Information Model</documentation>
  </annotation>
  <import namespace="http://www.w3.org/XML/1998/namespace" schemaLocation="../www.w3.org/2001/xml.xsd"/>
  <!--Begin information model mapping from ebRIM.-->
  <!--Define Data Types-->
  <simpleType name="referenceURI">
    <annotation>
      <documentation xml:lang="en">referenceURI is used by reference attributes within RIM.
        Each attribute of type referenceURI references a RegistryObject with
        specified URI as id.</documentation>
    </annotation>
    <restriction base="anyURI"/>
  </simpleType>
  <simpleType name="String4">
    <restriction base="string">
      <maxLength value="4"/>
    </restriction>
  </simpleType>
  <simpleType name="String8">
    <restriction base="string">
      <maxLength value="8"/>
    </restriction>
  </simpleType>
  <simpleType name="String16">
    <restriction base="string">
      <maxLength value="16"/>
    </restriction>
  </simpleType>
  <simpleType name="String32">
    <restriction base="string">
      <maxLength value="32"/>
    </restriction>
  </simpleType>
  <simpleType name="ShortName">
    <restriction base="string">
      <maxLength value="64"/>
    </restriction>
  </simpleType>
  <simpleType name="LongName">
    <restriction base="string">
      <maxLength value="256"/>
    </restriction>
  </simpleType>
  <simpleType name="FreeFormText">
    <restriction base="string">
      <maxLength value="1024"/>
    </restriction>
  </simpleType>
  <complexType name="InternationalStringType">
    <sequence maxOccurs="unbounded" minOccurs="0">
      <element ref="tns:LocalizedString"/>
    </sequence>
  </complexType>
  <element name="InternationalString" type="tns:InternationalStringType"/>
  <element name="Name" type="tns:InternationalStringType"/>
  <element name="Description" type="tns:InternationalStringType"/>
  <complexType name="LocalizedStringType">
    <attribute ref="xml:lang" default="en-US"/>
    <attribute default="UTF-8" name="charset"/>
    <attribute name="value" type="tns:FreeFormText" use="required"/>
  </complexType>
  <element name="LocalizedString" type="tns:LocalizedStringType"/>
  <complexType name="SlotType1">
    <sequence>
      <element maxOccurs="1" minOccurs="1" ref="tns:ValueList"/>
    </sequence>
    <attribute name="name" type="tns:LongName" use="required"/>
    <!--slotType value MUST reference a ClassificationNode in the canonical DataType scheme-->
    <attribute name="slotType" type="tns:referenceURI" use="optional"/>
  </complexType>
  <element name="Slot" type="tns:SlotType1"/>
  <complexType name="ValueListType">
    <sequence maxOccurs="unbounded" minOccurs="0">
      <element ref="tns:Value"/>
    </sequence>
  </complexType>
  <element name="ValueList" type="tns:ValueListType"/>
  <element name="Value" type="tns:LongName"/>
  <complexType name="SlotListType">
    <sequence>
      <element maxOccurs="unbounded" minOccurs="0" ref="tns:Slot"/>
    </sequence>
  </complexType>
  <element name="SlotList" type="tns:SlotListType"/>
  <complexType name="IdentifiableType">
    <annotation>
      <documentation xml:lang="en">Common base type for all types that have unique identity.     
        If id is provided and is not in proper URN syntax then it is used for
        linkage within document and is ignored by the registry. In this case the
        registry generates a UUID URN for id attribute.
        id must not be null when object is retrieved from the registry.</documentation>
    </annotation>
    <sequence>
      <element maxOccurs="unbounded" minOccurs="0" ref="tns:Slot"/>
    </sequence>
    <attribute name="id" type="anyURI" use="required"/>
    <!--home attribute is required only for remote ObjectRef-->
    <attribute name="home" type="anyURI" use="optional"/>
  </complexType>
  <element name="Identifiable" type="tns:IdentifiableType"/>
  <complexType name="ObjectRefType">
    <annotation>
      <documentation xml:lang="en">Use to reference an Object by its id.
        Specifies the id attribute of the object as its id attribute.
        id attribute in ObjectAttributes is exactly the same syntax and semantics as
        id attribute in RegistryObject.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:IdentifiableType">
        <!--When true and is a remote ObjectRef then the registry must create a replica for this ObjectRef-->
        <attribute default="false" name="createReplica" type="boolean"/>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="ObjectRefListType">
    <sequence maxOccurs="unbounded" minOccurs="0">
      <element ref="tns:ObjectRef"/>
    </sequence>
  </complexType>
  <element name="ObjectRefList" type="tns:ObjectRefListType"/>
  <element name="ObjectRef" type="tns:ObjectRefType" substitutionGroup="tns:Identifiable"/>
  <complexType name="RegistryObjectType">
    <complexContent>
      <extension base="tns:IdentifiableType">
        <sequence maxOccurs="1" minOccurs="0">
          <element maxOccurs="1" minOccurs="0" ref="tns:Name"/>
          <element maxOccurs="1" minOccurs="0" ref="tns:Description"/>
          <element maxOccurs="1" minOccurs="0" name="VersionInfo" type="tns:VersionInfoType"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:Classification"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ExternalIdentifier"/>
        </sequence>
        <attribute name="lid" type="anyURI" use="optional"/>
        <attribute name="objectType" type="tns:referenceURI" use="optional"/>
        <attribute name="status" type="tns:referenceURI" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="RegistryObject" type="tns:RegistryObjectType" substitutionGroup="tns:Identifiable"/>
  <complexType name="RegistryObjectListType">
    <sequence>
      <element maxOccurs="unbounded" minOccurs="0" ref="tns:Identifiable"/>
    </sequence>
  </complexType>
  <element name="RegistryObjectList" type="tns:RegistryObjectListType"/>
  <complexType name="AssociationType1">
    <annotation>
      <documentation xml:lang="en">Association is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.
        An Association specifies references to two previously submitted
        registry entrys.
        The sourceObject is id of the sourceObject in association
        The targetObject is id of the targetObject in association</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute name="associationType" type="tns:referenceURI" use="required"/>
        <attribute name="sourceObject" type="tns:referenceURI" use="required"/>
        <attribute name="targetObject" type="tns:referenceURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Association" type="tns:AssociationType1" substitutionGroup="tns:Identifiable"/>
  <complexType name="AuditableEventType">
    <annotation>
      <documentation xml:lang="en">An Event that forms an audit trail in ebXML Registry.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <!--List of all objects that have been effected by this event-->
          <element maxOccurs="1" minOccurs="1" name="affectedObjects" type="tns:ObjectRefListType"/>
        </sequence>
        <attribute name="eventType" type="tns:referenceURI" use="required"/>
        <attribute name="timestamp" type="dateTime" use="required"/>
        <attribute name="user" type="tns:referenceURI" use="required"/>
        <attribute name="requestId" type="tns:referenceURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="AuditableEvent" type="tns:AuditableEventType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ClassificationType">
    <annotation>
      <documentation xml:lang="en">Classification is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.
        A Classification specifies references to two registry entrys.
        The classifiedObject is id of the Object being classified.
        The classificationNode is id of the ClassificationNode classying the object</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute name="classificationScheme" type="tns:referenceURI" use="optional"/>
        <attribute name="classifiedObject" type="tns:referenceURI" use="required"/>
        <attribute name="classificationNode" type="tns:referenceURI" use="optional"/>
        <attribute name="nodeRepresentation" type="tns:LongName" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Classification" type="tns:ClassificationType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ClassificationNodeType">
    <annotation>
      <documentation xml:lang="en">ClassificationNode is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.
        ClassificationNode is used to submit a Classification tree to the Registry.
        The parent attribute is the id to the parent node. code is an optional code value for a ClassificationNode
        often defined by an external taxonomy (e.g. NAICS)</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ClassificationNode"/>
        </sequence>
        <attribute name="parent" type="tns:referenceURI" use="optional"/>
        <attribute name="code" type="tns:LongName" use="optional"/>
        <attribute name="path" type="string" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ClassificationNode" type="tns:ClassificationNodeType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ClassificationSchemeType">
    <annotation>
      <documentation xml:lang="en">ClassificationScheme is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ClassificationNode"/>
        </sequence>
        <attribute name="isInternal" type="boolean" use="required"/>
        <attribute name="nodeType" type="tns:referenceURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ClassificationScheme" type="tns:ClassificationSchemeType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ExternalIdentifierType">
    <annotation>
      <documentation xml:lang="en">ExternalIdentifier is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute name="registryObject" type="tns:referenceURI" use="required"/>
        <attribute name="identificationScheme" type="tns:referenceURI" use="required"/>
        <attribute name="value" type="tns:LongName" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ExternalIdentifier" type="tns:ExternalIdentifierType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ExternalLinkType">
    <annotation>
      <documentation xml:lang="en">ExternalLink is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute name="externalURI" type="anyURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ExternalLink" type="tns:ExternalLinkType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ExtrinsicObjectType">
    <annotation>
      <documentation xml:lang="en">ExtrinsicObject is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="ContentVersionInfo" type="tns:VersionInfoType"/>
        </sequence>
        <attribute default="application/octet-stream" name="mimeType" type="tns:LongName"/>
        <attribute default="false" name="isOpaque" type="boolean"/>
      </extension>
    </complexContent>
  </complexType>
  <!--Following element decl nneds to be lower case but using upper camel case for backward compatibility-->
  <element name="ExtrinsicObject" type="tns:ExtrinsicObjectType" substitutionGroup="tns:Identifiable"/>
  <element name="Address" type="tns:PostalAddressType"/>
  <complexType name="OrganizationType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:Address"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:TelephoneNumber"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:EmailAddress"/>
        </sequence>
        <attribute name="parent" type="tns:referenceURI"/>
        <attribute name="primaryContact" type="tns:referenceURI" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Organization" type="tns:OrganizationType" substitutionGroup="tns:Identifiable"/>
  <complexType name="PersonNameType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <attribute name="firstName" type="tns:ShortName" use="optional"/>
    <attribute name="middleName" type="tns:ShortName" use="optional"/>
    <attribute name="lastName" type="tns:ShortName" use="optional"/>
  </complexType>
  <element name="PersonName" type="tns:PersonNameType"/>
  <complexType name="EmailAddressType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <attribute name="address" type="tns:ShortName" use="required"/>
    <attribute name="type" type="tns:String32" use="optional"/>
  </complexType>
  <element name="EmailAddress" type="tns:EmailAddressType"/>
  <complexType name="PostalAddressType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <attribute name="city" type="tns:ShortName" use="optional"/>
    <attribute name="country" type="tns:ShortName" use="optional"/>
    <attribute name="postalCode" type="tns:ShortName" use="optional"/>
    <attribute name="stateOrProvince" type="tns:ShortName" use="optional"/>
    <attribute name="street" type="tns:ShortName" use="optional"/>
    <attribute name="streetNumber" type="tns:String32" use="optional"/>
  </complexType>
  <element name="PostalAddress" type="tns:PostalAddressType"/>
  <complexType name="VersionInfoType">
    <attribute name="versionName" type="tns:String16" use="optional" default="1.1"/>
    <attribute name="comment" type="string" use="optional"/>
  </complexType>
  <complexType name="RegistryPackageType">
    <annotation>
      <documentation xml:lang="en">RegistryPackage is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.
        A RegistryPackage is a named collection of objects.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:RegistryObjectList"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="RegistryPackage" type="tns:RegistryPackageType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ServiceType">
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ServiceBinding"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="Service" type="tns:ServiceType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ServiceBindingType">
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:SpecificationLink"/>
        </sequence>
        <attribute name="service" type="tns:referenceURI" use="required"/>
        <attribute name="accessURI" type="anyURI" use="optional"/>
        <attribute name="targetBinding" type="tns:referenceURI" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ServiceBinding" type="tns:ServiceBindingType" substitutionGroup="tns:Identifiable"/>
  <complexType name="SpecificationLinkType">
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:UsageDescription"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:UsageParameter"/>
        </sequence>
        <attribute name="serviceBinding" type="tns:referenceURI" use="required"/>
        <attribute name="specificationObject" type="tns:referenceURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="SpecificationLink" type="tns:SpecificationLinkType" substitutionGroup="tns:Identifiable"/>
  <element name="UsageDescription" type="tns:InternationalStringType"/>
  <element name="UsageParameter" type="tns:FreeFormText"/>
  <complexType name="TelephoneNumberType">
    <annotation>
      <documentation xml:lang="en">TelephoneNumber is the mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <attribute name="areaCode" type="tns:String8" use="optional"/>
    <attribute name="countryCode" type="tns:String8" use="optional"/>
    <attribute name="extension" type="tns:String8" use="optional"/>
    <attribute name="number" type="tns:String16" use="optional"/>
    <attribute name="phoneType" type="tns:String32" use="optional"/>
  </complexType>
  <element name="TelephoneNumber" type="tns:TelephoneNumberType"/>
  <complexType name="TelephoneNumberListType">
    <sequence>
      <element maxOccurs="unbounded" minOccurs="0" ref="tns:TelephoneNumber"/>
    </sequence>
  </complexType>
  <complexType name="PersonType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence maxOccurs="1" minOccurs="1">
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:Address"/>
          <!--PersonName is optional because it is not needed in SAML Profile 
          when an external IdentityProvider is used.-->
          <element maxOccurs="1" minOccurs="0" ref="tns:PersonName"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:TelephoneNumber"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:EmailAddress"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="Person" type="tns:PersonType" substitutionGroup="tns:Identifiable"/>
  <complexType name="UserType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:PersonType"></extension>
    </complexContent>
  </complexType>
  <element name="User" type="tns:UserType" substitutionGroup="tns:Identifiable"/>
  <complexType name="RegistryType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute name="operator" type="tns:referenceURI" use="required"/>
        <attribute name="specificationVersion" type="string" use="required"/>
        <attribute default="P1D" name="replicationSyncLatency" type="duration" use="optional"/>
        <attribute default="P1D" name="catalogingLatency" type="duration" use="optional"/>
        <attribute name="conformanceProfile" use="optional" default="registryLite">
          <simpleType>
            <restriction base="NCName">
              <enumeration value="registryFull"/>
              <enumeration value="registryLite"/>
            </restriction>
          </simpleType>
        </attribute>
      </extension>
    </complexContent>
  </complexType>
  <element name="Registry" type="tns:RegistryType" substitutionGroup="tns:Identifiable"/>
  <complexType name="FederationType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute default="P1D" name="replicationSyncLatency" type="duration" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Federation" type="tns:FederationType" substitutionGroup="tns:Identifiable"/>
  <complexType name="AdhocQueryType">
    <annotation>
      <documentation xml:lang="en">A registry query.
      A QueryExpression child element is not required when invoking a stored query.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element ref="tns:QueryExpression" minOccurs="0" maxOccurs="1"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="AdhocQuery" type="tns:AdhocQueryType" substitutionGroup="tns:RegistryObject"/>
  <complexType name="QueryExpressionType" mixed="true">
    <sequence>
      <!--MAY be any query language syntax supported. 
      MUST support FilterQuery. SHOULD support SQLQuery-->
      <any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="1"/>
    </sequence>
    <attribute name="queryLanguage" type="tns:referenceURI" use="required"/>
  </complexType>
  <element name="QueryExpression" type="tns:QueryExpressionType"/>
  <complexType name="NotificationType">
    <annotation>
      <documentation>Notification of registry events.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <!--May contain ObjectRefs and RegistryObjects-->
          <element maxOccurs="1" minOccurs="1" ref="tns:RegistryObjectList"/>
        </sequence>
        <attribute name="subscription" type="tns:referenceURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Notification" type="tns:NotificationType"/>
  <element name="Action" type="tns:ActionType"/>
  <complexType name="SubscriptionType">
    <annotation>
      <documentation xml:lang="en">A Subscription for specified Events in an ebXML V3+ registry.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element ref="tns:Action" minOccurs="0" maxOccurs="unbounded"/>
        </sequence>
        <!--Ref to a AdhocQueryType instance-->
        <attribute name="selector" type="tns:referenceURI" use="required"/>
        <attribute name="startTime" type="dateTime" use="optional"/>
        <attribute name="endTime" type="dateTime" use="optional"/>
        <attribute name="notificationInterval" type="duration" use="optional" default="P1D"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Subscription" type="tns:SubscriptionType" substitutionGroup="tns:Identifiable"/>
  <complexType abstract="true" name="ActionType">
    <annotation>
      <documentation>Abstract Base type for all types of Actions.</documentation>
    </annotation>
  </complexType>
  <complexType name="NotifyActionType">
    <annotation>
      <documentation xml:lang="en">Abstract Base type for all types of Notify Actions</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:ActionType">
        <attribute default="urn:oasis:names:tc:ebxml-regrep:NotificationOptionType:ObjectRefs" type="tns:referenceURI" name="notificationOption"/>
        <attribute name="endPoint" type="anyURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="NotifyAction" type="tns:NotifyActionType" substitutionGroup="tns:Action"/>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\www.w3.org\2001\xml.xsd</con:url><con:content><![CDATA[<?xml-stylesheet href="../2008/09/xsd.xsl" type="text/xsl"?>
<xs:schema targetNamespace="http://www.w3.org/XML/1998/namespace" xml:lang="en" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/1999/xhtml">
  <xs:annotation>
    <xs:documentation>
      <div>
        <h1>About the XML namespace</h1>
        <div class="bodytext">
          <p>This schema document describes the XML namespace, in a form
      suitable for import by other schema documents.</p>
          <p>
            See
            <a href="http://www.w3.org/XML/1998/namespace.html">http://www.w3.org/XML/1998/namespace.html</a>
            and
            <a href="http://www.w3.org/TR/REC-xml">http://www.w3.org/TR/REC-xml</a>
            for information 
      about this namespace.
          </p>
          <p>Note that local names in this namespace are intended to be
      defined only by the World Wide Web Consortium or its subgroups.
      The names currently defined in this namespace are listed below.
      They should not be used with conflicting semantics by any Working
      Group, specification, or document instance.</p>
          <p>
            See further below in this document for more information about
            <a href="#usage">how to refer to this schema document from your own
      XSD schema documents</a>
            and about
            <a href="#nsversioning">the
      namespace-versioning policy governing this schema document</a>
            .
          </p>
        </div>
      </div>
    </xs:documentation>
  </xs:annotation>
  <xs:attribute name="lang">
    <xs:annotation>
      <xs:documentation>
        <div>
          <h3>lang (as an attribute name)</h3>
          <p>denotes an attribute whose value
       is a language code for the natural language of the content of
       any element; its value is inherited.  This name is reserved
       by virtue of its definition in the XML specification.</p>
        </div>
        <div>
          <h4>Notes</h4>
          <p>Attempting to install the relevant ISO 2- and 3-letter
      codes as the enumerated possible values is probably never
      going to be a realistic possibility.</p>
          <p>
            See BCP 47 at
            <a href="http://www.rfc-editor.org/rfc/bcp/bcp47.txt">http://www.rfc-editor.org/rfc/bcp/bcp47.txt</a>
            and the IANA language subtag registry at
            <a href="http://www.iana.org/assignments/language-subtag-registry">http://www.iana.org/assignments/language-subtag-registry</a>
            for further information.
          </p>
          <p>The union allows for the 'un-declaration' of xml:lang with
      the empty string.</p>
        </div>
      </xs:documentation>
    </xs:annotation>
    <xs:simpleType>
      <xs:union memberTypes="xs:language">
        <xs:simpleType>
          <xs:restriction base="xs:string">
            <xs:enumeration value=""/>
          </xs:restriction>
        </xs:simpleType>
      </xs:union>
    </xs:simpleType>
  </xs:attribute>
  <xs:attribute name="space">
    <xs:annotation>
      <xs:documentation>
        <div>
          <h3>space (as an attribute name)</h3>
          <p>denotes an attribute whose
       value is a keyword indicating what whitespace processing
       discipline is intended for the content of the element; its
       value is inherited.  This name is reserved by virtue of its
       definition in the XML specification.</p>
        </div>
      </xs:documentation>
    </xs:annotation>
    <xs:simpleType>
      <xs:restriction base="xs:NCName">
        <xs:enumeration value="default"/>
        <xs:enumeration value="preserve"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:attribute>
  <xs:attribute name="base" type="xs:anyURI">
    <xs:annotation>
      <xs:documentation>
        <div>
          <h3>base (as an attribute name)</h3>
          <p>denotes an attribute whose value
       provides a URI to be used as the base for interpreting any
       relative URIs in the scope of the element on which it
       appears; its value is inherited.  This name is reserved
       by virtue of its definition in the XML Base specification.</p>
          <p>
            See
            <a href="http://www.w3.org/TR/xmlbase/">http://www.w3.org/TR/xmlbase/</a>
            for information about this attribute.
          </p>
        </div>
      </xs:documentation>
    </xs:annotation>
  </xs:attribute>
  <xs:attribute name="id" type="xs:ID">
    <xs:annotation>
      <xs:documentation>
        <div>
          <h3>id (as an attribute name)</h3>
          <p>denotes an attribute whose value
       should be interpreted as if declared to be of type ID.
       This name is reserved by virtue of its definition in the
       xml:id specification.</p>
          <p>
            See
            <a href="http://www.w3.org/TR/xml-id/">http://www.w3.org/TR/xml-id/</a>
            for information about this attribute.
          </p>
        </div>
      </xs:documentation>
    </xs:annotation>
  </xs:attribute>
  <xs:attributeGroup name="specialAttrs">
    <xs:attribute ref="xml:base"/>
    <xs:attribute ref="xml:lang"/>
    <xs:attribute ref="xml:space"/>
    <xs:attribute ref="xml:id"/>
  </xs:attributeGroup>
  <xs:annotation>
    <xs:documentation>
      <div>
        <h3>Father (in any context at all)</h3>
        <div class="bodytext">
          <p>denotes Jon Bosak, the chair of 
      the original XML Working Group.  This name is reserved by 
      the following decision of the W3C XML Plenary and 
      XML Coordination groups:</p>
          <blockquote>
            <p>In appreciation for his vision, leadership and
    dedication the W3C XML Plenary on this 10th day of
    February, 2000, reserves for Jon Bosak in perpetuity
    the XML name "xml:Father".</p>
          </blockquote>
        </div>
      </div>
    </xs:documentation>
  </xs:annotation>
  <xs:annotation>
    <xs:documentation>
      <div xml:id="usage" id="usage">
        <h2>
          <a name="usage">About this schema document</a>
        </h2>
        <div class="bodytext">
          <p>
            This schema defines attributes and an attribute group suitable
      for use by schemas wishing to allow
            <code>xml:base</code>
            ,
            <code>xml:lang</code>
            ,
            <code>xml:space</code>
            or
            <code>xml:id</code>
            attributes on elements they define.
          </p>
          <p>To enable this, such a schema must import this schema for
      the XML namespace, e.g. as follows:</p>
          <pre>&lt;schema . . .>
           . . .
           &lt;import namespace="http://www.w3.org/XML/1998/namespace"
                      schemaLocation="http://www.w3.org/2001/xml.xsd"/></pre>
          <p>or</p>
          <pre>&lt;import namespace="http://www.w3.org/XML/1998/namespace"
                      schemaLocation="http://www.w3.org/2009/01/xml.xsd"/></pre>
          <p>Subsequently, qualified reference to any of the attributes or the
      group defined below will have the desired effect, e.g.</p>
          <pre>&lt;type . . .>
           . . .
           &lt;attributeGroup ref="xml:specialAttrs"/></pre>
          <p>will define a type which will schema-validate an instance element
      with any of those attributes.</p>
        </div>
      </div>
    </xs:documentation>
  </xs:annotation>
  <xs:annotation>
    <xs:documentation>
      <div id="nsversioning" xml:id="nsversioning">
        <h2>
          <a name="nsversioning">Versioning policy for this schema document</a>
        </h2>
        <div class="bodytext">
          <p>
            In keeping with the XML Schema WG's standard versioning
      policy, this schema document will persist at
            <a href="http://www.w3.org/2009/01/xml.xsd">http://www.w3.org/2009/01/xml.xsd</a>
            .
          </p>
          <p>
            At the date of issue it can also be found at
            <a href="http://www.w3.org/2001/xml.xsd">http://www.w3.org/2001/xml.xsd</a>
            .
          </p>
          <p>
            The schema document at that URI may however change in the future,
      in order to remain compatible with the latest version of XML
      Schema itself, or with the XML namespace itself.  In other words,
      if the XML Schema or XML namespaces change, the version of this
      document at
            <a href="http://www.w3.org/2001/xml.xsd">http://www.w3.org/2001/xml.xsd</a>
            will change accordingly; the version at
            <a href="http://www.w3.org/2009/01/xml.xsd">http://www.w3.org/2009/01/xml.xsd</a>
            will not change.
          </p>
          <p>Previous dated (and unchanging) versions of this schema 
      document are at:</p>
          <ul>
            <li>
              <a href="http://www.w3.org/2009/01/xml.xsd">http://www.w3.org/2009/01/xml.xsd</a>
            </li>
            <li>
              <a href="http://www.w3.org/2007/08/xml.xsd">http://www.w3.org/2007/08/xml.xsd</a>
            </li>
            <li>
              <a href="http://www.w3.org/2004/10/xml.xsd">http://www.w3.org/2004/10/xml.xsd</a>
            </li>
            <li>
              <a href="http://www.w3.org/2001/03/xml.xsd">http://www.w3.org/2001/03/xml.xsd</a>
            </li>
          </ul>
        </div>
      </div>
    </xs:documentation>
  </xs:annotation>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ihe\XDS.b_DocumentRepository.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="urn:ihe:iti:xds-b:2007" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns="urn:ihe:iti:xds-b:2007" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
  <xs:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="../ebRS/rs.xsd"/>
  <xs:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" schemaLocation="../ebRS/rim.xsd"/>
  <xs:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" schemaLocation="../ebRS/lcm.xsd"/>
  <xs:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" schemaLocation="../ebRS/query.xsd"/>
  <xs:complexType name="RetrieveDocumentSetRequestType">
    <xs:sequence>
      <xs:element name="DocumentRequest" maxOccurs="unbounded">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="HomeCommunityId" type="rim:LongName" minOccurs="0">
              <xs:annotation>
                <xs:documentation>This corresponds to the home attribute of the Identifiable class in regrep RIM (regrep-rim-3.0-os.pdf, page 20)</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="RepositoryUniqueId" type="rim:LongName">
              <xs:annotation>
                <xs:documentation>This is the XDSDocumentEntry.repositoryUniqueId attribute in the XDS metadata</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="DocumentUniqueId" type="rim:LongName">
              <xs:annotation>
                <xs:documentation>This is the XDSDocumentEntry.uniqueId attribute in the XDS metadata</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="RetrieveDocumentSetResponseType">
    <xs:sequence>
      <xs:element ref="rs:RegistryResponse"/>
      <xs:sequence minOccurs="0">
        <xs:element name="DocumentResponse" maxOccurs="unbounded">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="HomeCommunityId" type="rim:LongName" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>This corresponds to the home attribute of the Identifiable class in regrep RIM (regrep-rim-3.0-os.pdf, page 20)</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="RepositoryUniqueId" type="rim:LongName">
                <xs:annotation>
                  <xs:documentation>This is the XDSDocumentEntry.repositoryUniqueId attribute in the XDS metadata</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="DocumentUniqueId" type="rim:LongName">
                <xs:annotation>
                  <xs:documentation>This is the XDSDocumentEntry.uniqueId attribute in the XDS metadata</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="NewRepositoryUniqueId" type="rim:LongName" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>This identifies the Document Repository that will support retrieval of the document created as a result of retrieval of the On-Demand Document.  This is required when the On-Demand Document Source supports the Persistence of Retrieved Documents Option.</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="NewDocumentUniqueId" type="rim:LongName" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>This identifies the document returned in the response when retrieval is of an On-Demand Document.  This is required when retrieval is of an On-Demand Document.</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="mimeType" type="rim:LongName"/>
              <xs:element name="Document" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="RetrieveDocumentSetRequest" type="RetrieveDocumentSetRequestType"/>
  <xs:element name="RetrieveDocumentSetResponse" type="RetrieveDocumentSetResponseType"/>
  <xs:complexType name="ProvideAndRegisterDocumentSetRequestType">
    <xs:sequence>
      <xs:element ref="lcm:SubmitObjectsRequest"/>
      <xs:sequence minOccurs="0">
        <xs:element name="Document" maxOccurs="unbounded">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream">
                <xs:attribute name="id" type="xs:anyURI" use="required">
                  <xs:annotation>
                    <xs:documentation>This corresponds to the ExtrinsicObject id in the eb RIM metadata a provides a linkage between the actual document data and its metadata</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ProvideAndRegisterDocumentSetRequest" type="ProvideAndRegisterDocumentSetRequestType"/>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ebRS\lcm.xsd</con:url><con:content><![CDATA[<!--$Header: /cvsroot/ebxmlrr/ebxmlrr-spec/misc/3.0/schema/lcm.xsd,v 1.5 2005/01/31 22:28:18 farrukh_najmi Exp $-->
<schema targetNamespace="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:tns="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
  <annotation>
    <documentation xml:lang="en">The schema for OASIS ebXML Registry Services</documentation>
  </annotation>
  <!--Import the rim.xsd file with XML schema mappaing from RIM-->
  <import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" schemaLocation="rim.xsd"/>
  <!--Import the rs.xsd file with XML schema for base rs related schema-->
  <import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="rs.xsd"/>
  <element name="SubmitObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The SubmitObjectsRequest allows one to submit a list of RegistryObject elements. Each RegistryEntry element provides metadata for a single submitted object.  Note that the repository item being submitted is in a separate document that is not in this DTD. The ebXML Messaging Services Specfication defines packaging, for submission, of the metadata of a repository item with the repository item itself. The value of the id attribute of the ExtrinsicObject element must be the same as the xlink:href attribute within the Reference element within the Manifest element of the MessageHeader.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:RegistryObjectList"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="UpdateObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The UpdateObjectsRequest allows one to update a list of RegistryObject elements. Each RegistryEntry element provides metadata for a single submitted object.  Note that the repository item being submitted is in a separate document that is not in this DTD. The ebXML Messaging Services Specfication defines packaging, for submission, of the metadata of a repository item with the repository item itself. The value of the id attribute of the ExtrinsicObject element must be the same as the xlink:href attribute within the Reference element within the Manifest element of the MessageHeader.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:RegistryObjectList"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="ApproveObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The ObjectRefList and AdhocQuery identify the list of
        objects being approved.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:AdhocQuery" minOccurs="0" maxOccurs="1"/>
            <element ref="rim:ObjectRefList" minOccurs="0" maxOccurs="1"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="DeprecateObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The ObjectRefList and AdhocQuery identify the list of
        objects being deprecated.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:AdhocQuery" minOccurs="0" maxOccurs="1"/>
            <element ref="rim:ObjectRefList" minOccurs="0" maxOccurs="1"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="UndeprecateObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The ObjectRefList is the list of
        refs to the registry entrys being un-deprecated.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:AdhocQuery" minOccurs="0" maxOccurs="1"/>
            <element ref="rim:ObjectRefList" minOccurs="0" maxOccurs="1"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="RemoveObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The ObjectRefList is the list of
        refs to the registry entrys being removed</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:AdhocQuery" minOccurs="0" maxOccurs="1"/>
            <element ref="rim:ObjectRefList" minOccurs="0" maxOccurs="1"/>
          </sequence>
          <attribute name="deletionScope" default="urn:oasis:names:tc:ebxml-regrep:DeletionScopeType:DeleteAll" type="rim:referenceURI" use="optional"/>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="RelocateObjectsRequest">
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element maxOccurs="1" minOccurs="1" ref="rim:AdhocQuery"/>
            <element maxOccurs="1" minOccurs="1" name="SourceRegistry" type="rim:ObjectRefType"/>
            <element maxOccurs="1" minOccurs="1" name="DestinationRegistry" type="rim:ObjectRefType"/>
            <element maxOccurs="1" minOccurs="1" name="OwnerAtSource" type="rim:ObjectRefType"/>
            <element maxOccurs="1" minOccurs="1" name="OwnerAtDestination" type="rim:ObjectRefType"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="AcceptObjectsRequest">
    <!--The ObjectRefList must only contain local ObjectRefs such that they do not specify home attribute-->
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <attribute name="correlationId" type="anyURI" use="required"/>
        </extension>
      </complexContent>
    </complexType>
  </element>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ebRS\query.xsd</con:url><con:content><![CDATA[<!--$Header: /cvsroot/ebxmlrr/ebxmlrr-spec/misc/3.0/schema/query.xsd,v 1.13 2005/03/29 08:52:10 farrukh_najmi Exp $-->
<schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:tns="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
  <!--Import the rim.xsd file with XML schema mappaing from RIM-->
  <import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" schemaLocation="rim.xsd"/>
  <import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="rs.xsd"/>
  <complexType name="ResponseOptionType">
    <attribute default="RegistryObject" name="returnType">
      <simpleType>
        <restriction base="NCName">
          <enumeration value="ObjectRef"/>
          <enumeration value="RegistryObject"/>
          <enumeration value="LeafClass"/>
          <enumeration value="LeafClassWithRepositoryItem"/>
        </restriction>
      </simpleType>
    </attribute>
    <attribute default="false" name="returnComposedObjects" type="boolean"/>
  </complexType>
  <element name="ResponseOption" type="tns:ResponseOptionType"/>
  <element name="AdhocQueryRequest">
    <annotation>
      <documentation xml:lang="en">An Ad hoc query request specifies an ad hoc query.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element maxOccurs="1" minOccurs="1" ref="tns:ResponseOption"/>
            <element ref="rim:AdhocQuery"/>
          </sequence>
          <attribute default="false" name="federated" type="boolean" use="optional"/>
          <attribute name="federation" type="anyURI" use="optional"/>
          <attribute default="0" name="startIndex" type="integer"/>
          <attribute default="-1" name="maxResults" type="integer"/>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="AdhocQueryResponse">
    <annotation>
      <documentation xml:lang="en">The response includes a RegistryObjectList which has zero or more
        RegistryObjects that match the query specified in AdhocQueryRequest.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryResponseType">
          <sequence>
            <element ref="rim:RegistryObjectList"/>
          </sequence>
          <attribute default="0" name="startIndex" type="integer"/>
          <attribute name="totalResultCount" type="integer" use="optional"/>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <complexType name="FilterQueryType" abstract="true">
    <sequence>
      <element maxOccurs="1" minOccurs="0" name="PrimaryFilter" type="tns:FilterType"/>
    </sequence>
  </complexType>
  <complexType name="BranchType" abstract="true">
    <complexContent>
      <extension base="tns:FilterQueryType"></extension>
    </complexContent>
  </complexType>
  <complexType name="InternationalStringBranchType">
    <complexContent>
      <extension base="tns:BranchType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="LocalizedStringFilter" type="tns:FilterType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="SlotBranchType">
    <complexContent>
      <extension base="tns:BranchType">
        <sequence/>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="RegistryObjectQueryType">
    <complexContent>
      <extension base="tns:FilterQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="SlotBranch" type="tns:SlotBranchType"/>
          <element maxOccurs="1" minOccurs="0" name="NameBranch" type="tns:InternationalStringBranchType"/>
          <element maxOccurs="1" minOccurs="0" name="DescriptionBranch" type="tns:InternationalStringBranchType"/>
          <element maxOccurs="1" minOccurs="0" name="VersionInfoFilter" type="tns:FilterType"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ClassificationQuery"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ExternalIdentifierQuery"/>
          <element maxOccurs="1" minOccurs="0" name="ObjectTypeQuery" type="tns:ClassificationNodeQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="StatusQuery" type="tns:ClassificationNodeQueryType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="SourceAssociationQuery" type="tns:AssociationQueryType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="TargetAssociationQuery" type="tns:AssociationQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="RegistryObjectQuery" type="tns:RegistryObjectQueryType"/>
  <complexType name="AssociationQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="AssociationTypeQuery" type="tns:ClassificationNodeQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="SourceObjectQuery" type="tns:RegistryObjectQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="TargetObjectQuery" type="tns:RegistryObjectQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="AssociationQuery" type="tns:AssociationQueryType"/>
  <complexType name="AuditableEventQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="AffectedObjectQuery" type="tns:RegistryObjectQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="EventTypeQuery" type="tns:ClassificationNodeQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="UserQuery" type="tns:UserQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="AuditableEventQuery" type="tns:AuditableEventQueryType"/>
  <complexType name="ClassificationQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:ClassificationSchemeQuery"/>
          <element maxOccurs="1" minOccurs="0" name="ClassifiedObjectQuery" type="tns:RegistryObjectQueryType"/>
          <element maxOccurs="1" minOccurs="0" ref="tns:ClassificationNodeQuery"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ClassificationQuery" type="tns:ClassificationQueryType"/>
  <complexType name="ClassificationNodeQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="ParentQuery" type="tns:RegistryObjectQueryType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="ChildrenQuery" type="tns:ClassificationNodeQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ClassificationNodeQuery" type="tns:ClassificationNodeQueryType"/>
  <complexType name="ClassificationSchemeQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="ChildrenQuery" type="tns:ClassificationNodeQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="NodeTypeQuery" type="tns:ClassificationNodeQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ClassificationSchemeQuery" type="tns:ClassificationSchemeQueryType"/>
  <complexType name="ExternalIdentifierQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:RegistryObjectQuery"/>
          <element maxOccurs="1" minOccurs="0" name="IdentificationSchemeQuery" type="tns:ClassificationSchemeQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ExternalIdentifierQuery" type="tns:ExternalIdentifierQueryType"/>
  <complexType name="ExternalLinkQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ExternalLinkQuery" type="tns:ExternalLinkQueryType"/>
  <complexType name="ExtrinsicObjectQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="ContentVersionInfoFilter" type="tns:FilterType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ExtrinsicObjectQuery" type="tns:ExtrinsicObjectQueryType"/>
  <complexType name="OrganizationQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="AddressFilter" type="tns:FilterType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="TelephoneNumberFilter" type="tns:FilterType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="EmailAddressFilter" type="tns:FilterType"/>
          <element maxOccurs="1" minOccurs="0" name="ParentQuery" type="tns:OrganizationQueryType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="ChildOrganizationQuery" type="tns:OrganizationQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="PrimaryContactQuery" type="tns:PersonQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="OrganizationQuery" type="tns:OrganizationQueryType"/>
  <complexType name="RegistryPackageQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType"></extension>
    </complexContent>
  </complexType>
  <element name="RegistryPackageQuery" type="tns:RegistryPackageQueryType"/>
  <complexType name="ServiceQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ServiceBindingQuery"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ServiceQuery" type="tns:ServiceQueryType"/>
  <complexType name="ServiceBindingQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:ServiceQuery"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:SpecificationLinkQuery"/>
          <element maxOccurs="1" minOccurs="0" name="TargetBindingQuery" type="tns:ServiceBindingQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ServiceBindingQuery" type="tns:ServiceBindingQueryType"/>
  <complexType name="SpecificationLinkQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="UsageDescriptionBranch" type="tns:InternationalStringBranchType"/>
          <element maxOccurs="1" minOccurs="0" ref="tns:ServiceBindingQuery"/>
          <element maxOccurs="1" minOccurs="0" name="SpecificationObjectQuery" type="tns:RegistryObjectQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="SpecificationLinkQuery" type="tns:SpecificationLinkQueryType"/>
  <complexType name="PersonQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="AddressFilter" type="tns:FilterType"/>
          <element maxOccurs="1" minOccurs="0" name="PersonNameFilter" type="tns:FilterType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="TelephoneNumberFilter" type="tns:FilterType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="EmailAddressFilter" type="tns:FilterType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="PersonQuery" type="tns:PersonQueryType"/>
  <complexType name="UserQueryType">
    <complexContent>
      <extension base="tns:PersonQueryType">
        <sequence/>
      </extension>
    </complexContent>
  </complexType>
  <element name="UserQuery" type="tns:UserQueryType"/>
  <complexType name="RegistryQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="OperatorQuery" type="tns:OrganizationQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="RegistryQuery" type="tns:RegistryQueryType"/>
  <complexType name="FederationQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence/>
      </extension>
    </complexContent>
  </complexType>
  <element name="FederationQuery" type="tns:FederationQueryType"/>
  <complexType name="AdhocQueryQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="QueryExpressionBranch" type="tns:QueryExpressionBranchType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="AdhocQueryQuery" type="tns:AdhocQueryQueryType"/>
  <complexType name="QueryExpressionBranchType">
    <complexContent>
      <extension base="tns:BranchType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="QueryLanguageQuery" type="tns:ClassificationNodeQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="NotificationQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:RegistryObjectQuery"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="NotificationQuery" type="tns:NotificationQueryType"/>
  <complexType name="SubscriptionQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="SelectorQuery" type="tns:AdhocQueryQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="SubscriptionQuery" type="tns:SubscriptionQueryType"/>
  <!--The Filter type hierarchy-->
  <complexType name="FilterType">
    <attribute default="false" name="negate" type="boolean"/>
  </complexType>
  <element abstract="true" name="Filter" type="tns:FilterType"/>
  <complexType name="CompoundFilterType">
    <complexContent>
      <extension base="tns:FilterType">
        <sequence>
          <element maxOccurs="1" minOccurs="1" name="LeftFilter" type="tns:FilterType"/>
          <element maxOccurs="1" minOccurs="1" name="RightFilter" type="tns:FilterType"/>
        </sequence>
        <attribute name="logicalOperator" use="required">
          <simpleType>
            <restriction base="NCName">
              <enumeration value="AND"/>
              <enumeration value="OR"/>
            </restriction>
          </simpleType>
        </attribute>
      </extension>
    </complexContent>
  </complexType>
  <element name="CompoundFilter" type="tns:CompoundFilterType"/>
  <complexType name="SimpleFilterType" abstract="true">
    <complexContent>
      <extension base="tns:FilterType">
        <attribute name="domainAttribute" type="string" use="required"/>
        <attribute name="comparator" use="required">
          <simpleType>
            <restriction base="NCName">
              <enumeration value="LE"/>
              <enumeration value="LT"/>
              <enumeration value="GE"/>
              <enumeration value="GT"/>
              <enumeration value="EQ"/>
              <enumeration value="NE"/>
              <enumeration value="Like"/>
              <enumeration value="NotLike"/>
            </restriction>
          </simpleType>
        </attribute>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="BooleanFilterType">
    <complexContent>
      <extension base="tns:SimpleFilterType">
        <attribute name="value" type="boolean" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="BooleanFilter" type="tns:BooleanFilterType"/>
  <complexType name="IntegerFilterType">
    <complexContent>
      <extension base="tns:SimpleFilterType">
        <attribute name="value" type="integer" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="IntegerFilter" type="tns:IntegerFilterType"/>
  <complexType name="FloatFilterType">
    <complexContent>
      <extension base="tns:SimpleFilterType">
        <attribute name="value" type="float" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="FloatFilter" type="tns:FloatFilterType"/>
  <complexType name="DateTimeFilterType">
    <complexContent>
      <extension base="tns:SimpleFilterType">
        <attribute name="value" type="dateTime" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="DateTimeFilter" type="tns:DateTimeFilterType"/>
  <complexType name="StringFilterType">
    <complexContent>
      <extension base="tns:SimpleFilterType">
        <attribute name="value" type="string" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="StringFilter" type="tns:StringFilterType"/>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\gateway\SamlTokenData.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:gateway:samltokendata" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:gateway:samltokendata">
  <xsd:complexType name="SamlTokenDataType">
    <xsd:sequence>
      <xsd:element name="action" type="xsd:string"></xsd:element>
      <xsd:element name="resource" type="xsd:string"></xsd:element>
      <xsd:element name="purposeOfUseRoleCode" type="xsd:string"></xsd:element>
      <xsd:element name="purposeOfUseCodeSystem" type="xsd:string"></xsd:element>
      <xsd:element name="purposeOfUseCodeSystemName" type="xsd:string"></xsd:element>
      <xsd:element name="purposeOfUseDisplayName" type="xsd:string"></xsd:element>
      <xsd:element name="userFirstName" type="xsd:string"></xsd:element>
      <xsd:element name="userMiddleName" type="xsd:string"></xsd:element>
      <xsd:element name="userLastName" type="xsd:string"></xsd:element>
      <xsd:element name="userName" type="xsd:string"></xsd:element>
      <xsd:element name="userOrganization" type="xsd:string"></xsd:element>
      <xsd:element name="userRoleCode" type="xsd:string"></xsd:element>
      <xsd:element name="userRoleCodeSystem" type="xsd:string"></xsd:element>
      <xsd:element name="userRoleCodeSystemName" type="xsd:string"></xsd:element>
      <xsd:element name="userRoleCodeDisplayName" type="xsd:string"></xsd:element>
      <xsd:element name="expirationDate" type="xsd:string"></xsd:element>
      <xsd:element name="signDate" type="xsd:string"></xsd:element>
      <xsd:element name="contentReference" type="xsd:string"></xsd:element>
      <xsd:element name="content" type="xsd:base64Binary"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlTokenData" type="tns:SamlTokenDataType"/>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\NhincCommonEntity.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:hl7="urn:hl7-org:v3" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ihe="urn:ihe:iti:xds-b:2007" xmlns:iheaudit="http://nhinc.services.com/schema/auditmessage" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:x12="http://www.caqh.org/SOAP/WSDL/CORERule2.2.0.xsd" xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:subb2obcdc="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:subb2obdoc="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ncsub="urn:gov:hhs:fha:nhinc:common:subscription" xmlns:edxlde="urn:oasis:names:tc:emergency:EDXL:DE:1.0">
  <xsd:import namespace="urn:gov:hhs:fha:nhinc:common:nhinccommon" schemaLocation="NhincCommon.xsd"/>
  <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" schemaLocation="../../ebRS/query.xsd"/>
  <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="../../ebRS/rs.xsd"/>
  <xsd:import namespace="urn:ihe:iti:xds-b:2007" schemaLocation="../../ihe/XDS.b_DocumentRepository.xsd"/>
  <xsd:import namespace="http://nhinc.services.com/schema/auditmessage" schemaLocation="../../ihe/auditmessage.xsd"/>
  <xsd:import namespace="http://docs.oasis-open.org/wsn/b-2" schemaLocation="../../docs.oasis-open.org/wsn/b-2.xsd"/>
  <xsd:import namespace="urn:gov:hhs:fha:nhinc:common:subscription" schemaLocation="../../../schemas/nhinc/common/Subscription.xsd"/>
  <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" schemaLocation="../../../schemas/ebRS/rim.xsd"/>
  <xsd:import namespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" schemaLocation="../../../schemas/nhinc/common/SubscriptionB2OverrideForCdc.xsd"/>
  <xsd:import namespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" schemaLocation="../../../schemas/nhinc/common/SubscriptionB2OverrideForDocuments.xsd"/>
  <xsd:import namespace="urn:oasis:names:tc:emergency:EDXL:DE:1.0" schemaLocation="../../../schemas/ebRS/edxl-de.xsd"/>
  <xsd:import namespace="http://www.caqh.org/SOAP/WSDL/CORERule2.2.0.xsd" schemaLocation="../../../schemas/caqh/CORERule2.2.0.xsd"/>
  <!--====================================================================
    Document Query Schemas.
    ====================================================================-->
  <xsd:complexType name="RespondingGateway_CrossGatewayQueryRequestType">
    <xsd:sequence>
      <xsd:element ref="query:AdhocQueryRequest"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayQueryRequest" type="tns:RespondingGateway_CrossGatewayQueryRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayQueryResponseType">
    <xsd:sequence>
      <xsd:element ref="query:AdhocQueryResponse"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayQueryResponse" type="tns:RespondingGateway_CrossGatewayQueryResponseType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayQueryResponseSecuredType">
    <xsd:sequence>
      <xsd:element ref="query:AdhocQueryResponse"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayQueryResponseSecured" type="tns:RespondingGateway_CrossGatewayQueryResponseSecuredType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayQuerySecuredRequestType">
    <xsd:sequence>
      <xsd:element ref="query:AdhocQueryRequest"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayQuerySecuredRequest" type="tns:RespondingGateway_CrossGatewayQuerySecuredRequestType"/>
  <!--====================================================================
    Document Retrieve Schemas.
    ====================================================================-->
  <xsd:complexType name="RespondingGateway_CrossGatewayRetrieveRequestType">
    <xsd:sequence>
      <xsd:element ref="ihe:RetrieveDocumentSetRequest"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRetrieveRequest" type="tns:RespondingGateway_CrossGatewayRetrieveRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayRetrieveSecuredRequestType">
    <xsd:sequence>
      <xsd:element ref="ihe:RetrieveDocumentSetRequest"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRetrieveSecuredRequest" type="tns:RespondingGateway_CrossGatewayRetrieveSecuredRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayRetrieveResponseType">
    <xsd:sequence>
      <xsd:element ref="ihe:RetrieveDocumentSetResponse"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRetrieveResponse" type="tns:RespondingGateway_CrossGatewayRetrieveResponseType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayRetrieveSecuredResponseType">
    <xsd:sequence>
      <xsd:element ref="ihe:RetrieveDocumentSetResponse"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRetrieveSecuredResponse" type="tns:RespondingGateway_CrossGatewayRetrieveSecuredResponseType"/>
  <!--====================================================================
    Audit Log Schemas.
    ====================================================================-->
  <xsd:complexType name="FindAuditEventsRequestType">
    <xsd:sequence>
      <xsd:element ref="iheaudit:FindAuditEvents"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="FindAuditEventsRequest" type="tns:FindAuditEventsRequestType"/>
  <xsd:complexType name="FindAuditEventsSecuredRequestType">
    <xsd:sequence>
      <xsd:element ref="iheaudit:FindAuditEvents"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="FindAuditEventsSecuredRequest" type="tns:FindAuditEventsSecuredRequestType"/>
  <!--====================================================================
    Subscription Management Schemas.
    ====================================================================-->
  <!--i think this could be removed-->
  <xsd:complexType name="SubscribeRequestType">
    <xsd:sequence>
      <xsd:element ref="wsnt:Subscribe"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeRequest" type="tns:SubscribeRequestType"/>
  <xsd:complexType name="SubscribeRequestSecuredType">
    <xsd:sequence>
      <xsd:element ref="wsnt:Subscribe"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeRequestSecured" type="tns:SubscribeRequestSecuredType"/>
  <xsd:complexType name="SubscribeDocumentRequestType">
    <xsd:sequence>
      <xsd:element name="subscribe" type="subb2obdoc:SubscribeDocumentType"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeDocumentRequest" type="tns:SubscribeDocumentRequestType"/>
  <xsd:complexType name="SubscribeDocumentRequestSecuredType">
    <xsd:sequence>
      <xsd:element name="subscribe" type="subb2obdoc:SubscribeDocumentType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeDocumentRequestSecured" type="tns:SubscribeDocumentRequestSecuredType"/>
  <xsd:complexType name="SubscribeCdcBioPackageRequestType">
    <xsd:sequence>
      <xsd:element name="subscribe" type="subb2obcdc:SubscribeCdcBioPackageType"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeCdcBioPackageRequest" type="tns:SubscribeCdcBioPackageRequestType"/>
  <xsd:complexType name="SubscribeDocumentResponseType">
    <xsd:sequence>
      <xsd:element ref="wsnt:SubscribeResponse"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeDocumentResponse" type="tns:SubscribeDocumentResponseType"/>
  <xsd:complexType name="SubscribeCdcBioPackageResponseType">
    <xsd:sequence>
      <xsd:element ref="wsnt:SubscribeResponse"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeCdcBioPackageResponse" type="tns:SubscribeCdcBioPackageResponseType"/>
  <xsd:complexType name="UnsubscribeRequestType">
    <xsd:sequence>
      <xsd:element ref="wsnt:Unsubscribe"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="UnsubscribeRequest" type="tns:UnsubscribeRequestType"/>
  <!--====================================================================
    Notification Schemas.
    ====================================================================-->
  <xsd:complexType name="NotifySubscribersOfDocumentRequestType">
    <xsd:sequence>
      <xsd:element name="notify" type="subb2obdoc:NotifyDocumentType"/>
      <xsd:element ref="rim:RegistryObjectList" minOccurs="0"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotifySubscribersOfDocumentRequest" type="tns:NotifySubscribersOfDocumentRequestType"/>
  <xsd:complexType name="NotifySubscribersOfDocumentRequestSecuredType">
    <xsd:sequence>
      <xsd:element name="notify" type="subb2obdoc:NotifyDocumentType"/>
      <xsd:element ref="rim:RegistryObjectList" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotifySubscribersOfDocumentRequestSecured" type="tns:NotifySubscribersOfDocumentRequestSecuredType"/>
  <xsd:complexType name="NotifySubscribersOfCdcBioPackageRequestType">
    <xsd:sequence>
      <xsd:element name="notify" type="subb2obcdc:NotifyCdcBioPackageType"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotifySubscribersOfCdcBioPackageRequest" type="tns:NotifySubscribersOfCdcBioPackageRequestType"/>
  <xsd:complexType name="NotifyRequestType">
    <xsd:sequence>
      <xsd:element ref="wsnt:Notify"/>
      <xsd:element name="Assertion" type="nccommon:AssertionType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotifyRequest" type="tns:NotifyRequestType"/>
  <xsd:complexType name="RespondingGateway_ProvideAndRegisterDocumentSetRequestType">
    <xsd:sequence>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
      <xsd:element name="ProvideAndRegisterDocumentSetRequest" type="ihe:ProvideAndRegisterDocumentSetRequestType"/>
      <xsd:element name="url" type="nccommon:UrlInfoType" minOccurs="0" maxOccurs="1"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_ProvideAndRegisterDocumentSetRequest" type="tns:RespondingGateway_ProvideAndRegisterDocumentSetRequestType"/>
  <xsd:complexType name="RespondingGateway_ProvideAndRegisterDocumentSetSecuredRequestType">
    <xsd:sequence>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
      <xsd:element name="ProvideAndRegisterDocumentSetRequest" type="ihe:ProvideAndRegisterDocumentSetRequestType"/>
      <xsd:element name="url" type="nccommon:UrlInfoType" minOccurs="0" maxOccurs="1"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_ProvideAndRegisterDocumentSetSecuredRequest" type="tns:RespondingGateway_ProvideAndRegisterDocumentSetSecuredRequestType"/>
  <xsd:complexType name="RespondingGateway_ProvideAndRegisterDocumentSetResponseRequestType">
    <xsd:sequence>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
      <xsd:element name="RegistryResponse" type="rs:RegistryResponseType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_ProvideAndRegisterDocumentSetResponseRequest" type="tns:RespondingGateway_ProvideAndRegisterDocumentSetResponseRequestType"/>
  <xsd:complexType name="RespondingGateway_ProvideAndRegisterDocumentSetSecuredResponseRequestType">
    <xsd:sequence>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
      <xsd:element name="RegistryResponse" type="rs:RegistryResponseType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_ProvideAndRegisterDocumentSetSecuredResponseRequest" type="tns:RespondingGateway_ProvideAndRegisterDocumentSetSecuredResponseRequestType"/>
  <xsd:complexType name="RespondingGateway_SendAlertMessageType">
    <xsd:sequence>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
      <xsd:element ref="edxlde:EDXLDistribution"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_SendAlertMessage" type="tns:RespondingGateway_SendAlertMessageType"/>
  <xsd:complexType name="RespondingGateway_SendAlertMessageSecuredType">
    <xsd:sequence>
      <xsd:element ref="edxlde:EDXLDistribution"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_SendAlertMessageSecured" type="tns:RespondingGateway_SendAlertMessageSecuredType"/>
  <!--====================================================================
    X12 Document Submission Realtime/Sync Schemas.
    ====================================================================-->
  <xsd:complexType name="RespondingGateway_CrossGatewayRealTimeRequestType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeRealTimeRequest"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRealTimeRequest" type="tns:RespondingGateway_CrossGatewayRealTimeRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayRealTimeSecuredRequestType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeRealTimeRequest"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRealTimeSecuredRequest" type="tns:RespondingGateway_CrossGatewayRealTimeSecuredRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayRealTimeResponseType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeRealTimeResponse"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRealTimeResponse" type="tns:RespondingGateway_CrossGatewayRealTimeResponseType"/>
  <!--====================================================================
    X12 Document Submission Batch/Deferred/Async Schemas.
    ====================================================================-->
  <xsd:complexType name="RespondingGateway_CrossGatewayBatchSubmissionRequestType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeBatchSubmission"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayBatchSubmissionRequest" type="tns:RespondingGateway_CrossGatewayBatchSubmissionRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayBatchSubmissionSecuredRequestType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeBatchSubmission"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayBatchSubmissionRequestSecured" type="tns:RespondingGateway_CrossGatewayBatchSubmissionSecuredRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayBatchSubmissionResponseMessageType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeBatchSubmissionResponse"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayBatchSubmissionResponseMessage" type="tns:RespondingGateway_CrossGatewayBatchSubmissionResponseMessageType"/>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\NhincCommon.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:common:nhinccommon" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:addr="http://www.w3.org/2005/08/addressing">
  <xsd:import namespace="http://www.w3.org/2005/08/addressing" schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd"/>
  <xsd:complexType name="QualifiedSubjectIdentifierType">
    <xsd:sequence>
      <xsd:element name="SubjectIdentifier" type="xsd:string"/>
      <xsd:element name="AssigningAuthorityIdentifier" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="QualifiedSubjectIdentifier" type="tns:QualifiedSubjectIdentifierType"/>
  <xsd:complexType name="AcknowledgementType">
    <xsd:sequence>
      <xsd:element name="message" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Acknowledgement" type="tns:AcknowledgementType"/>
  <xsd:complexType name="QualifiedSubjectIdentifiersType">
    <xsd:sequence>
      <xsd:element name="QualifiedSubjectIdentifier" type="tns:QualifiedSubjectIdentifierType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="QualifiedSubjectIdentifiers" type="tns:QualifiedSubjectIdentifiersType"/>
  <xsd:complexType name="AssertionType">
    <xsd:sequence>
      <xsd:element name="address" type="tns:AddressType"/>
      <xsd:element name="dateOfBirth" type="xsd:string"/>
      <xsd:element name="explanationNonClaimantSignature" type="xsd:string"/>
      <xsd:element name="haveSecondWitnessSignature" type="xsd:boolean"/>
      <xsd:element name="haveSignature" type="xsd:boolean"/>
      <xsd:element name="haveWitnessSignature" type="xsd:boolean"/>
      <xsd:element name="homeCommunity" type="tns:HomeCommunityType"/>
      <xsd:element name="nationalProviderId" type="xsd:string"/>
      <xsd:element name="personName" type="tns:PersonNameType"/>
      <xsd:element name="phoneNumber" type="tns:PhoneType"/>
      <xsd:element name="secondWitnessAddress" type="tns:AddressType"/>
      <xsd:element name="secondWitnessName" type="tns:PersonNameType"/>
      <xsd:element name="secondWitnessPhone" type="tns:PhoneType"/>
      <xsd:element name="SSN" type="xsd:string"/>
      <xsd:element name="uniquePatientId" type="xsd:string" maxOccurs="unbounded"/>
      <xsd:element name="witnessAddress" type="tns:AddressType"/>
      <xsd:element name="witnessName" type="tns:PersonNameType"/>
      <xsd:element name="witnessPhone" type="tns:PhoneType"/>
      <xsd:element name="userInfo" type="tns:UserType"/>
      <xsd:element name="authorized" type="xsd:boolean"/>
      <xsd:element name="purposeOfDisclosureCoded" type="tns:CeType" minOccurs="0"/>
      <xsd:element name="samlAuthnStatement" type="tns:SamlAuthnStatementType" minOccurs="0"/>
      <xsd:element name="samlAuthzDecisionStatement" type="tns:SamlAuthzDecisionStatementType" minOccurs="0"/>
      <xsd:element name="samlSignature" type="tns:SamlSignatureType" minOccurs="0"/>
      <xsd:element name="samlIssuer" type="tns:SamlIssuerType" minOccurs="0"/>
      <xsd:element name="messageId" type="xsd:string" minOccurs="0"/>
      <xsd:element name="relatesToList" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="implementsSpecVersion" type="xsd:string" minOccurs="0"/>
      <xsd:element name="transactionTimeout" type="xsd:int" minOccurs="0" default="-1"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Assertion" type="tns:AssertionType"/>
  <xsd:complexType name="SamlAuthnStatementType">
    <xsd:sequence>
      <xsd:element name="authInstant" type="xsd:string" minOccurs="0"/>
      <xsd:element name="sessionIndex" type="xsd:string" minOccurs="0"/>
      <xsd:element name="authContextClassRef" type="xsd:string" minOccurs="0"/>
      <xsd:element name="subjectLocalityAddress" type="xsd:string" minOccurs="0"/>
      <xsd:element name="subjectLocalityDNSName" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlAuthnStatement" type="tns:SamlAuthnStatementType"/>
  <xsd:complexType name="SamlAuthzDecisionStatementType">
    <xsd:sequence>
      <xsd:element name="decision" type="xsd:string" minOccurs="0"/>
      <xsd:element name="resource" type="xsd:string" minOccurs="0"/>
      <xsd:element name="action" type="xsd:string" minOccurs="0"/>
      <xsd:element name="evidence" type="tns:SamlAuthzDecisionStatementEvidenceType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlAuthzDecisionStatement" type="tns:SamlAuthzDecisionStatementType"/>
  <xsd:complexType name="SamlAuthzDecisionStatementEvidenceType">
    <xsd:sequence>
      <xsd:element name="assertion" type="tns:SamlAuthzDecisionStatementEvidenceAssertionType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlAuthzDecisionStatementEvidence" type="tns:SamlAuthzDecisionStatementEvidenceType"/>
  <xsd:complexType name="SamlAuthzDecisionStatementEvidenceAssertionType">
    <xsd:sequence>
      <xsd:element name="id" type="xsd:string" minOccurs="0"/>
      <xsd:element name="issueInstant" type="xsd:string" minOccurs="0"/>
      <xsd:element name="version" type="xsd:string" minOccurs="0"/>
      <xsd:element name="issuer" type="xsd:string" minOccurs="0"/>
      <xsd:element name="issuerFormat" type="xsd:string" minOccurs="0"/>
      <xsd:element name="subject" type="xsd:string" minOccurs="0"/>
      <xsd:element name="conditions" type="tns:SamlAuthzDecisionStatementEvidenceConditionsType" minOccurs="0"/>
      <xsd:element name="accessConsentPolicy" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="instanceAccessConsentPolicy" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlAuthzDecisionStatementEvidenceAssertion" type="tns:SamlAuthzDecisionStatementEvidenceAssertionType"/>
  <xsd:complexType name="SamlAuthzDecisionStatementEvidenceConditionsType">
    <xsd:sequence>
      <xsd:element name="notBefore" type="xsd:string" minOccurs="0"/>
      <xsd:element name="notOnOrAfter" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlAuthzDecisionStatementEvidenceConditions" type="tns:SamlAuthzDecisionStatementEvidenceConditionsType"/>
  <xsd:complexType name="SamlIssuerType">
    <xsd:sequence>
      <xsd:element name="issuer" type="xsd:string" minOccurs="0"/>
      <xsd:element name="issuerFormat" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlIssuer" type="tns:SamlIssuerType"/>
  <xsd:complexType name="SamlSignatureType">
    <xsd:sequence>
      <xsd:element name="keyInfo" type="tns:SamlSignatureKeyInfoType" minOccurs="0"/>
      <xsd:element name="signatureValue" type="xsd:base64Binary" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlSignature" type="tns:SamlSignatureType"/>
  <xsd:complexType name="SamlSignatureKeyInfoType">
    <xsd:sequence>
      <xsd:element name="rsaKeyValueModulus" type="xsd:base64Binary" minOccurs="0"/>
      <xsd:element name="rsaKeyValueExponent" type="xsd:base64Binary" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlSignatureKeyInfo" type="tns:SamlSignatureKeyInfoType"/>
  <xsd:complexType name="AddressType">
    <xsd:sequence>
      <xsd:element name="addressType" type="tns:CeType"/>
      <xsd:element name="city" type="xsd:string"/>
      <xsd:element name="country" type="xsd:string"/>
      <xsd:element name="state" type="xsd:string"/>
      <xsd:element name="streetAddress" type="xsd:string"/>
      <xsd:element name="zipCode" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Address" type="tns:AddressType"/>
  <xsd:complexType name="AddressesType">
    <xsd:sequence>
      <xsd:element name="address" type="tns:AddressType" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Addresses" type="tns:AddressesType"/>
  <xsd:complexType name="CeType">
    <xsd:sequence>
      <xsd:element name="code" type="xsd:string"/>
      <xsd:element name="codeSystem" type="xsd:string"/>
      <xsd:element name="codeSystemName" type="xsd:string"/>
      <xsd:element name="codeSystemVersion" type="xsd:string"/>
      <xsd:element name="displayName" type="xsd:string"/>
      <xsd:element name="originalText" type="xsd:string"/>
      <xsd:element name="translation" type="tns:CeType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Ce" type="tns:CeType"/>
  <xsd:complexType name="HomeCommunityType">
    <xsd:sequence>
      <xsd:element name="description" type="xsd:string" minOccurs="0"/>
      <xsd:element name="homeCommunityId" type="xsd:string"/>
      <xsd:element name="name" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="HomeCommunity" type="tns:HomeCommunityType"/>
  <xsd:complexType name="HomeCommunitiesType">
    <xsd:sequence>
      <xsd:element name="homeCommunity" type="tns:HomeCommunityType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="HomeCommunities" type="tns:HomeCommunitiesType"/>
  <xsd:complexType name="PersonNameType">
    <xsd:sequence>
      <xsd:element name="familyName" type="xsd:string"/>
      <xsd:element name="givenName" type="xsd:string"/>
      <xsd:element name="nameType" type="tns:CeType"/>
      <xsd:element name="secondNameOrInitials" type="xsd:string"/>
      <xsd:element name="fullName" type="xsd:string"/>
      <xsd:element name="prefix" type="xsd:string"/>
      <xsd:element name="suffix" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="PersonName" type="tns:PersonNameType"/>
  <xsd:complexType name="PhoneType">
    <xsd:sequence>
      <xsd:element name="areaCode" type="xsd:string"/>
      <xsd:element name="countryCode" type="xsd:string"/>
      <xsd:element name="extension" type="xsd:string"/>
      <xsd:element name="localNumber" type="xsd:string"/>
      <xsd:element name="phoneNumberType" type="tns:CeType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Phone" type="tns:PhoneType"/>
  <xsd:complexType name="UserType">
    <xsd:sequence>
      <xsd:element name="personName" type="tns:PersonNameType"/>
      <xsd:element name="userName" type="xsd:string"/>
      <xsd:element name="org" type="tns:HomeCommunityType"/>
      <xsd:element name="roleCoded" type="tns:CeType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="User" type="tns:UserType"/>
  <!--<xsd:complexType name="EPRType">
        <xsd:sequence>
            <xsd:element name="EndpointReference" type="addr:EndpointReferenceType"/>
        </xsd:sequence>
    </xsd:complexType>-->
  <xsd:element name="EPR" type="addr:EndpointReferenceType"/>
  <xsd:complexType name="CreateEPRRequestType">
    <xsd:sequence>
      <xsd:element name="endpointURL" type="xsd:string"/>
      <xsd:element name="namespaceURI" type="xsd:string"/>
      <xsd:element name="namespacePrefix" type="xsd:string"/>
      <xsd:element name="serviceName" type="xsd:string"/>
      <xsd:element name="portName" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="CreateEPRRequest" type="tns:CreateEPRRequestType"/>
  <xsd:complexType name="NhinTargetSystemType">
    <xsd:sequence>
      <xsd:choice>
        <xsd:element name="epr" type="addr:EndpointReferenceType"/>
        <xsd:element name="homeCommunity" type="tns:HomeCommunityType"/>
        <xsd:element name="url" type="xsd:string"/>
      </xsd:choice>
      <xsd:element name="useSpecVersion" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NhinTargetSystem" type="tns:NhinTargetSystemType"/>
  <xsd:complexType name="ResponseType">
    <xsd:sequence>
      <xsd:element name="status" type="xsd:boolean"/>
      <xsd:element name="message" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Response" type="tns:ResponseType"/>
  <xsd:complexType name="TokenCreationInfoType">
    <xsd:sequence>
      <xsd:element name="assertion" type="tns:AssertionType"/>
      <xsd:element name="actionName" type="xsd:string"/>
      <xsd:element name="resourceName" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="TokenCreationInfo" type="tns:TokenCreationInfoType"/>
  <xsd:complexType name="TokenRetrieveInfoType">
    <xsd:sequence>
      <xsd:element name="request" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="TokenRetrieveInfo" type="tns:TokenRetrieveInfoType"/>
  <xsd:complexType name="AssigningAuthorityType">
    <xsd:sequence>
      <xsd:element name="assigningAuthorityId" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="AssigningAuthority" type="tns:AssigningAuthorityType"/>
  <xsd:complexType name="AssigningAuthoritiesType">
    <xsd:sequence>
      <xsd:element name="assigningAuthority" type="tns:AssigningAuthorityType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="assigningAuthorites" type="tns:AssigningAuthoritiesType"/>
  <xsd:complexType name="NhinTargetCommunityType">
    <xsd:sequence>
      <xsd:element name="homeCommunity" type="tns:HomeCommunityType"/>
      <xsd:element name="list" type="xsd:string" minOccurs="0"/>
      <xsd:element name="region" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="NhinTargetCommunitiesType">
    <xsd:sequence>
      <xsd:element name="nhinTargetCommunity" type="tns:NhinTargetCommunityType" maxOccurs="unbounded"/>
      <xsd:element name="useSpecVersion" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NhinTargetCommunities" type="tns:NhinTargetCommunitiesType"/>
  <xsd:element name="NhinTargetCommunity" type="tns:NhinTargetCommunityType"/>
  <xsd:complexType name="UrlSetType">
    <xsd:sequence>
      <xsd:element name="url" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="UrlSet" type="tns:UrlSetType"/>
  <xsd:complexType name="UrlInfoType">
    <xsd:sequence>
      <xsd:element name="url" type="xsd:string"/>
      <xsd:element name="id" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="UrlInfo" type="tns:UrlInfoType"/>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\www.w3.org\2005\08\addressing\ws-addr.xsd</con:url><con:content><![CDATA[<!--W3C XML Schema defined in the Web Services Addressing 1.0 specification
    http://www.w3.org/TR/ws-addr-core

   Copyright © 2005 World Wide Web Consortium,

   (Massachusetts Institute of Technology, European Research Consortium for
   Informatics and Mathematics, Keio University). All Rights Reserved. This
   work is distributed under the W3C® Software License [1] in the hope that
   it will be useful, but WITHOUT ANY WARRANTY; without even the implied
   warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

   [1] http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231

   $Id: ws-addr.xsd,v 1.2 2008/07/23 13:38:16 plehegar Exp $-->
<xs:schema targetNamespace="http://www.w3.org/2005/08/addressing" blockDefault="#all" elementFormDefault="qualified" finalDefault="" attributeFormDefault="unqualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.w3.org/2005/08/addressing">
  <!--Constructs from the WS-Addressing Core-->
  <xs:element name="EndpointReference" type="tns:EndpointReferenceType"/>
  <xs:complexType name="EndpointReferenceType" mixed="false">
    <xs:sequence>
      <xs:element name="Address" type="tns:AttributedURIType"/>
      <xs:element ref="tns:ReferenceParameters" minOccurs="0"/>
      <xs:element ref="tns:Metadata" minOccurs="0"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
  <xs:element name="ReferenceParameters" type="tns:ReferenceParametersType"/>
  <xs:complexType name="ReferenceParametersType" mixed="false">
    <xs:sequence>
      <xs:any namespace="##any" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
  <xs:element name="Metadata" type="tns:MetadataType"/>
  <xs:complexType name="MetadataType" mixed="false">
    <xs:sequence>
      <xs:any namespace="##any" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
  <xs:element name="MessageID" type="tns:AttributedURIType"/>
  <xs:element name="RelatesTo" type="tns:RelatesToType"/>
  <xs:complexType name="RelatesToType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:anyURI">
        <xs:attribute name="RelationshipType" type="tns:RelationshipTypeOpenEnum" use="optional" default="http://www.w3.org/2005/08/addressing/reply"/>
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:simpleType name="RelationshipTypeOpenEnum">
    <xs:union memberTypes="tns:RelationshipType xs:anyURI"/>
  </xs:simpleType>
  <xs:simpleType name="RelationshipType">
    <xs:restriction base="xs:anyURI">
      <xs:enumeration value="http://www.w3.org/2005/08/addressing/reply"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="ReplyTo" type="tns:EndpointReferenceType"/>
  <xs:element name="From" type="tns:EndpointReferenceType"/>
  <xs:element name="FaultTo" type="tns:EndpointReferenceType"/>
  <xs:element name="To" type="tns:AttributedURIType"/>
  <xs:element name="Action" type="tns:AttributedURIType"/>
  <xs:complexType name="AttributedURIType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:anyURI">
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <!--Constructs from the WS-Addressing SOAP binding-->
  <xs:attribute name="IsReferenceParameter" type="xs:boolean"/>
  <xs:simpleType name="FaultCodesOpenEnumType">
    <xs:union memberTypes="tns:FaultCodesType xs:QName"/>
  </xs:simpleType>
  <xs:simpleType name="FaultCodesType">
    <xs:restriction base="xs:QName">
      <xs:enumeration value="tns:InvalidAddressingHeader"/>
      <xs:enumeration value="tns:InvalidAddress"/>
      <xs:enumeration value="tns:InvalidEPR"/>
      <xs:enumeration value="tns:InvalidCardinality"/>
      <xs:enumeration value="tns:MissingAddressInEPR"/>
      <xs:enumeration value="tns:DuplicateMessageID"/>
      <xs:enumeration value="tns:ActionMismatch"/>
      <xs:enumeration value="tns:MessageAddressingHeaderRequired"/>
      <xs:enumeration value="tns:DestinationUnreachable"/>
      <xs:enumeration value="tns:ActionNotSupported"/>
      <xs:enumeration value="tns:EndpointUnavailable"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="RetryAfter" type="tns:AttributedUnsignedLongType"/>
  <xs:complexType name="AttributedUnsignedLongType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:unsignedLong">
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:element name="ProblemHeaderQName" type="tns:AttributedQNameType"/>
  <xs:complexType name="AttributedQNameType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:QName">
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:element name="ProblemIRI" type="tns:AttributedURIType"/>
  <xs:element name="ProblemAction" type="tns:ProblemActionType"/>
  <xs:complexType name="ProblemActionType" mixed="false">
    <xs:sequence>
      <xs:element ref="tns:Action" minOccurs="0"/>
      <xs:element name="SoapAction" minOccurs="0" type="xs:anyURI"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ihe\auditmessage.xsd</con:url><con:content><![CDATA[<!--edited with XMLSPY v2004 rel. 3 U (http://www.xmlspy.com) by Glen F. Marshall (HL7 Technical Steering Committee)-->
<xs:schema targetNamespace="http://nhinc.services.com/schema/auditmessage" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://nhinc.services.com/schema/auditmessage">
  <xs:complexType name="AuditMessageType">
    <xs:sequence>
      <xs:element name="EventIdentification" type="tns:EventIdentificationType"/>
      <xs:element name="ActiveParticipant" maxOccurs="unbounded">
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="tns:ActiveParticipantType"/>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="AuditSourceIdentification" type="tns:AuditSourceIdentificationType" maxOccurs="unbounded"/>
      <xs:element name="ParticipantObjectIdentification" type="tns:ParticipantObjectIdentificationType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="AuditMessage" type="tns:AuditMessageType"/>
  <xs:complexType name="EventIdentificationType">
    <xs:sequence>
      <xs:element name="EventID" type="tns:CodedValueType"/>
      <xs:element name="EventTypeCode" type="tns:CodedValueType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="EventActionCode" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:enumeration value="C">
            <xs:annotation>
              <xs:appinfo>Create</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="R">
            <xs:annotation>
              <xs:appinfo>Read</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="U">
            <xs:annotation>
              <xs:appinfo>Update</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="D">
            <xs:annotation>
              <xs:appinfo>Delete</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="E">
            <xs:annotation>
              <xs:documentation>Execute</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="EventDateTime" type="xs:dateTime" use="required"/>
    <xs:attribute name="EventOutcomeIndicator" use="required">
      <xs:simpleType>
        <xs:restriction base="xs:integer">
          <xs:enumeration value="0">
            <xs:annotation>
              <xs:appinfo>Success</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="4">
            <xs:annotation>
              <xs:appinfo>Minor failure</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="8">
            <xs:annotation>
              <xs:appinfo>Serious failure</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="12">
            <xs:annotation>
              <xs:appinfo>Major failure; action made unavailable</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="AuditSourceIdentificationType">
    <xs:sequence>
      <xs:element name="AuditSourceTypeCode" type="tns:CodedValueType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="AuditEnterpriseSiteID" type="xs:string" use="optional"/>
    <xs:attribute name="AuditSourceID" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="ActiveParticipantType">
    <xs:sequence minOccurs="0">
      <xs:element name="RoleIDCode" type="tns:CodedValueType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="UserID" type="xs:string" use="required"/>
    <xs:attribute name="AlternativeUserID" type="xs:string" use="optional"/>
    <xs:attribute name="UserName" type="xs:string" use="optional"/>
    <xs:attribute name="UserIsRequestor" type="xs:boolean" use="optional" default="true"/>
    <xs:attribute name="NetworkAccessPointID" type="xs:string" use="optional"/>
    <xs:attribute name="NetworkAccessPointTypeCode" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:unsignedByte">
          <xs:enumeration value="1">
            <xs:annotation>
              <xs:appinfo>Machine Name, including DNS name</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="2">
            <xs:annotation>
              <xs:appinfo>IP Address</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="3">
            <xs:annotation>
              <xs:appinfo>Telephone Number</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ParticipantObjectIdentificationType">
    <xs:sequence>
      <xs:element name="ParticipantObjectIDTypeCode" type="tns:CodedValueType"/>
      <xs:choice minOccurs="0">
        <xs:element name="ParticipantObjectName" type="xs:string" minOccurs="0"/>
        <xs:element name="ParticipantObjectQuery" type="xs:base64Binary" minOccurs="0"/>
      </xs:choice>
      <xs:element name="ParticipantObjectDetail" type="tns:TypeValuePairType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="ParticipantObjectID" type="xs:string" use="required"/>
    <xs:attribute name="ParticipantObjectTypeCode" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:unsignedByte">
          <xs:enumeration value="1">
            <xs:annotation>
              <xs:appinfo>Person</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="2">
            <xs:annotation>
              <xs:appinfo>System object</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="3">
            <xs:annotation>
              <xs:appinfo>Organization</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="4">
            <xs:annotation>
              <xs:appinfo>Other</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ParticipantObjectTypeCodeRole" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:unsignedByte">
          <xs:enumeration value="1">
            <xs:annotation>
              <xs:appinfo>Patient</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="2">
            <xs:annotation>
              <xs:appinfo>Location</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="3">
            <xs:annotation>
              <xs:appinfo>Report</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="4">
            <xs:annotation>
              <xs:appinfo>Resource</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="5">
            <xs:annotation>
              <xs:appinfo>Master file</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="6">
            <xs:annotation>
              <xs:appinfo>User</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="7">
            <xs:annotation>
              <xs:appinfo>List</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="8">
            <xs:annotation>
              <xs:appinfo>Doctor</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="9">
            <xs:annotation>
              <xs:appinfo>Subscriber</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="10">
            <xs:annotation>
              <xs:appinfo>Guarantor</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="11">
            <xs:annotation>
              <xs:appinfo>Security User Entity</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="12">
            <xs:annotation>
              <xs:appinfo>Security User Group</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="13">
            <xs:annotation>
              <xs:appinfo>Security Resource</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="14">
            <xs:annotation>
              <xs:appinfo>Security Granualarity Definition</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="15">
            <xs:annotation>
              <xs:appinfo>Provider</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="16">
            <xs:annotation>
              <xs:appinfo>Report Destination</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="17">
            <xs:annotation>
              <xs:appinfo>Report Library</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="18">
            <xs:annotation>
              <xs:appinfo>Schedule</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="19">
            <xs:annotation>
              <xs:appinfo>Customer</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="20">
            <xs:annotation>
              <xs:appinfo>Job</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="21">
            <xs:annotation>
              <xs:appinfo>Job Stream</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="22">
            <xs:annotation>
              <xs:appinfo>Table</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="23">
            <xs:annotation>
              <xs:appinfo>Routing Criteria</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="24">
            <xs:annotation>
              <xs:appinfo>Query</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ParticipantObjectDataLifeCycle" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:unsignedByte">
          <xs:enumeration value="1">
            <xs:annotation>
              <xs:appinfo>Origination / Creation</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="2">
            <xs:annotation>
              <xs:appinfo>Import / Copy from original</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="3">
            <xs:annotation>
              <xs:appinfo>Amendment</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="4">
            <xs:annotation>
              <xs:appinfo>Verification</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="5">
            <xs:annotation>
              <xs:appinfo>Translation</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="6">
            <xs:annotation>
              <xs:appinfo>Access / Use</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="7">
            <xs:annotation>
              <xs:appinfo>De-identification</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="8">
            <xs:annotation>
              <xs:appinfo>Aggregation, summarization, derivation</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="9">
            <xs:annotation>
              <xs:appinfo>Report</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="10">
            <xs:annotation>
              <xs:appinfo>Export / Copy to target</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="11">
            <xs:annotation>
              <xs:appinfo>Disclosure</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="12">
            <xs:annotation>
              <xs:appinfo>Receipt of disclosure</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="13">
            <xs:annotation>
              <xs:appinfo>Archiving</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="14">
            <xs:annotation>
              <xs:appinfo>Logical deletion</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="15">
            <xs:annotation>
              <xs:appinfo>Permanent erasure / Physical destruction</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ParticipantObjectSensitivity" type="xs:string" use="optional"/>
  </xs:complexType>
  <xs:complexType name="CodedValueType">
    <xs:attribute name="code" type="xs:string" use="required"/>
    <xs:attributeGroup ref="tns:CodeSystem"/>
    <xs:attribute name="displayName" type="xs:string" use="optional"/>
    <xs:attribute name="originalText" type="xs:string" use="optional"/>
  </xs:complexType>
  <xs:complexType name="TypeValuePairType">
    <xs:attribute name="type" type="xs:string" use="required"/>
    <xs:attribute name="value" type="xs:base64Binary" use="required"/>
  </xs:complexType>
  <xs:attributeGroup name="CodeSystem">
    <xs:attribute name="codeSystem" type="tns:OID" use="optional"/>
    <xs:attribute name="codeSystemName" type="xs:string" use="optional"/>
  </xs:attributeGroup>
  <xs:simpleType name="OID">
    <xs:restriction base="xs:string">
      <xs:whiteSpace value="collapse"/>
    </xs:restriction>
  </xs:simpleType>
  <!--The following were added from the AuditLogQuery WSDL-->
  <xs:complexType name="FindAuditEventsType">
    <xs:sequence>
      <xs:element name="patientId" type="xs:string" minOccurs="1"/>
      <xs:element name="userId" type="xs:string"/>
      <xs:element name="beginDateTime" type="xs:dateTime"/>
      <xs:element name="endDateTime" type="xs:dateTime"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="FindAuditEvents" type="tns:FindAuditEventsType"/>
  <xs:complexType name="FindAuditEventsResponseType">
    <xs:sequence>
      <xs:element name="findAuditEventsReturn" type="tns:AuditMessageType" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="FindAuditEventsResponse" type="tns:FindAuditEventsResponseType"/>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\docs.oasis-open.org\wsn\b-2.xsd</con:url><con:content><![CDATA[<!--OASIS takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights. Information on OASIS's procedures with respect to rights in OASIS specifications can be found at the OASIS website. Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementors or users of this specification, can be obtained from the OASIS Executive Director.

OASIS invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights which may cover technology that may be required to implement this specification. Please address the information to the OASIS Executive Director.

Copyright (C) OASIS Open (2004-2006). All Rights Reserved.

This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to OASIS, except as needed for the purpose of developing OASIS specifications, in which case the procedures for copyrights defined in the OASIS Intellectual Property Rights document must be followed, or as required to translate it into languages other than English. 

The limited permissions granted above are perpetual and will not be revoked by OASIS or its successors or assigns. 

This document and the information contained herein is provided on an "AS IS" basis and OASIS DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.-->
<xsd:schema targetNamespace="http://docs.oasis-open.org/wsn/b-2" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:wsrf-bf="http://docs.oasis-open.org/wsrf/bf-2" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <!--======================== Imports  ============================-->
  <xsd:import namespace="http://www.w3.org/2005/08/addressing" schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd"/>
  <xsd:import namespace="http://docs.oasis-open.org/wsrf/bf-2" schemaLocation="../wsrf/bf-2.xsd"/>
  <xsd:import namespace="http://docs.oasis-open.org/wsn/t-1" schemaLocation="t-1.xsd"/>
  <!--===================== Misc. Helper Types =====================-->
  <xsd:complexType name="QueryExpressionType" mixed="true">
    <xsd:sequence>
      <xsd:any minOccurs="0" maxOccurs="1" processContents="lax"/>
    </xsd:sequence>
    <xsd:attribute name="Dialect" type="xsd:anyURI" use="required"/>
  </xsd:complexType>
  <xsd:complexType name="TopicExpressionType" mixed="true">
    <xsd:sequence>
      <xsd:any minOccurs="0" maxOccurs="1" processContents="lax"/>
    </xsd:sequence>
    <xsd:attribute name="Dialect" type="xsd:anyURI" use="required"/>
    <xsd:anyAttribute/>
  </xsd:complexType>
  <xsd:complexType name="FilterType">
    <xsd:sequence>
      <xsd:any minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="SubscriptionPolicyType">
    <xsd:sequence>
      <xsd:any minOccurs="0" maxOccurs="unbounded" processContents="lax"/>
    </xsd:sequence>
  </xsd:complexType>
  <!--=============== Resource Property Related  ===================-->
  <!--======== Resource Properties for NotificationProducer ========-->
  <xsd:element name="TopicExpression" type="wsnt:TopicExpressionType"/>
  <xsd:element name="FixedTopicSet" type="xsd:boolean" default="true"/>
  <xsd:element name="TopicExpressionDialect" type="xsd:anyURI"/>
  <xsd:element name="NotificationProducerRP">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="wsnt:TopicExpression" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element ref="wsnt:FixedTopicSet" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="wsnt:TopicExpressionDialect" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element ref="wstop:TopicSet" minOccurs="0" maxOccurs="1"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <!--======== Resource Properties for SubscriptionManager =========-->
  <xsd:element name="ConsumerReference" type="wsa:EndpointReferenceType"/>
  <xsd:element name="Filter" type="wsnt:FilterType"/>
  <xsd:element name="SubscriptionPolicy" type="wsnt:SubscriptionPolicyType"/>
  <xsd:element name="CreationTime" type="xsd:dateTime"/>
  <xsd:element name="SubscriptionManagerRP">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="wsnt:ConsumerReference" minOccurs="1" maxOccurs="1"/>
        <xsd:element ref="wsnt:Filter" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="wsnt:SubscriptionPolicy" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="wsnt:CreationTime" minOccurs="0" maxOccurs="1"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <!--================= Notification Metadata  =====================-->
  <xsd:element name="SubscriptionReference" type="wsa:EndpointReferenceType"/>
  <xsd:element name="Topic" type="wsnt:TopicExpressionType"/>
  <xsd:element name="ProducerReference" type="wsa:EndpointReferenceType"/>
  <!--================== Message Helper Types  =====================-->
  <xsd:complexType name="NotificationMessageHolderType">
    <xsd:sequence>
      <xsd:element ref="wsnt:SubscriptionReference" minOccurs="0" maxOccurs="1"/>
      <xsd:element ref="wsnt:Topic" minOccurs="0" maxOccurs="1"/>
      <xsd:element ref="wsnt:ProducerReference" minOccurs="0" maxOccurs="1"/>
      <xsd:element name="Message">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:any namespace="##any" processContents="lax" minOccurs="1" maxOccurs="1"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotificationMessage" type="wsnt:NotificationMessageHolderType"/>
  <!--========== Message Types for NotificationConsumer  ===========-->
  <xsd:element name="Notify">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="wsnt:NotificationMessage" minOccurs="1" maxOccurs="unbounded"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <!--========== Message Types for NotificationProducer  ===========-->
  <xsd:simpleType name="AbsoluteOrRelativeTimeType">
    <xsd:union memberTypes="xsd:dateTime xsd:duration"/>
  </xsd:simpleType>
  <xsd:element name="CurrentTime" type="xsd:dateTime"/>
  <xsd:element name="TerminationTime" nillable="true" type="xsd:dateTime"/>
  <xsd:element name="ProducerProperties" type="wsnt:QueryExpressionType"/>
  <xsd:element name="MessageContent" type="wsnt:QueryExpressionType"/>
  <xsd:element name="UseRaw">
    <xsd:complexType/>
  </xsd:element>
  <xsd:element name="Subscribe">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="ConsumerReference" type="wsa:EndpointReferenceType" minOccurs="1" maxOccurs="1"/>
        <xsd:element name="Filter" type="wsnt:FilterType" minOccurs="0" maxOccurs="1"/>
        <xsd:element name="InitialTerminationTime" type="wsnt:AbsoluteOrRelativeTimeType" nillable="true" minOccurs="0" maxOccurs="1"/>
        <xsd:element name="SubscriptionPolicy" minOccurs="0" maxOccurs="1">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:any namespace="##any" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="SubscribeResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="SubscriptionReference" type="wsa:EndpointReferenceType" minOccurs="1" maxOccurs="1"/>
        <xsd:element ref="wsnt:CurrentTime" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="wsnt:TerminationTime" minOccurs="0" maxOccurs="1"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="GetCurrentMessage">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="Topic" type="wsnt:TopicExpressionType"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="GetCurrentMessageResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="SubscribeCreationFailedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="SubscribeCreationFailedFault" type="wsnt:SubscribeCreationFailedFaultType"/>
  <xsd:complexType name="InvalidFilterFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType">
        <xsd:sequence>
          <xsd:element name="UnknownFilter" type="xsd:QName" minOccurs="1" maxOccurs="unbounded"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="InvalidFilterFault" type="wsnt:InvalidFilterFaultType"/>
  <xsd:complexType name="TopicExpressionDialectUnknownFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="TopicExpressionDialectUnknownFault" type="wsnt:TopicExpressionDialectUnknownFaultType"/>
  <xsd:complexType name="InvalidTopicExpressionFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="InvalidTopicExpressionFault" type="wsnt:InvalidTopicExpressionFaultType"/>
  <xsd:complexType name="TopicNotSupportedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="TopicNotSupportedFault" type="wsnt:TopicNotSupportedFaultType"/>
  <xsd:complexType name="MultipleTopicsSpecifiedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="MultipleTopicsSpecifiedFault" type="wsnt:MultipleTopicsSpecifiedFaultType"/>
  <xsd:complexType name="InvalidProducerPropertiesExpressionFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="InvalidProducerPropertiesExpressionFault" type="wsnt:InvalidProducerPropertiesExpressionFaultType"/>
  <xsd:complexType name="InvalidMessageContentExpressionFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="InvalidMessageContentExpressionFault" type="wsnt:InvalidMessageContentExpressionFaultType"/>
  <xsd:complexType name="UnrecognizedPolicyRequestFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType">
        <xsd:sequence>
          <xsd:element name="UnrecognizedPolicy" type="xsd:QName" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnrecognizedPolicyRequestFault" type="wsnt:UnrecognizedPolicyRequestFaultType"/>
  <xsd:complexType name="UnsupportedPolicyRequestFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType">
        <xsd:sequence>
          <xsd:element name="UnsupportedPolicy" type="xsd:QName" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnsupportedPolicyRequestFault" type="wsnt:UnsupportedPolicyRequestFaultType"/>
  <xsd:complexType name="NotifyMessageNotSupportedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="NotifyMessageNotSupportedFault" type="wsnt:NotifyMessageNotSupportedFaultType"/>
  <xsd:complexType name="UnacceptableInitialTerminationTimeFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType">
        <xsd:sequence>
          <xsd:element name="MinimumTime" type="xsd:dateTime"/>
          <xsd:element name="MaximumTime" type="xsd:dateTime" minOccurs="0"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnacceptableInitialTerminationTimeFault" type="wsnt:UnacceptableInitialTerminationTimeFaultType"/>
  <xsd:complexType name="NoCurrentMessageOnTopicFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="NoCurrentMessageOnTopicFault" type="wsnt:NoCurrentMessageOnTopicFaultType"/>
  <!--======== Message Types for PullPoint  ========================-->
  <xsd:element name="GetMessages">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="MaximumNumber" type="xsd:nonNegativeInteger" minOccurs="0"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="GetMessagesResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="wsnt:NotificationMessage" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="DestroyPullPoint">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="DestroyPullPointResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="UnableToGetMessagesFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnableToGetMessagesFault" type="wsnt:UnableToGetMessagesFaultType"/>
  <xsd:complexType name="UnableToDestroyPullPointFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnableToDestroyPullPointFault" type="wsnt:UnableToDestroyPullPointFaultType"/>
  <!--======== Message Types for Create PullPoint  =================-->
  <xsd:element name="CreatePullPoint">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="CreatePullPointResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="PullPoint" type="wsa:EndpointReferenceType"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="UnableToCreatePullPointFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnableToCreatePullPointFault" type="wsnt:UnableToCreatePullPointFaultType"/>
  <!--======== Message Types for Base SubscriptionManager  =========-->
  <xsd:element name="Renew">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="TerminationTime" type="wsnt:AbsoluteOrRelativeTimeType" nillable="true" minOccurs="1" maxOccurs="1"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="RenewResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="wsnt:TerminationTime" minOccurs="1" maxOccurs="1"/>
        <xsd:element ref="wsnt:CurrentTime" minOccurs="0" maxOccurs="1"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="UnacceptableTerminationTimeFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType">
        <xsd:sequence>
          <xsd:element name="MinimumTime" type="xsd:dateTime"/>
          <xsd:element name="MaximumTime" type="xsd:dateTime" minOccurs="0"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnacceptableTerminationTimeFault" type="wsnt:UnacceptableTerminationTimeFaultType"/>
  <xsd:element name="Unsubscribe">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="UnsubscribeResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="UnableToDestroySubscriptionFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnableToDestroySubscriptionFault" type="wsnt:UnableToDestroySubscriptionFaultType"/>
  <!--====== Message Types for Pausable SubscriptionManager  =======-->
  <xsd:element name="PauseSubscription">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="PauseSubscriptionResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="ResumeSubscription">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="ResumeSubscriptionResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="PauseFailedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="PauseFailedFault" type="wsnt:PauseFailedFaultType"/>
  <xsd:complexType name="ResumeFailedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="ResumeFailedFault" type="wsnt:ResumeFailedFaultType"/>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\docs.oasis-open.org\wsrf\bf-2.xsd</con:url><con:content><![CDATA[<!--OASIS takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights. Information on OASIS's procedures with respect to rights in OASIS specifications can be found at the OASIS website. Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementers or users of this specification, can be obtained from the OASIS Executive Director. 

OASIS invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights which may cover technology that may be required to implement this specification. Please address the information to the OASIS Executive Director. 

Copyright (C) OASIS Open (2005). All Rights Reserved. 

This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to OASIS, except as needed for the purpose of developing OASIS specifications, in which case the procedures for copyrights defined in the OASIS Intellectual Property Rights document must be followed, or as required to translate it into languages other than English. 

The limited permissions granted above are perpetual and will not be revoked by OASIS or its successors or assigns. 

This document and the information contained herein is provided on an "AS IS" basis and OASIS DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.-->
<xsd:schema elementFormDefault="qualified" attributeFormDefault="unqualified" targetNamespace="http://docs.oasis-open.org/wsrf/bf-2" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:wsrf-bf="http://docs.oasis-open.org/wsrf/bf-2">
  <xsd:import namespace="http://www.w3.org/2005/08/addressing" schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd"/>
  <xsd:import namespace="http://www.w3.org/XML/1998/namespace" schemaLocation="../../www.w3.org/2001/xml.xsd">
    <xsd:annotation>
      <xsd:documentation>Get access to the xml: attribute groups for xml:lang as declared on 'schema'
        and 'documentation' below</xsd:documentation>
    </xsd:annotation>
  </xsd:import>
  <!--====================== BaseFault Types =======================-->
  <xsd:element name="BaseFault" type="wsrf-bf:BaseFaultType"/>
  <xsd:complexType name="BaseFaultType">
    <xsd:sequence>
      <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="Timestamp" type="xsd:dateTime" minOccurs="1" maxOccurs="1"/>
      <xsd:element name="Originator" type="wsa:EndpointReferenceType" minOccurs="0" maxOccurs="1"/>
      <xsd:element name="ErrorCode" minOccurs="0" maxOccurs="1">
        <xsd:complexType>
          <xsd:complexContent>
            <xsd:extension base="xsd:anyType">
              <xsd:attribute name="dialect" type="xsd:anyURI" use="required"/>
            </xsd:extension>
          </xsd:complexContent>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="Description" minOccurs="0" maxOccurs="unbounded">
        <xsd:complexType>
          <xsd:simpleContent>
            <xsd:extension base="xsd:string">
              <xsd:attribute ref="xml:lang" use="optional"/>
            </xsd:extension>
          </xsd:simpleContent>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="FaultCause" minOccurs="0" maxOccurs="1">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:any namespace="##other" processContents="lax" minOccurs="1" maxOccurs="1"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
    <xsd:anyAttribute namespace="##other" processContents="lax"/>
  </xsd:complexType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\docs.oasis-open.org\wsn\t-1.xsd</con:url><con:content><![CDATA[<!--OASIS takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights. Information on OASIS's procedures with respect to rights in OASIS specifications can be found at the OASIS website. Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementors or users of this specification, can be obtained from the OASIS Executive Director.

OASIS invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights which may cover technology that may be required to implement this specification. Please address the information to the OASIS Executive Director.

Copyright (C) OASIS Open (2004-2006). All Rights Reserved.

This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to OASIS, except as needed for the purpose of developing OASIS specifications, in which case the procedures for copyrights defined in the OASIS Intellectual Property Rights document must be followed, or as required to translate it into languages other than English. 

The limited permissions granted above are perpetual and will not be revoked by OASIS or its successors or assigns. 

This document and the information contained herein is provided on an "AS IS" basis and OASIS DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.-->
<xsd:schema targetNamespace="http://docs.oasis-open.org/wsn/t-1" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
  <!--=============== utility type definitions  ====================-->
  <xsd:complexType name="Documentation" mixed="true">
    <xsd:sequence>
      <xsd:any processContents="lax" minOccurs="0" maxOccurs="unbounded" namespace="##any"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="ExtensibleDocumented" abstract="true" mixed="false">
    <xsd:sequence>
      <xsd:element name="documentation" type="wstop:Documentation" minOccurs="0"/>
    </xsd:sequence>
    <xsd:anyAttribute namespace="##other" processContents="lax"/>
  </xsd:complexType>
  <xsd:complexType name="QueryExpressionType" mixed="true">
    <xsd:sequence>
      <xsd:any minOccurs="0" maxOccurs="1" processContents="lax"/>
    </xsd:sequence>
    <xsd:attribute name="Dialect" type="xsd:anyURI" use="required"/>
  </xsd:complexType>
  <!--================== Topic-Namespace Related  ================-->
  <xsd:complexType name="TopicNamespaceType">
    <xsd:complexContent>
      <xsd:extension base="wstop:ExtensibleDocumented">
        <xsd:sequence>
          <xsd:element name="Topic" minOccurs="0" maxOccurs="unbounded">
            <xsd:complexType>
              <xsd:complexContent>
                <xsd:extension base="wstop:TopicType">
                  <xsd:attribute name="parent" type="wstop:ConcreteTopicExpression"/>
                </xsd:extension>
              </xsd:complexContent>
            </xsd:complexType>
          </xsd:element>
          <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="lax"/>
        </xsd:sequence>
        <xsd:attribute name="name" type="xsd:NCName"/>
        <xsd:attribute name="targetNamespace" type="xsd:anyURI" use="required"/>
        <xsd:attribute name="final" type="xsd:boolean" default="false"/>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="TopicNamespace" type="wstop:TopicNamespaceType">
    <xsd:unique name="rootTopicUniqueness">
      <xsd:selector xpath="wstop:Topic"/>
      <xsd:field xpath="@name"/>
    </xsd:unique>
  </xsd:element>
  <xsd:attribute name="topicNamespaceLocation" type="xsd:anyURI"/>
  <!--===================== Topic Related  =========================-->
  <xsd:complexType name="TopicType">
    <xsd:complexContent>
      <xsd:extension base="wstop:ExtensibleDocumented">
        <xsd:sequence>
          <xsd:element name="MessagePattern" type="wstop:QueryExpressionType" minOccurs="0" maxOccurs="1"/>
          <xsd:element name="Topic" type="wstop:TopicType" minOccurs="0" maxOccurs="unbounded">
            <xsd:unique name="childTopicUniqueness">
              <xsd:selector xpath="wstop:topic"/>
              <xsd:field xpath="@name"/>
            </xsd:unique>
          </xsd:element>
          <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
        <xsd:attribute name="name" use="required" type="xsd:NCName"/>
        <xsd:attribute name="messageTypes">
          <xsd:simpleType>
            <xsd:list itemType="xsd:QName"/>
          </xsd:simpleType>
        </xsd:attribute>
        <xsd:attribute name="final" type="xsd:boolean" default="false"/>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <!--================ Topic Set Related  ===================-->
  <xsd:complexType name="TopicSetType">
    <xsd:complexContent>
      <xsd:extension base="wstop:ExtensibleDocumented">
        <xsd:sequence>
          <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="lax"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="TopicSet" type="wstop:TopicSetType"/>
  <xsd:attribute name="topic" type="xsd:boolean" default="false"/>
  <!--================ Topic Expression Related  ===================-->
  <xsd:simpleType name="FullTopicExpression">
    <xsd:restriction base="xsd:token">
      <xsd:annotation>
        <xsd:documentation>TopicPathExpression  ::=   TopicPath ( '|' TopicPath )*  
        TopicPath       ::=   RootTopic ChildTopicExpression* 
        RootTopic       ::=   NamespacePrefix? ('//')? (NCName | '*')  
        NamespacePrefix ::=   NCName ':'      
        ChildTopicExpression ::=   '/' '/'? (QName | NCName | '*'| '.')</xsd:documentation>
      </xsd:annotation>
      <xsd:pattern value="([\i-[:]][\c-[:]]*:)?(//)?([\i-[:]][\c-[:]]*|\*)((/|//)(([\i-[:]][\c-[:]]*:)?[\i-[:]][\c-[:]]*|\*|[.]))*(\|([\i-[:]][\c-[:]]*:)?(//)?([\i-[:]][\c-[:]]*|\*)((/|//)(([\i-[:]][\c-[:]]*:)?[\i-[:]][\c-[:]]*|\*|[.]))*)*"></xsd:pattern>
    </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="ConcreteTopicExpression">
    <xsd:restriction base="xsd:token">
      <xsd:annotation>
        <xsd:documentation>The pattern allows strings matching the following EBNF:
    ConcreteTopicPath    ::=   RootTopic ChildTopic*    
    RootTopic            ::=   QName  
    ChildTopic           ::=   '/' (QName | NCName)</xsd:documentation>
      </xsd:annotation>
      <xsd:pattern value="(([\i-[:]][\c-[:]]*:)?[\i-[:]][\c-[:]]*)(/([\i-[:]][\c-[:]]*:)?[\i-[:]][\c-[:]]*)*"></xsd:pattern>
    </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="SimpleTopicExpression">
    <xsd:restriction base="xsd:QName">
      <xsd:annotation>
        <xsd:documentation>The pattern allows strings matching the following EBNF:
    RootTopic            ::=   QName</xsd:documentation>
      </xsd:annotation>
    </xsd:restriction>
  </xsd:simpleType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\Subscription.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:common:subscription" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:common:subscription" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:addr="http://www.w3.org/2005/08/addressing" xmlns:ihe="urn:ihe:iti:xds-b:2007" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:nhin-cdc="http://www.hhs.gov/healthit/nhin/cdc" xmlns:subb2obcdc="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:subb2obdoc="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments">
  <xsd:import schemaLocation="../../docs.oasis-open.org/wsn/b-2.xsd" namespace="http://docs.oasis-open.org/wsn/b-2"/>
  <xsd:import schemaLocation="../../ebRS/rim.xsd" namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"/>
  <xsd:import schemaLocation="../../ihe/XDS.b_DocumentRepository.xsd" namespace="urn:ihe:iti:xds-b:2007"/>
  <xsd:import schemaLocation="../common/NhincCommon.xsd" namespace="urn:gov:hhs:fha:nhinc:common:nhinccommon"/>
  <xsd:import schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd" namespace="http://www.w3.org/2005/08/addressing"/>
  <xsd:import schemaLocation="../common/Cdc.xsd" namespace="http://www.hhs.gov/healthit/nhin/cdc"/>
  <xsd:import schemaLocation="../common/SubscriptionB2OverrideForCdc.xsd" namespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc"/>
  <xsd:import schemaLocation="../common/SubscriptionB2OverrideForDocuments.xsd" namespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments"/>
  <xsd:complexType name="CommunityType">
    <xsd:sequence>
      <xsd:element name="Id" type="xsd:string"/>
      <xsd:element name="Name" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Community" type="tns:CommunityType"></xsd:element>
  <xsd:complexType name="SubscriberType">
    <xsd:sequence>
      <xsd:element name="Community" type="tns:CommunityType"/>
      <xsd:element name="NotificationConsumerEndpointAddress" type="xsd:string"/>
      <xsd:element name="UserAddress" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Subscriber" type="tns:SubscriberType"></xsd:element>
  <xsd:complexType name="SubscribeeType">
    <xsd:sequence>
      <xsd:element name="Community" type="tns:CommunityType"/>
      <xsd:element name="NotificationProducerEndpointAddress" type="xsd:string"/>
      <xsd:element name="UserAddress" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Subscribee" type="tns:SubscribeeType"></xsd:element>
  <xsd:complexType name="SubscriptionCriteriaType">
    <xsd:sequence>
      <xsd:element name="SubscribeePatient" type="nccommon:QualifiedSubjectIdentifierType"/>
      <xsd:element name="SubscriberPatient" type="nccommon:QualifiedSubjectIdentifierType"></xsd:element>
      <xsd:element name="Criteria" type="tns:CriteriaType" minOccurs="0"></xsd:element>
      <xsd:element name="TopicExpression" type="tns:TopicExpressionType" minOccurs="0"></xsd:element>
      <xsd:element name="SubscriptionPolicy" type="tns:SubscriptionPolicyType" minOccurs="0"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionCriteria" type="tns:SubscriptionCriteriaType"></xsd:element>
  <xsd:complexType name="SubscriptionReferenceType">
    <xsd:sequence>
      <xsd:element name="SubscriptionManagerEndpointAddress" type="xsd:string" minOccurs="0"/>
      <xsd:element name="ReferenceParameters" type="tns:ReferenceParametersType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType"/>
  <xsd:complexType name="SubscriptionItemType">
    <xsd:sequence>
      <xsd:element name="Subscriber" type="tns:SubscriberType" minOccurs="0"/>
      <xsd:element name="Subscribee" type="tns:SubscribeeType" minOccurs="0"/>
      <xsd:element name="SubscriptionCriteria" type="tns:SubscriptionCriteriaType" minOccurs="0"/>
      <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType" minOccurs="0"/>
      <xsd:element name="ParentSubscriptionReference" type="tns:SubscriptionReferenceType" minOccurs="0"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionItem" type="tns:SubscriptionItemType"/>
  <xsd:complexType name="SubscriptionItemsType">
    <xsd:sequence>
      <xsd:element name="subscriptionItem" type="tns:SubscriptionItemType" maxOccurs="unbounded" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionItems" type="tns:SubscriptionItemsType"></xsd:element>
  <xsd:complexType name="CriterionType">
    <xsd:sequence>
      <xsd:element name="Key" type="xsd:string"/>
      <xsd:element name="Value" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Criterion" type="tns:CriterionType"></xsd:element>
  <xsd:complexType name="CriteriaType">
    <xsd:sequence>
      <xsd:element name="Criterion" type="tns:CriterionType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Criteria" type="tns:CriteriaType"></xsd:element>
  <xsd:complexType name="ReferenceParameterType">
    <xsd:sequence>
      <xsd:element name="Prefix" type="xsd:string" minOccurs="0"/>
      <xsd:element name="Namespace" type="xsd:string"/>
      <xsd:element name="ElementName" type="xsd:string"/>
      <xsd:element name="Value" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="ReferenceParameter" type="tns:ReferenceParameterType"></xsd:element>
  <xsd:complexType name="ReferenceParametersType">
    <xsd:sequence>
      <xsd:element name="ReferenceParameter" type="tns:ReferenceParameterType" maxOccurs="unbounded" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="ReferenceParameters" type="tns:ReferenceParametersType"></xsd:element>
  <xsd:complexType name="SubscriptionReferencesType">
    <xsd:sequence>
      <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionReferences" type="tns:SubscriptionReferencesType"></xsd:element>
  <xsd:complexType name="SubscribeDocumentRequestType">
    <xsd:sequence>
      <xsd:element name="Assertion" type="nccommon:AssertionType"/>
      <xsd:element name="Subscribe" type="tns:SubscribeDocumentType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeDocumentRequest" type="tns:SubscribeDocumentRequestType"></xsd:element>
  <!--begin CdcBioPackage messages-->
  <!--<xsd:complexType name="SubscribeCdcBioPackageRequestType">
        <xsd:sequence>
            <xsd:element name="Assertion" type="nccommon:AssertionType"/>
            <xsd:element name="Subscribe" type="tns:SubscribeBioPackageType"/>
            <xsd:element name="TargetHomeCommunity" type="nccommon:HomeCommunityType"/>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="SubscribeCdcBioPackageRequest" type="tns:SubscribeCdcBioPackageRequestType">
    </xsd:element>
    <xsd:complexType name="NotifyOfCdcBioPackageType">
        <xsd:sequence>
            <xsd:element name="Assertion" type="nccommon:AssertionType">
            </xsd:element>
            <xsd:element name="Notify" type="subb2obcdc:NotifyCdcBioPackageType">
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="NotifySubscribersOfCdcBioPackage" type="tns:NotifyOfCdcBioPackageType"/>
    <xsd:element name="NotifyOfCdcBioPackage" type="tns:NotifyOfCdcBioPackageType"/>-->
  <!--end CdcBioPackage messages-->
  <xsd:complexType name="UnsubscribeType">
    <xsd:sequence>
      <xsd:element name="subscriptionReference" type="tns:SubscriptionReferenceType"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Unsubscribe" type="tns:UnsubscribeType"></xsd:element>
  <!--<xsd:complexType name="NotifyOfDocumentType">
        <xsd:sequence>
            <xsd:element name="Assertion" type="nccommon:AssertionType"/>
            <xsd:element ref="rim:RegistryObjectList" minOccurs="0"/>
            <xsd:element name="Notify" type="tns:NotifyDocumentType"/>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="NotifyOfDocument" type="tns:NotifyOfDocumentType">
    </xsd:element>
    <xsd:element name="NotifySubscribersOfDocument" type="tns:NotifyOfDocumentType">
    </xsd:element>-->
  <xsd:complexType name="EmptyType">
    <xsd:sequence>
      <xsd:element name="notUsed" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Empty" type="tns:EmptyType"></xsd:element>
  <xsd:complexType name="AckInputType">
    <xsd:sequence>
      <xsd:element name="notUsed" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="AckInput" type="tns:AckInputType"></xsd:element>
  <xsd:complexType name="DeleteSubscriptionMessageRequestType">
    <xsd:sequence>
      <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="DeleteSubscriptionMessageRequest" type="tns:DeleteSubscriptionMessageRequestType"></xsd:element>
  <xsd:complexType name="RetrieveBySubscriptionReferenceRequestMessageType">
    <xsd:sequence>
      <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RetrieveBySubscriptionReferenceRequestMessage" type="tns:RetrieveBySubscriptionReferenceRequestMessageType"></xsd:element>
  <xsd:complexType name="RetrieveByParentSubscriptionReferenceMessageType">
    <xsd:sequence>
      <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RetrieveByParentSubscriptionReferenceMessage" type="tns:RetrieveByParentSubscriptionReferenceMessageType"></xsd:element>
  <xsd:complexType name="UpdateCppRequestType">
    <xsd:sequence>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="RetrieveDocumentSetRequest" type="ihe:RetrieveDocumentSetRequestType"/>
      <xsd:element name="ExtrinsicObject" type="rim:ExtrinsicObjectType"/>
      <xsd:element name="optInOutFlag" type="xsd:boolean"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="UpdateCppRequest" type="tns:UpdateCppRequestType"></xsd:element>
  <xsd:complexType name="UpdateCppResponseType">
    <xsd:sequence>
      <xsd:element name="message" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="UpdateCppResponse" type="tns:UpdateCppResponseType"></xsd:element>
  <xsd:complexType name="InternalNhieUnsubscribeType">
    <xsd:sequence>
      <xsd:element ref="tns:SubscriptionReference"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="InternalNhieUnsubscribe" type="tns:InternalNhieUnsubscribeType"></xsd:element>
  <xsd:complexType name="InternalNhieUnsubscribeResponseType">
    <xsd:sequence>
      <xsd:element name="notUsed" type="xsd:string"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="InternalNhieUnsubscribeResponse" type="tns:InternalNhieUnsubscribeResponseType"></xsd:element>
  <xsd:complexType name="NotifyWrapperType">
    <xsd:sequence>
      <xsd:element name="Assertion" type="nccommon:AssertionType"/>
      <xsd:element ref="wsnt:Notify"/>
      <xsd:element name="TargetHomeCommunity" type="nccommon:HomeCommunityType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotifyWrapper" type="tns:NotifyWrapperType"/>
  <xsd:complexType name="TopicExpressionType">
    <xsd:simpleContent>
      <xsd:extension base="tns:TopicExpressionValue">
        <xsd:attribute name="Dialect" use="required">
          <xsd:simpleType>
            <xsd:restriction base="xsd:string">
              <xsd:enumeration value="text"/>
            </xsd:restriction>
          </xsd:simpleType>
        </xsd:attribute>
      </xsd:extension>
    </xsd:simpleContent>
  </xsd:complexType>
  <xsd:element name="TopicExpression" type="tns:TopicExpressionType"/>
  <xsd:simpleType name="TopicExpressionValue">
    <xsd:restriction base="xsd:string"/>
  </xsd:simpleType>
  <xsd:complexType name="SubscriptionPolicyType">
    <xsd:sequence>
      <xsd:element name="GenericPolicyItems" type="tns:KeyValuePairListType" minOccurs="0"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionPolicy" type="tns:SubscriptionPolicyType"/>
  <xsd:complexType name="KeyValuePairType">
    <xsd:sequence>
      <xsd:element name="Key" type="xsd:string"/>
      <xsd:element name="Value" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="KeyValuePair" type="tns:KeyValuePairType"/>
  <xsd:complexType name="KeyValuePairListType">
    <xsd:sequence>
      <xsd:element name="KeyValuePair" type="tns:KeyValuePairType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="KeyValuePairList" type="tns:KeyValuePairListType"/>
  <xsd:complexType name="SubscribeDocumentType">
    <xsd:sequence>
      <xsd:element name="ConsumerReference" type="addr:EndpointReferenceType"></xsd:element>
      <xsd:element name="AdhocQuery" type="rim:AdhocQueryType"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeDocument" type="tns:SubscribeDocumentType"></xsd:element>
  <!--<xsd:complexType name="NotificationMessageHolderType">
        <xsd:sequence>
            <xsd:element ref="wsnt:SubscriptionReference" minOccurs="0"/>
            <xsd:element name="Message">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element ref="ihe:RetrieveDocumentSetRequest"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="NotificationMessageHolder" type="tns:NotificationMessageHolderType">
    </xsd:element>
    <xsd:complexType name="NotifyDocumentType">
        <xsd:sequence>
            <xsd:element name="NotificationMessage" type="tns:NotificationMessageHolderType" maxOccurs="unbounded" minOccurs="0">
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="NotifyDocument" type="tns:NotifyDocumentType">
    </xsd:element>
    <xsd:complexType name="SubscribeBioPackageType">
        <xsd:sequence>
            <xsd:element ref="wsnt:ConsumerReference" minOccurs="0"/>
            <xsd:element ref="wsnt:Filter" minOccurs="0"/>
            <xsd:element name="SubscriptionPolicy" type="subb2obcdc:SubscriptionPolicyType">
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="SubscribeBioPackage" type="tns:SubscribeBioPackageType">
    </xsd:element>-->
  <xsd:complexType name="MessageTypesType">
    <xsd:sequence>
      <xsd:element name="MessageType" type="xsd:string" maxOccurs="unbounded" minOccurs="0"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="MessageTypes" type="tns:MessageTypesType"></xsd:element>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\Cdc.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="http://www.hhs.gov/healthit/nhin/cdc" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.hhs.gov/healthit/nhin/cdc">
  <xsd:complexType name="CdcBioPackageSubscriptionCriteriaType">
    <xsd:sequence>
      <xsd:element name="Frequency" minOccurs="0">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="FrequencyUnits" type="xsd:integer"/>
            <xsd:element name="FrequencyDuration" type="xsd:string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="SizeThreshold" type="xsd:integer" minOccurs="0"/>
      <xsd:element name="MessageTypes" type="tns:MessageTypesType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="MessageTypesType">
    <xsd:sequence>
      <xsd:element name="MessageType" type="xsd:string" maxOccurs="unbounded" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="CdcBioPackageSubscriptionCriteria" type="tns:CdcBioPackageSubscriptionCriteriaType"/>
  <xsd:simpleType name="CdcBioPackagePayloadType">
    <xsd:restriction base="xsd:base64Binary"/>
  </xsd:simpleType>
  <xsd:element name="CdcBioPackagePayload" type="tns:CdcBioPackagePayloadType"/>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\SubscriptionB2OverrideForCdc.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:xdsb="urn:ihe:iti:xds-b:2007" xmlns:addr="http://www.w3.org/2005/08/addressing" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:nhin-cdc="http://www.hhs.gov/healthit/nhin/cdc">
  <xsd:import schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd" namespace="http://www.w3.org/2005/08/addressing"/>
  <xsd:import schemaLocation="../../docs.oasis-open.org/wsn/b-2.xsd" namespace="http://docs.oasis-open.org/wsn/b-2"/>
  <xsd:import schemaLocation="../common/Cdc.xsd" namespace="http://www.hhs.gov/healthit/nhin/cdc"/>
  <xsd:complexType name="SubscribeCdcBioPackageType">
    <xsd:sequence>
      <!--<xsd:element name="ConsumerReference" type="addr:EndpointReferenceType"></xsd:element>
            <xsd:element name="Filter" type="wsnt:FilterType" minOccurs="0"></xsd:element>
            <xsd:element name="SubscriptionPolicy" type="tns:SubscriptionPolicy"></xsd:element>-->
      <xsd:element ref="wsnt:ConsumerReference" minOccurs="0"/>
      <xsd:element ref="wsnt:Filter" minOccurs="0"/>
      <xsd:element name="SubscriptionPolicy" type="tns:SubscriptionPolicyType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="SubscriptionPolicyType">
    <xsd:sequence>
      <xsd:element ref="nhin-cdc:CdcBioPackageSubscriptionCriteria"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="NotificationMessageHolderType">
    <xsd:sequence>
      <xsd:element ref="wsnt:SubscriptionReference" minOccurs="0"/>
      <xsd:element ref="wsnt:Topic" minOccurs="0"/>
      <xsd:element name="Message">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element ref="nhin-cdc:CdcBioPackagePayload"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="NotifyCdcBioPackageType">
    <xsd:sequence>
      <xsd:element name="NotificationMessage" type="tns:NotificationMessageHolderType" maxOccurs="unbounded" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\SubscriptionB2OverrideForDocuments.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:xdsb="urn:ihe:iti:xds-b:2007" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:addr="http://www.w3.org/2005/08/addressing" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2">
  <xsd:import schemaLocation="../../ihe/XDS.b_DocumentRepository.xsd" namespace="urn:ihe:iti:xds-b:2007"/>
  <xsd:import schemaLocation="../../ebRS/rim.xsd" namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"/>
  <xsd:import schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd" namespace="http://www.w3.org/2005/08/addressing"/>
  <xsd:import schemaLocation="../../docs.oasis-open.org/wsn/b-2.xsd" namespace="http://docs.oasis-open.org/wsn/b-2"/>
  <!--<xsd:complexType name="UnsubscribeType">
        <xsd:sequence>
            <xsd:element name="Assertion" type="assert:assertion"></xsd:element>
            <xsd:any/>
        </xsd:sequence>
    </xsd:complexType>-->
  <xsd:complexType name="SubscribeDocumentType">
    <xsd:sequence>
      <xsd:element name="ConsumerReference" type="addr:EndpointReferenceType"/>
      <xsd:element name="AdhocQuery" type="rim:AdhocQueryType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="NotificationMessageHolderType">
    <xsd:sequence>
      <xsd:element ref="wsnt:SubscriptionReference" minOccurs="0"/>
      <xsd:element ref="wsnt:Topic" minOccurs="0"/>
      <xsd:element name="Message">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element ref="xdsb:RetrieveDocumentSetRequest"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="NotifyDocumentType">
    <xsd:sequence>
      <xsd:element name="NotificationMessage" type="tns:NotificationMessageHolderType" maxOccurs="unbounded" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ebRS\edxl-de.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:oasis:names:tc:emergency:EDXL:DE:1.0" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.0CD" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="urn:oasis:names:tc:emergency:EDXL:DE:1.0" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
  <xsd:element name="EDXLDistribution">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="distributionID" type="xsd:string"/>
        <xsd:element name="senderID" type="xsd:string"/>
        <xsd:element name="dateTimeSent" type="xsd:dateTime"/>
        <xsd:element name="distributionStatus" type="statusValues"/>
        <xsd:element name="distributionType" type="typeValues"/>
        <xsd:element name="combinedConfidentiality" type="xsd:string"/>
        <xsd:element name="language" type="xsd:string" minOccurs="0"/>
        <xsd:element name="senderRole" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="recipientRole" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="keyword" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="distributionReference" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="explicitAddress" type="valueSchemeType" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="targetArea" type="targetAreaType" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="contentObject" type="contentObjectType" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:annotation/>
  <xsd:annotation/>
  <xsd:complexType name="contentObjectType">
    <xsd:sequence>
      <xsd:element name="contentDescription" type="xsd:string" minOccurs="0"/>
      <xsd:element name="contentKeyword" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="incidentID" type="xsd:string" minOccurs="0"/>
      <xsd:element name="incidentDescription" type="xsd:string" minOccurs="0"/>
      <xsd:element name="originatorRole" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="consumerRole" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="confidentiality" type="xsd:string" minOccurs="0"/>
      <xsd:choice>
        <xsd:element name="nonXMLContent" type="nonXMLContentType"/>
        <xsd:element name="xmlContent" type="xmlContentType"/>
      </xsd:choice>
      <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="nonXMLContentType">
    <xsd:sequence>
      <xsd:element name="mimeType" type="xsd:string"/>
      <xsd:element name="size" type="xsd:integer" minOccurs="0"/>
      <xsd:element name="digest" type="xsd:string" minOccurs="0"/>
      <xsd:element name="uri" type="xsd:anyURI" minOccurs="0"/>
      <xsd:element name="contentData" type="xsd:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="xmlContentType">
    <xsd:sequence>
      <xsd:element name="keyXMLContent" type="anyXMLType" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="embeddedXMLContent" type="anyXMLType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="anyXMLType">
    <xsd:sequence>
      <xsd:any namespace="##other" processContents="lax" maxOccurs="unbounded"/>
    </xsd:sequence>
    <xsd:anyAttribute namespace="##other" processContents="lax"/>
  </xsd:complexType>
  <xsd:complexType name="valueListType">
    <xsd:sequence>
      <xsd:element name="valueListUrn" type="xsd:string"/>
      <xsd:element name="value" type="xsd:string" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="valueSchemeType">
    <xsd:sequence>
      <xsd:element name="explicitAddressScheme" type="xsd:string"/>
      <xsd:element name="explicitAddressValue" type="xsd:string" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="targetAreaType">
    <xsd:sequence>
      <xsd:element name="circle" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="polygon" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="country" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="subdivision" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="locCodeUN" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:simpleType name="statusValues">
    <xsd:restriction base="xsd:NMTOKEN">
      <xsd:enumeration value="Actual"/>
      <xsd:enumeration value="Exercise"/>
      <xsd:enumeration value="System"/>
      <xsd:enumeration value="Test"/>
    </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="typeValues">
    <xsd:restriction base="xsd:NMTOKEN">
      <xsd:enumeration value="Report"/>
      <xsd:enumeration value="Update"/>
      <xsd:enumeration value="Cancel"/>
      <xsd:enumeration value="Request"/>
      <xsd:enumeration value="Response"/>
      <xsd:enumeration value="Dispatch"/>
      <xsd:enumeration value="Ack"/>
      <xsd:enumeration value="Error"/>
      <xsd:enumeration value="SensorConfiguration"/>
      <xsd:enumeration value="SensorControl"/>
      <xsd:enumeration value="SensorStatus"/>
      <xsd:enumeration value="SensorDetection"/>
    </xsd:restriction>
  </xsd:simpleType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\caqh\CORERule2.2.0.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://www.caqh.org/SOAP/WSDL/CORERule2.2.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.caqh.org/SOAP/WSDL/CORERule2.2.0.xsd" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
  <xs:element name="COREEnvelopeRealTimeRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="RealTimeMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeRealTimeResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="RealTimeMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="ErrorCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ErrorMessage" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchSubmission">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="1" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchSubmissionResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
        <xs:element name="ErrorCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ErrorMessage" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchSubmissionAckRetrievalRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchSubmissionAckRetrievalResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
        <xs:element name="ErrorCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ErrorMessage" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchResultsRetrievalRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchResultsRetrievalResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
        <xs:element name="ErrorCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ErrorMessage" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchResultsAckSubmission">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchResultsAckSubmissionResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
        <xs:element name="ErrorCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ErrorMessage" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:simpleType name="RealTimeMode">
    <xs:restriction base="xs:string">
      <xs:pattern value="RealTime"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="BatchMode">
    <xs:restriction base="xs:string">
      <xs:pattern value="Batch"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints>
      <con:endpoint>${#TestSuite#Endpoint-XDREntity}</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/Gateway/DocumentSubmission/1_1/EntityService/EntityDocSubmissionUnsecured</con:endpoint>
      <con:endpoint>http://localhost:8080/CONNECTGateway/EntityService/EntityDocSubmissionUnsecured</con:endpoint>
    </con:endpoints>
    <con:operation action="" anonymous="optional" bindingOperationName="ProvideAndRegisterDocumentSet-b" inputName="" isOneWay="false" name="ProvideAndRegisterDocumentSet-b" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="8e18d70b-c632-420a-ac0c-cc71b4115b7a">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:nhincentityxdr:async:response}EntityXDRAsyncResponse_Binding" definition="../../../target/wsdl/EntityXDRResponse.wsdl" name="EntityXDRAsyncResponse_Binding" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="092da90c-575f-4750-b484-1898cc96fea7" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache/><con:endpoints>
      <con:endpoint>${#TestSuite#Endpoint-DSDeferredResp}</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/EntityService/EntityXDRAsyncResponse</con:endpoint>
    </con:endpoints>
    <con:operation action="" anonymous="optional" bindingOperationName="ProvideAndRegisterDocumentSet-bAsyncResponse" inputName="" isOneWay="false" name="ProvideAndRegisterDocumentSet-bAsyncResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="5f19da53-a9c3-48c7-9084-f2af01377f66">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:nhincentityxdr:async:request}EntityXDRAsyncRequest_Binding" definition="../../../target/wsdl/EntityXDRRequest.wsdl" name="EntityXDRAsyncRequest_Binding" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="0e5015f2-97e8-4682-95ca-eb33ed4414d7" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache type="TEXT" rootPart="file:/C:/dev/CONNECT/Product/SoapUI_Test/target/wsdl/EntityXDRRequest.wsdl"><con:part><con:url>file:/C:/dev/CONNECT/Product/SoapUI_Test/target/wsdl/EntityXDRRequest.wsdl</con:url><con:content><![CDATA[<!--This wsdl file is for an XDS.b Document Repository Actor-->
<definitions name="NhincEntityXDRRequest" targetNamespace="urn:gov:hhs:fha:nhinc:nhincentityxdr:async:request" xmlns:tns="urn:gov:hhs:fha:nhinc:nhincentityxdr:async:request" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:ihe="urn:ihe:iti:xds-b:2007" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsoma="http://schemas.xmlsoap.org/ws/2004/09/policy/optimizedmimeserialization" xmlns:nccommonentity="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:wsaws="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:xdr="http://www.hhs.gov/healthit/nhin">
  <documentation>IHE XDR Document Repository</documentation>
  <types>
    <xsd:schema>
      <xsd:import namespace="http://www.hhs.gov/healthit/nhin" schemaLocation="../schemas/nhin/xdr.xsd"/>
      <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="../schemas/ebRS/rs.xsd"/>
      <xsd:import namespace="urn:ihe:iti:xds-b:2007" schemaLocation="../schemas/ihe/XDS.b_DocumentRepository.xsd"/>
      <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" schemaLocation="../schemas/ebRS/query.xsd"/>
      <xsd:import namespace="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" schemaLocation="../schemas/nhinc/common/NhincCommonEntity.xsd"/>
    </xsd:schema>
  </types>
  <message name="ProvideAndRegisterDocumentSet-bAsyncRequest_RequestMessage">
    <documentation>Provide and Register Document Set Request - Request</documentation>
    <part name="ProvideAndRegisterAsyncReqRequest" element="nccommonentity:RespondingGateway_ProvideAndRegisterDocumentSetRequest"/>
  </message>
  <message name="ProvideAndRegisterDocumentSet-bAsyncRequest_ResponseMessage">
    <documentation>Provide And Register Document Set Request - Response</documentation>
    <part name="ProvideAndRegisterAsyncReqResponse" element="xdr:XDRAcknowledgement"/>
  </message>
  <portType name="EntityXDRAsyncRequest_PortType">
    <operation name="ProvideAndRegisterDocumentSet-bAsyncRequest">
      <input message="tns:ProvideAndRegisterDocumentSet-bAsyncRequest_RequestMessage" wsaw:Action="urn:gov:hhs:fha:nhinc:nhincentityxdr:async:request:ProvideAndRegisterDocumentSet-bAsyncRequest_RequestMessage"/>
      <output message="tns:ProvideAndRegisterDocumentSet-bAsyncRequest_ResponseMessage" wsaw:Action="urn:gov:hhs:fha:nhinc:nhincentityxdr:async:request:ProvideAndRegisterDocumentSet-bAsyncRequest_ResponseMessage"/>
    </operation>
  </portType>
  <binding name="EntityXDRAsyncRequest_Binding" type="tns:EntityXDRAsyncRequest_PortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsp:PolicyReference URI="#RespondingGateway_XDR_Binding_SoapPolicy"/>
    <operation name="ProvideAndRegisterDocumentSet-bAsyncRequest">
      <input>
        <soap:body use="literal"/>
        <wsp:PolicyReference URI="#RespondingGateway_Retrieve_Binding_Soap_Input_Policy"/>
      </input>
      <output>
        <soap:body use="literal"/>
        <wsp:PolicyReference URI="#RespondingGateway_Retrieve_Binding_Soap_Output_Policy"/>
      </output>
    </operation>
  </binding>
  <service name="EntityXDRAsyncRequest_Service">
    <port name="EntityXDRAsyncRequest_Port" binding="tns:EntityXDRAsyncRequest_Binding">
      <soap:address location="http://localhost:${HttpDefaultPort}/Gateway/DocumentSubmission/1_1/EntityService/EntityDocSubmissionDeferredRequestUnsecured"/>
    </port>
  </service>
  <wsp:Policy wsu:Id="RespondingGateway_XDR_Binding_SoapPolicy">
    <wsp:ExactlyOne>
      <wsp:All></wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsp:Policy wsu:Id="RespondingGateway_Retrieve_Binding_Soap_Input_Policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <wsoma:OptimizedMimeSerialization wsp:Optional="true"/>
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsp:Policy wsu:Id="RespondingGateway_Retrieve_Binding_Soap_Output_Policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <wsoma:OptimizedMimeSerialization wsp:Optional="true"/>
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhin\xdr.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="http://www.hhs.gov/healthit/nhin" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:tns="http://www.hhs.gov/healthit/nhin">
  <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="../ebRS/rs.xsd"/>
  <xsd:complexType name="XDRAcknowledgementType">
    <xsd:sequence>
      <xsd:element name="message" type="rs:RegistryResponseType" minOccurs="1"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="XDRAcknowledgement" type="tns:XDRAcknowledgementType"/>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ebRS\rs.xsd</con:url><con:content><![CDATA[<!--$Header: /cvsroot/ebxmlrr/ebxmlrr-spec/misc/3.0/schema/rs.xsd,v 1.9 2005/01/31 22:33:54 farrukh_najmi Exp $-->
<schema targetNamespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:tns="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0">
  <annotation>
    <documentation xml:lang="en">The schema for OASIS ebXML Registry Services</documentation>
  </annotation>
  <!--Import the rim.xsd file with XML schema mappaing from RIM-->
  <import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" schemaLocation="rim.xsd"/>
  <complexType name="RegistryRequestType">
    <annotation>
      <documentation xml:lang="en">Base type for all ebXML Registry requests</documentation>
    </annotation>
    <sequence>
      <!--every request may be extended using Slots.-->
      <element maxOccurs="1" minOccurs="0" name="RequestSlotList" type="rim:SlotListType"/>
    </sequence>
    <attribute name="id" type="anyURI" use="optional"/>
    <!--Comment may be used by requestor to describe the request. Used in VersionInfo.comment-->
    <attribute name="comment" type="string" use="optional"/>
  </complexType>
  <element name="RegistryRequest" type="tns:RegistryRequestType"/>
  <element name="RegistryErrorList">
    <annotation>
      <documentation xml:lang="en">The RegistryErrorList is derived from the ErrorList element from the ebXML Message Service Specification</documentation>
    </annotation>
    <complexType>
      <sequence>
        <element maxOccurs="unbounded" ref="tns:RegistryError"/>
      </sequence>
      <attribute name="highestSeverity" type="rim:referenceURI" use="optional"/>
    </complexType>
  </element>
  <element name="RegistryError">
    <complexType>
      <simpleContent>
        <extension base="string">
          <attribute name="codeContext" type="string" use="required"/>
          <attribute name="errorCode" type="string" use="required"/>
          <attribute default="urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error" name="severity" type="rim:referenceURI"/>
          <attribute name="location" type="string" use="optional"/>
        </extension>
      </simpleContent>
    </complexType>
  </element>
  <complexType name="RegistryResponseType">
    <annotation>
      <documentation xml:lang="en">Base type for all ebXML Registry responses</documentation>
    </annotation>
    <sequence>
      <!--every response may be extended using Slots.-->
      <element maxOccurs="1" minOccurs="0" name="ResponseSlotList" type="rim:SlotListType"/>
      <element minOccurs="0" ref="tns:RegistryErrorList"/>
    </sequence>
    <attribute name="status" type="rim:referenceURI" use="required"/>
    <!--id is the request if for the request for which this is a response-->
    <attribute name="requestId" type="anyURI" use="optional"/>
  </complexType>
  <element name="RegistryResponse" type="tns:RegistryResponseType"/>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ebRS\rim.xsd</con:url><con:content><![CDATA[<!--$Header: /cvsroot/ebxmlrr/ebxmlrr-spec/misc/3.0/schema/rim.xsd,v 1.20 2005/02/03 19:28:15 farrukh_najmi Exp $-->
<schema targetNamespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
  <annotation>
    <documentation xml:lang="en">The schema for OASIS ebXML Registry Information Model</documentation>
  </annotation>
  <import namespace="http://www.w3.org/XML/1998/namespace" schemaLocation="../www.w3.org/2001/xml.xsd"/>
  <!--Begin information model mapping from ebRIM.-->
  <!--Define Data Types-->
  <simpleType name="referenceURI">
    <annotation>
      <documentation xml:lang="en">referenceURI is used by reference attributes within RIM.
        Each attribute of type referenceURI references a RegistryObject with
        specified URI as id.</documentation>
    </annotation>
    <restriction base="anyURI"/>
  </simpleType>
  <simpleType name="String4">
    <restriction base="string">
      <maxLength value="4"/>
    </restriction>
  </simpleType>
  <simpleType name="String8">
    <restriction base="string">
      <maxLength value="8"/>
    </restriction>
  </simpleType>
  <simpleType name="String16">
    <restriction base="string">
      <maxLength value="16"/>
    </restriction>
  </simpleType>
  <simpleType name="String32">
    <restriction base="string">
      <maxLength value="32"/>
    </restriction>
  </simpleType>
  <simpleType name="ShortName">
    <restriction base="string">
      <maxLength value="64"/>
    </restriction>
  </simpleType>
  <simpleType name="LongName">
    <restriction base="string">
      <maxLength value="256"/>
    </restriction>
  </simpleType>
  <simpleType name="FreeFormText">
    <restriction base="string">
      <maxLength value="1024"/>
    </restriction>
  </simpleType>
  <complexType name="InternationalStringType">
    <sequence maxOccurs="unbounded" minOccurs="0">
      <element ref="tns:LocalizedString"/>
    </sequence>
  </complexType>
  <element name="InternationalString" type="tns:InternationalStringType"/>
  <element name="Name" type="tns:InternationalStringType"/>
  <element name="Description" type="tns:InternationalStringType"/>
  <complexType name="LocalizedStringType">
    <attribute ref="xml:lang" default="en-US"/>
    <attribute default="UTF-8" name="charset"/>
    <attribute name="value" type="tns:FreeFormText" use="required"/>
  </complexType>
  <element name="LocalizedString" type="tns:LocalizedStringType"/>
  <complexType name="SlotType1">
    <sequence>
      <element maxOccurs="1" minOccurs="1" ref="tns:ValueList"/>
    </sequence>
    <attribute name="name" type="tns:LongName" use="required"/>
    <!--slotType value MUST reference a ClassificationNode in the canonical DataType scheme-->
    <attribute name="slotType" type="tns:referenceURI" use="optional"/>
  </complexType>
  <element name="Slot" type="tns:SlotType1"/>
  <complexType name="ValueListType">
    <sequence maxOccurs="unbounded" minOccurs="0">
      <element ref="tns:Value"/>
    </sequence>
  </complexType>
  <element name="ValueList" type="tns:ValueListType"/>
  <element name="Value" type="tns:LongName"/>
  <complexType name="SlotListType">
    <sequence>
      <element maxOccurs="unbounded" minOccurs="0" ref="tns:Slot"/>
    </sequence>
  </complexType>
  <element name="SlotList" type="tns:SlotListType"/>
  <complexType name="IdentifiableType">
    <annotation>
      <documentation xml:lang="en">Common base type for all types that have unique identity.     
        If id is provided and is not in proper URN syntax then it is used for
        linkage within document and is ignored by the registry. In this case the
        registry generates a UUID URN for id attribute.
        id must not be null when object is retrieved from the registry.</documentation>
    </annotation>
    <sequence>
      <element maxOccurs="unbounded" minOccurs="0" ref="tns:Slot"/>
    </sequence>
    <attribute name="id" type="anyURI" use="required"/>
    <!--home attribute is required only for remote ObjectRef-->
    <attribute name="home" type="anyURI" use="optional"/>
  </complexType>
  <element name="Identifiable" type="tns:IdentifiableType"/>
  <complexType name="ObjectRefType">
    <annotation>
      <documentation xml:lang="en">Use to reference an Object by its id.
        Specifies the id attribute of the object as its id attribute.
        id attribute in ObjectAttributes is exactly the same syntax and semantics as
        id attribute in RegistryObject.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:IdentifiableType">
        <!--When true and is a remote ObjectRef then the registry must create a replica for this ObjectRef-->
        <attribute default="false" name="createReplica" type="boolean"/>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="ObjectRefListType">
    <sequence maxOccurs="unbounded" minOccurs="0">
      <element ref="tns:ObjectRef"/>
    </sequence>
  </complexType>
  <element name="ObjectRefList" type="tns:ObjectRefListType"/>
  <element name="ObjectRef" type="tns:ObjectRefType" substitutionGroup="tns:Identifiable"/>
  <complexType name="RegistryObjectType">
    <complexContent>
      <extension base="tns:IdentifiableType">
        <sequence maxOccurs="1" minOccurs="0">
          <element maxOccurs="1" minOccurs="0" ref="tns:Name"/>
          <element maxOccurs="1" minOccurs="0" ref="tns:Description"/>
          <element maxOccurs="1" minOccurs="0" name="VersionInfo" type="tns:VersionInfoType"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:Classification"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ExternalIdentifier"/>
        </sequence>
        <attribute name="lid" type="anyURI" use="optional"/>
        <attribute name="objectType" type="tns:referenceURI" use="optional"/>
        <attribute name="status" type="tns:referenceURI" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="RegistryObject" type="tns:RegistryObjectType" substitutionGroup="tns:Identifiable"/>
  <complexType name="RegistryObjectListType">
    <sequence>
      <element maxOccurs="unbounded" minOccurs="0" ref="tns:Identifiable"/>
    </sequence>
  </complexType>
  <element name="RegistryObjectList" type="tns:RegistryObjectListType"/>
  <complexType name="AssociationType1">
    <annotation>
      <documentation xml:lang="en">Association is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.
        An Association specifies references to two previously submitted
        registry entrys.
        The sourceObject is id of the sourceObject in association
        The targetObject is id of the targetObject in association</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute name="associationType" type="tns:referenceURI" use="required"/>
        <attribute name="sourceObject" type="tns:referenceURI" use="required"/>
        <attribute name="targetObject" type="tns:referenceURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Association" type="tns:AssociationType1" substitutionGroup="tns:Identifiable"/>
  <complexType name="AuditableEventType">
    <annotation>
      <documentation xml:lang="en">An Event that forms an audit trail in ebXML Registry.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <!--List of all objects that have been effected by this event-->
          <element maxOccurs="1" minOccurs="1" name="affectedObjects" type="tns:ObjectRefListType"/>
        </sequence>
        <attribute name="eventType" type="tns:referenceURI" use="required"/>
        <attribute name="timestamp" type="dateTime" use="required"/>
        <attribute name="user" type="tns:referenceURI" use="required"/>
        <attribute name="requestId" type="tns:referenceURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="AuditableEvent" type="tns:AuditableEventType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ClassificationType">
    <annotation>
      <documentation xml:lang="en">Classification is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.
        A Classification specifies references to two registry entrys.
        The classifiedObject is id of the Object being classified.
        The classificationNode is id of the ClassificationNode classying the object</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute name="classificationScheme" type="tns:referenceURI" use="optional"/>
        <attribute name="classifiedObject" type="tns:referenceURI" use="required"/>
        <attribute name="classificationNode" type="tns:referenceURI" use="optional"/>
        <attribute name="nodeRepresentation" type="tns:LongName" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Classification" type="tns:ClassificationType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ClassificationNodeType">
    <annotation>
      <documentation xml:lang="en">ClassificationNode is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.
        ClassificationNode is used to submit a Classification tree to the Registry.
        The parent attribute is the id to the parent node. code is an optional code value for a ClassificationNode
        often defined by an external taxonomy (e.g. NAICS)</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ClassificationNode"/>
        </sequence>
        <attribute name="parent" type="tns:referenceURI" use="optional"/>
        <attribute name="code" type="tns:LongName" use="optional"/>
        <attribute name="path" type="string" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ClassificationNode" type="tns:ClassificationNodeType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ClassificationSchemeType">
    <annotation>
      <documentation xml:lang="en">ClassificationScheme is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ClassificationNode"/>
        </sequence>
        <attribute name="isInternal" type="boolean" use="required"/>
        <attribute name="nodeType" type="tns:referenceURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ClassificationScheme" type="tns:ClassificationSchemeType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ExternalIdentifierType">
    <annotation>
      <documentation xml:lang="en">ExternalIdentifier is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute name="registryObject" type="tns:referenceURI" use="required"/>
        <attribute name="identificationScheme" type="tns:referenceURI" use="required"/>
        <attribute name="value" type="tns:LongName" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ExternalIdentifier" type="tns:ExternalIdentifierType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ExternalLinkType">
    <annotation>
      <documentation xml:lang="en">ExternalLink is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute name="externalURI" type="anyURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ExternalLink" type="tns:ExternalLinkType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ExtrinsicObjectType">
    <annotation>
      <documentation xml:lang="en">ExtrinsicObject is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="ContentVersionInfo" type="tns:VersionInfoType"/>
        </sequence>
        <attribute default="application/octet-stream" name="mimeType" type="tns:LongName"/>
        <attribute default="false" name="isOpaque" type="boolean"/>
      </extension>
    </complexContent>
  </complexType>
  <!--Following element decl nneds to be lower case but using upper camel case for backward compatibility-->
  <element name="ExtrinsicObject" type="tns:ExtrinsicObjectType" substitutionGroup="tns:Identifiable"/>
  <element name="Address" type="tns:PostalAddressType"/>
  <complexType name="OrganizationType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:Address"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:TelephoneNumber"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:EmailAddress"/>
        </sequence>
        <attribute name="parent" type="tns:referenceURI"/>
        <attribute name="primaryContact" type="tns:referenceURI" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Organization" type="tns:OrganizationType" substitutionGroup="tns:Identifiable"/>
  <complexType name="PersonNameType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <attribute name="firstName" type="tns:ShortName" use="optional"/>
    <attribute name="middleName" type="tns:ShortName" use="optional"/>
    <attribute name="lastName" type="tns:ShortName" use="optional"/>
  </complexType>
  <element name="PersonName" type="tns:PersonNameType"/>
  <complexType name="EmailAddressType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <attribute name="address" type="tns:ShortName" use="required"/>
    <attribute name="type" type="tns:String32" use="optional"/>
  </complexType>
  <element name="EmailAddress" type="tns:EmailAddressType"/>
  <complexType name="PostalAddressType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <attribute name="city" type="tns:ShortName" use="optional"/>
    <attribute name="country" type="tns:ShortName" use="optional"/>
    <attribute name="postalCode" type="tns:ShortName" use="optional"/>
    <attribute name="stateOrProvince" type="tns:ShortName" use="optional"/>
    <attribute name="street" type="tns:ShortName" use="optional"/>
    <attribute name="streetNumber" type="tns:String32" use="optional"/>
  </complexType>
  <element name="PostalAddress" type="tns:PostalAddressType"/>
  <complexType name="VersionInfoType">
    <attribute name="versionName" type="tns:String16" use="optional" default="1.1"/>
    <attribute name="comment" type="string" use="optional"/>
  </complexType>
  <complexType name="RegistryPackageType">
    <annotation>
      <documentation xml:lang="en">RegistryPackage is the mapping of the same named interface in ebRIM.
        It extends RegistryObject.
        A RegistryPackage is a named collection of objects.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:RegistryObjectList"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="RegistryPackage" type="tns:RegistryPackageType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ServiceType">
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ServiceBinding"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="Service" type="tns:ServiceType" substitutionGroup="tns:Identifiable"/>
  <complexType name="ServiceBindingType">
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:SpecificationLink"/>
        </sequence>
        <attribute name="service" type="tns:referenceURI" use="required"/>
        <attribute name="accessURI" type="anyURI" use="optional"/>
        <attribute name="targetBinding" type="tns:referenceURI" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ServiceBinding" type="tns:ServiceBindingType" substitutionGroup="tns:Identifiable"/>
  <complexType name="SpecificationLinkType">
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:UsageDescription"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:UsageParameter"/>
        </sequence>
        <attribute name="serviceBinding" type="tns:referenceURI" use="required"/>
        <attribute name="specificationObject" type="tns:referenceURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="SpecificationLink" type="tns:SpecificationLinkType" substitutionGroup="tns:Identifiable"/>
  <element name="UsageDescription" type="tns:InternationalStringType"/>
  <element name="UsageParameter" type="tns:FreeFormText"/>
  <complexType name="TelephoneNumberType">
    <annotation>
      <documentation xml:lang="en">TelephoneNumber is the mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <attribute name="areaCode" type="tns:String8" use="optional"/>
    <attribute name="countryCode" type="tns:String8" use="optional"/>
    <attribute name="extension" type="tns:String8" use="optional"/>
    <attribute name="number" type="tns:String16" use="optional"/>
    <attribute name="phoneType" type="tns:String32" use="optional"/>
  </complexType>
  <element name="TelephoneNumber" type="tns:TelephoneNumberType"/>
  <complexType name="TelephoneNumberListType">
    <sequence>
      <element maxOccurs="unbounded" minOccurs="0" ref="tns:TelephoneNumber"/>
    </sequence>
  </complexType>
  <complexType name="PersonType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence maxOccurs="1" minOccurs="1">
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:Address"/>
          <!--PersonName is optional because it is not needed in SAML Profile 
          when an external IdentityProvider is used.-->
          <element maxOccurs="1" minOccurs="0" ref="tns:PersonName"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:TelephoneNumber"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:EmailAddress"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="Person" type="tns:PersonType" substitutionGroup="tns:Identifiable"/>
  <complexType name="UserType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:PersonType"></extension>
    </complexContent>
  </complexType>
  <element name="User" type="tns:UserType" substitutionGroup="tns:Identifiable"/>
  <complexType name="RegistryType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute name="operator" type="tns:referenceURI" use="required"/>
        <attribute name="specificationVersion" type="string" use="required"/>
        <attribute default="P1D" name="replicationSyncLatency" type="duration" use="optional"/>
        <attribute default="P1D" name="catalogingLatency" type="duration" use="optional"/>
        <attribute name="conformanceProfile" use="optional" default="registryLite">
          <simpleType>
            <restriction base="NCName">
              <enumeration value="registryFull"/>
              <enumeration value="registryLite"/>
            </restriction>
          </simpleType>
        </attribute>
      </extension>
    </complexContent>
  </complexType>
  <element name="Registry" type="tns:RegistryType" substitutionGroup="tns:Identifiable"/>
  <complexType name="FederationType">
    <annotation>
      <documentation xml:lang="en">Mapping of the same named interface in ebRIM.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <attribute default="P1D" name="replicationSyncLatency" type="duration" use="optional"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Federation" type="tns:FederationType" substitutionGroup="tns:Identifiable"/>
  <complexType name="AdhocQueryType">
    <annotation>
      <documentation xml:lang="en">A registry query.
      A QueryExpression child element is not required when invoking a stored query.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element ref="tns:QueryExpression" minOccurs="0" maxOccurs="1"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="AdhocQuery" type="tns:AdhocQueryType" substitutionGroup="tns:RegistryObject"/>
  <complexType name="QueryExpressionType" mixed="true">
    <sequence>
      <!--MAY be any query language syntax supported. 
      MUST support FilterQuery. SHOULD support SQLQuery-->
      <any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="1"/>
    </sequence>
    <attribute name="queryLanguage" type="tns:referenceURI" use="required"/>
  </complexType>
  <element name="QueryExpression" type="tns:QueryExpressionType"/>
  <complexType name="NotificationType">
    <annotation>
      <documentation>Notification of registry events.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <!--May contain ObjectRefs and RegistryObjects-->
          <element maxOccurs="1" minOccurs="1" ref="tns:RegistryObjectList"/>
        </sequence>
        <attribute name="subscription" type="tns:referenceURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Notification" type="tns:NotificationType"/>
  <element name="Action" type="tns:ActionType"/>
  <complexType name="SubscriptionType">
    <annotation>
      <documentation xml:lang="en">A Subscription for specified Events in an ebXML V3+ registry.</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:RegistryObjectType">
        <sequence>
          <element ref="tns:Action" minOccurs="0" maxOccurs="unbounded"/>
        </sequence>
        <!--Ref to a AdhocQueryType instance-->
        <attribute name="selector" type="tns:referenceURI" use="required"/>
        <attribute name="startTime" type="dateTime" use="optional"/>
        <attribute name="endTime" type="dateTime" use="optional"/>
        <attribute name="notificationInterval" type="duration" use="optional" default="P1D"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="Subscription" type="tns:SubscriptionType" substitutionGroup="tns:Identifiable"/>
  <complexType abstract="true" name="ActionType">
    <annotation>
      <documentation>Abstract Base type for all types of Actions.</documentation>
    </annotation>
  </complexType>
  <complexType name="NotifyActionType">
    <annotation>
      <documentation xml:lang="en">Abstract Base type for all types of Notify Actions</documentation>
    </annotation>
    <complexContent>
      <extension base="tns:ActionType">
        <attribute default="urn:oasis:names:tc:ebxml-regrep:NotificationOptionType:ObjectRefs" type="tns:referenceURI" name="notificationOption"/>
        <attribute name="endPoint" type="anyURI" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="NotifyAction" type="tns:NotifyActionType" substitutionGroup="tns:Action"/>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\www.w3.org\2001\xml.xsd</con:url><con:content><![CDATA[<?xml-stylesheet href="../2008/09/xsd.xsl" type="text/xsl"?>
<xs:schema targetNamespace="http://www.w3.org/XML/1998/namespace" xml:lang="en" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/1999/xhtml">
  <xs:annotation>
    <xs:documentation>
      <div>
        <h1>About the XML namespace</h1>
        <div class="bodytext">
          <p>This schema document describes the XML namespace, in a form
      suitable for import by other schema documents.</p>
          <p>
            See
            <a href="http://www.w3.org/XML/1998/namespace.html">http://www.w3.org/XML/1998/namespace.html</a>
            and
            <a href="http://www.w3.org/TR/REC-xml">http://www.w3.org/TR/REC-xml</a>
            for information 
      about this namespace.
          </p>
          <p>Note that local names in this namespace are intended to be
      defined only by the World Wide Web Consortium or its subgroups.
      The names currently defined in this namespace are listed below.
      They should not be used with conflicting semantics by any Working
      Group, specification, or document instance.</p>
          <p>
            See further below in this document for more information about
            <a href="#usage">how to refer to this schema document from your own
      XSD schema documents</a>
            and about
            <a href="#nsversioning">the
      namespace-versioning policy governing this schema document</a>
            .
          </p>
        </div>
      </div>
    </xs:documentation>
  </xs:annotation>
  <xs:attribute name="lang">
    <xs:annotation>
      <xs:documentation>
        <div>
          <h3>lang (as an attribute name)</h3>
          <p>denotes an attribute whose value
       is a language code for the natural language of the content of
       any element; its value is inherited.  This name is reserved
       by virtue of its definition in the XML specification.</p>
        </div>
        <div>
          <h4>Notes</h4>
          <p>Attempting to install the relevant ISO 2- and 3-letter
      codes as the enumerated possible values is probably never
      going to be a realistic possibility.</p>
          <p>
            See BCP 47 at
            <a href="http://www.rfc-editor.org/rfc/bcp/bcp47.txt">http://www.rfc-editor.org/rfc/bcp/bcp47.txt</a>
            and the IANA language subtag registry at
            <a href="http://www.iana.org/assignments/language-subtag-registry">http://www.iana.org/assignments/language-subtag-registry</a>
            for further information.
          </p>
          <p>The union allows for the 'un-declaration' of xml:lang with
      the empty string.</p>
        </div>
      </xs:documentation>
    </xs:annotation>
    <xs:simpleType>
      <xs:union memberTypes="xs:language">
        <xs:simpleType>
          <xs:restriction base="xs:string">
            <xs:enumeration value=""/>
          </xs:restriction>
        </xs:simpleType>
      </xs:union>
    </xs:simpleType>
  </xs:attribute>
  <xs:attribute name="space">
    <xs:annotation>
      <xs:documentation>
        <div>
          <h3>space (as an attribute name)</h3>
          <p>denotes an attribute whose
       value is a keyword indicating what whitespace processing
       discipline is intended for the content of the element; its
       value is inherited.  This name is reserved by virtue of its
       definition in the XML specification.</p>
        </div>
      </xs:documentation>
    </xs:annotation>
    <xs:simpleType>
      <xs:restriction base="xs:NCName">
        <xs:enumeration value="default"/>
        <xs:enumeration value="preserve"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:attribute>
  <xs:attribute name="base" type="xs:anyURI">
    <xs:annotation>
      <xs:documentation>
        <div>
          <h3>base (as an attribute name)</h3>
          <p>denotes an attribute whose value
       provides a URI to be used as the base for interpreting any
       relative URIs in the scope of the element on which it
       appears; its value is inherited.  This name is reserved
       by virtue of its definition in the XML Base specification.</p>
          <p>
            See
            <a href="http://www.w3.org/TR/xmlbase/">http://www.w3.org/TR/xmlbase/</a>
            for information about this attribute.
          </p>
        </div>
      </xs:documentation>
    </xs:annotation>
  </xs:attribute>
  <xs:attribute name="id" type="xs:ID">
    <xs:annotation>
      <xs:documentation>
        <div>
          <h3>id (as an attribute name)</h3>
          <p>denotes an attribute whose value
       should be interpreted as if declared to be of type ID.
       This name is reserved by virtue of its definition in the
       xml:id specification.</p>
          <p>
            See
            <a href="http://www.w3.org/TR/xml-id/">http://www.w3.org/TR/xml-id/</a>
            for information about this attribute.
          </p>
        </div>
      </xs:documentation>
    </xs:annotation>
  </xs:attribute>
  <xs:attributeGroup name="specialAttrs">
    <xs:attribute ref="xml:base"/>
    <xs:attribute ref="xml:lang"/>
    <xs:attribute ref="xml:space"/>
    <xs:attribute ref="xml:id"/>
  </xs:attributeGroup>
  <xs:annotation>
    <xs:documentation>
      <div>
        <h3>Father (in any context at all)</h3>
        <div class="bodytext">
          <p>denotes Jon Bosak, the chair of 
      the original XML Working Group.  This name is reserved by 
      the following decision of the W3C XML Plenary and 
      XML Coordination groups:</p>
          <blockquote>
            <p>In appreciation for his vision, leadership and
    dedication the W3C XML Plenary on this 10th day of
    February, 2000, reserves for Jon Bosak in perpetuity
    the XML name "xml:Father".</p>
          </blockquote>
        </div>
      </div>
    </xs:documentation>
  </xs:annotation>
  <xs:annotation>
    <xs:documentation>
      <div xml:id="usage" id="usage">
        <h2>
          <a name="usage">About this schema document</a>
        </h2>
        <div class="bodytext">
          <p>
            This schema defines attributes and an attribute group suitable
      for use by schemas wishing to allow
            <code>xml:base</code>
            ,
            <code>xml:lang</code>
            ,
            <code>xml:space</code>
            or
            <code>xml:id</code>
            attributes on elements they define.
          </p>
          <p>To enable this, such a schema must import this schema for
      the XML namespace, e.g. as follows:</p>
          <pre>&lt;schema . . .>
           . . .
           &lt;import namespace="http://www.w3.org/XML/1998/namespace"
                      schemaLocation="http://www.w3.org/2001/xml.xsd"/></pre>
          <p>or</p>
          <pre>&lt;import namespace="http://www.w3.org/XML/1998/namespace"
                      schemaLocation="http://www.w3.org/2009/01/xml.xsd"/></pre>
          <p>Subsequently, qualified reference to any of the attributes or the
      group defined below will have the desired effect, e.g.</p>
          <pre>&lt;type . . .>
           . . .
           &lt;attributeGroup ref="xml:specialAttrs"/></pre>
          <p>will define a type which will schema-validate an instance element
      with any of those attributes.</p>
        </div>
      </div>
    </xs:documentation>
  </xs:annotation>
  <xs:annotation>
    <xs:documentation>
      <div id="nsversioning" xml:id="nsversioning">
        <h2>
          <a name="nsversioning">Versioning policy for this schema document</a>
        </h2>
        <div class="bodytext">
          <p>
            In keeping with the XML Schema WG's standard versioning
      policy, this schema document will persist at
            <a href="http://www.w3.org/2009/01/xml.xsd">http://www.w3.org/2009/01/xml.xsd</a>
            .
          </p>
          <p>
            At the date of issue it can also be found at
            <a href="http://www.w3.org/2001/xml.xsd">http://www.w3.org/2001/xml.xsd</a>
            .
          </p>
          <p>
            The schema document at that URI may however change in the future,
      in order to remain compatible with the latest version of XML
      Schema itself, or with the XML namespace itself.  In other words,
      if the XML Schema or XML namespaces change, the version of this
      document at
            <a href="http://www.w3.org/2001/xml.xsd">http://www.w3.org/2001/xml.xsd</a>
            will change accordingly; the version at
            <a href="http://www.w3.org/2009/01/xml.xsd">http://www.w3.org/2009/01/xml.xsd</a>
            will not change.
          </p>
          <p>Previous dated (and unchanging) versions of this schema 
      document are at:</p>
          <ul>
            <li>
              <a href="http://www.w3.org/2009/01/xml.xsd">http://www.w3.org/2009/01/xml.xsd</a>
            </li>
            <li>
              <a href="http://www.w3.org/2007/08/xml.xsd">http://www.w3.org/2007/08/xml.xsd</a>
            </li>
            <li>
              <a href="http://www.w3.org/2004/10/xml.xsd">http://www.w3.org/2004/10/xml.xsd</a>
            </li>
            <li>
              <a href="http://www.w3.org/2001/03/xml.xsd">http://www.w3.org/2001/03/xml.xsd</a>
            </li>
          </ul>
        </div>
      </div>
    </xs:documentation>
  </xs:annotation>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ihe\XDS.b_DocumentRepository.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="urn:ihe:iti:xds-b:2007" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns="urn:ihe:iti:xds-b:2007" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
  <xs:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="../ebRS/rs.xsd"/>
  <xs:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" schemaLocation="../ebRS/rim.xsd"/>
  <xs:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" schemaLocation="../ebRS/lcm.xsd"/>
  <xs:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" schemaLocation="../ebRS/query.xsd"/>
  <xs:complexType name="RetrieveDocumentSetRequestType">
    <xs:sequence>
      <xs:element name="DocumentRequest" maxOccurs="unbounded">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="HomeCommunityId" type="rim:LongName" minOccurs="0">
              <xs:annotation>
                <xs:documentation>This corresponds to the home attribute of the Identifiable class in regrep RIM (regrep-rim-3.0-os.pdf, page 20)</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="RepositoryUniqueId" type="rim:LongName">
              <xs:annotation>
                <xs:documentation>This is the XDSDocumentEntry.repositoryUniqueId attribute in the XDS metadata</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="DocumentUniqueId" type="rim:LongName">
              <xs:annotation>
                <xs:documentation>This is the XDSDocumentEntry.uniqueId attribute in the XDS metadata</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="RetrieveDocumentSetResponseType">
    <xs:sequence>
      <xs:element ref="rs:RegistryResponse"/>
      <xs:sequence minOccurs="0">
        <xs:element name="DocumentResponse" maxOccurs="unbounded">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="HomeCommunityId" type="rim:LongName" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>This corresponds to the home attribute of the Identifiable class in regrep RIM (regrep-rim-3.0-os.pdf, page 20)</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="RepositoryUniqueId" type="rim:LongName">
                <xs:annotation>
                  <xs:documentation>This is the XDSDocumentEntry.repositoryUniqueId attribute in the XDS metadata</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="DocumentUniqueId" type="rim:LongName">
                <xs:annotation>
                  <xs:documentation>This is the XDSDocumentEntry.uniqueId attribute in the XDS metadata</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="NewRepositoryUniqueId" type="rim:LongName" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>This identifies the Document Repository that will support retrieval of the document created as a result of retrieval of the On-Demand Document.  This is required when the On-Demand Document Source supports the Persistence of Retrieved Documents Option.</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="NewDocumentUniqueId" type="rim:LongName" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>This identifies the document returned in the response when retrieval is of an On-Demand Document.  This is required when retrieval is of an On-Demand Document.</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="mimeType" type="rim:LongName"/>
              <xs:element name="Document" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="RetrieveDocumentSetRequest" type="RetrieveDocumentSetRequestType"/>
  <xs:element name="RetrieveDocumentSetResponse" type="RetrieveDocumentSetResponseType"/>
  <xs:complexType name="ProvideAndRegisterDocumentSetRequestType">
    <xs:sequence>
      <xs:element ref="lcm:SubmitObjectsRequest"/>
      <xs:sequence minOccurs="0">
        <xs:element name="Document" maxOccurs="unbounded">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream">
                <xs:attribute name="id" type="xs:anyURI" use="required">
                  <xs:annotation>
                    <xs:documentation>This corresponds to the ExtrinsicObject id in the eb RIM metadata a provides a linkage between the actual document data and its metadata</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ProvideAndRegisterDocumentSetRequest" type="ProvideAndRegisterDocumentSetRequestType"/>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ebRS\lcm.xsd</con:url><con:content><![CDATA[<!--$Header: /cvsroot/ebxmlrr/ebxmlrr-spec/misc/3.0/schema/lcm.xsd,v 1.5 2005/01/31 22:28:18 farrukh_najmi Exp $-->
<schema targetNamespace="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:tns="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
  <annotation>
    <documentation xml:lang="en">The schema for OASIS ebXML Registry Services</documentation>
  </annotation>
  <!--Import the rim.xsd file with XML schema mappaing from RIM-->
  <import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" schemaLocation="rim.xsd"/>
  <!--Import the rs.xsd file with XML schema for base rs related schema-->
  <import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="rs.xsd"/>
  <element name="SubmitObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The SubmitObjectsRequest allows one to submit a list of RegistryObject elements. Each RegistryEntry element provides metadata for a single submitted object.  Note that the repository item being submitted is in a separate document that is not in this DTD. The ebXML Messaging Services Specfication defines packaging, for submission, of the metadata of a repository item with the repository item itself. The value of the id attribute of the ExtrinsicObject element must be the same as the xlink:href attribute within the Reference element within the Manifest element of the MessageHeader.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:RegistryObjectList"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="UpdateObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The UpdateObjectsRequest allows one to update a list of RegistryObject elements. Each RegistryEntry element provides metadata for a single submitted object.  Note that the repository item being submitted is in a separate document that is not in this DTD. The ebXML Messaging Services Specfication defines packaging, for submission, of the metadata of a repository item with the repository item itself. The value of the id attribute of the ExtrinsicObject element must be the same as the xlink:href attribute within the Reference element within the Manifest element of the MessageHeader.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:RegistryObjectList"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="ApproveObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The ObjectRefList and AdhocQuery identify the list of
        objects being approved.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:AdhocQuery" minOccurs="0" maxOccurs="1"/>
            <element ref="rim:ObjectRefList" minOccurs="0" maxOccurs="1"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="DeprecateObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The ObjectRefList and AdhocQuery identify the list of
        objects being deprecated.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:AdhocQuery" minOccurs="0" maxOccurs="1"/>
            <element ref="rim:ObjectRefList" minOccurs="0" maxOccurs="1"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="UndeprecateObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The ObjectRefList is the list of
        refs to the registry entrys being un-deprecated.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:AdhocQuery" minOccurs="0" maxOccurs="1"/>
            <element ref="rim:ObjectRefList" minOccurs="0" maxOccurs="1"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="RemoveObjectsRequest">
    <annotation>
      <documentation xml:lang="en">The ObjectRefList is the list of
        refs to the registry entrys being removed</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element ref="rim:AdhocQuery" minOccurs="0" maxOccurs="1"/>
            <element ref="rim:ObjectRefList" minOccurs="0" maxOccurs="1"/>
          </sequence>
          <attribute name="deletionScope" default="urn:oasis:names:tc:ebxml-regrep:DeletionScopeType:DeleteAll" type="rim:referenceURI" use="optional"/>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="RelocateObjectsRequest">
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element maxOccurs="1" minOccurs="1" ref="rim:AdhocQuery"/>
            <element maxOccurs="1" minOccurs="1" name="SourceRegistry" type="rim:ObjectRefType"/>
            <element maxOccurs="1" minOccurs="1" name="DestinationRegistry" type="rim:ObjectRefType"/>
            <element maxOccurs="1" minOccurs="1" name="OwnerAtSource" type="rim:ObjectRefType"/>
            <element maxOccurs="1" minOccurs="1" name="OwnerAtDestination" type="rim:ObjectRefType"/>
          </sequence>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="AcceptObjectsRequest">
    <!--The ObjectRefList must only contain local ObjectRefs such that they do not specify home attribute-->
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <attribute name="correlationId" type="anyURI" use="required"/>
        </extension>
      </complexContent>
    </complexType>
  </element>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ebRS\query.xsd</con:url><con:content><![CDATA[<!--$Header: /cvsroot/ebxmlrr/ebxmlrr-spec/misc/3.0/schema/query.xsd,v 1.13 2005/03/29 08:52:10 farrukh_najmi Exp $-->
<schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:tns="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0">
  <!--Import the rim.xsd file with XML schema mappaing from RIM-->
  <import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" schemaLocation="rim.xsd"/>
  <import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="rs.xsd"/>
  <complexType name="ResponseOptionType">
    <attribute default="RegistryObject" name="returnType">
      <simpleType>
        <restriction base="NCName">
          <enumeration value="ObjectRef"/>
          <enumeration value="RegistryObject"/>
          <enumeration value="LeafClass"/>
          <enumeration value="LeafClassWithRepositoryItem"/>
        </restriction>
      </simpleType>
    </attribute>
    <attribute default="false" name="returnComposedObjects" type="boolean"/>
  </complexType>
  <element name="ResponseOption" type="tns:ResponseOptionType"/>
  <element name="AdhocQueryRequest">
    <annotation>
      <documentation xml:lang="en">An Ad hoc query request specifies an ad hoc query.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryRequestType">
          <sequence>
            <element maxOccurs="1" minOccurs="1" ref="tns:ResponseOption"/>
            <element ref="rim:AdhocQuery"/>
          </sequence>
          <attribute default="false" name="federated" type="boolean" use="optional"/>
          <attribute name="federation" type="anyURI" use="optional"/>
          <attribute default="0" name="startIndex" type="integer"/>
          <attribute default="-1" name="maxResults" type="integer"/>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <element name="AdhocQueryResponse">
    <annotation>
      <documentation xml:lang="en">The response includes a RegistryObjectList which has zero or more
        RegistryObjects that match the query specified in AdhocQueryRequest.</documentation>
    </annotation>
    <complexType>
      <complexContent>
        <extension base="rs:RegistryResponseType">
          <sequence>
            <element ref="rim:RegistryObjectList"/>
          </sequence>
          <attribute default="0" name="startIndex" type="integer"/>
          <attribute name="totalResultCount" type="integer" use="optional"/>
        </extension>
      </complexContent>
    </complexType>
  </element>
  <complexType name="FilterQueryType" abstract="true">
    <sequence>
      <element maxOccurs="1" minOccurs="0" name="PrimaryFilter" type="tns:FilterType"/>
    </sequence>
  </complexType>
  <complexType name="BranchType" abstract="true">
    <complexContent>
      <extension base="tns:FilterQueryType"></extension>
    </complexContent>
  </complexType>
  <complexType name="InternationalStringBranchType">
    <complexContent>
      <extension base="tns:BranchType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="LocalizedStringFilter" type="tns:FilterType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="SlotBranchType">
    <complexContent>
      <extension base="tns:BranchType">
        <sequence/>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="RegistryObjectQueryType">
    <complexContent>
      <extension base="tns:FilterQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="SlotBranch" type="tns:SlotBranchType"/>
          <element maxOccurs="1" minOccurs="0" name="NameBranch" type="tns:InternationalStringBranchType"/>
          <element maxOccurs="1" minOccurs="0" name="DescriptionBranch" type="tns:InternationalStringBranchType"/>
          <element maxOccurs="1" minOccurs="0" name="VersionInfoFilter" type="tns:FilterType"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ClassificationQuery"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ExternalIdentifierQuery"/>
          <element maxOccurs="1" minOccurs="0" name="ObjectTypeQuery" type="tns:ClassificationNodeQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="StatusQuery" type="tns:ClassificationNodeQueryType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="SourceAssociationQuery" type="tns:AssociationQueryType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="TargetAssociationQuery" type="tns:AssociationQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="RegistryObjectQuery" type="tns:RegistryObjectQueryType"/>
  <complexType name="AssociationQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="AssociationTypeQuery" type="tns:ClassificationNodeQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="SourceObjectQuery" type="tns:RegistryObjectQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="TargetObjectQuery" type="tns:RegistryObjectQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="AssociationQuery" type="tns:AssociationQueryType"/>
  <complexType name="AuditableEventQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="AffectedObjectQuery" type="tns:RegistryObjectQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="EventTypeQuery" type="tns:ClassificationNodeQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="UserQuery" type="tns:UserQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="AuditableEventQuery" type="tns:AuditableEventQueryType"/>
  <complexType name="ClassificationQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:ClassificationSchemeQuery"/>
          <element maxOccurs="1" minOccurs="0" name="ClassifiedObjectQuery" type="tns:RegistryObjectQueryType"/>
          <element maxOccurs="1" minOccurs="0" ref="tns:ClassificationNodeQuery"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ClassificationQuery" type="tns:ClassificationQueryType"/>
  <complexType name="ClassificationNodeQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="ParentQuery" type="tns:RegistryObjectQueryType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="ChildrenQuery" type="tns:ClassificationNodeQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ClassificationNodeQuery" type="tns:ClassificationNodeQueryType"/>
  <complexType name="ClassificationSchemeQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="ChildrenQuery" type="tns:ClassificationNodeQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="NodeTypeQuery" type="tns:ClassificationNodeQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ClassificationSchemeQuery" type="tns:ClassificationSchemeQueryType"/>
  <complexType name="ExternalIdentifierQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:RegistryObjectQuery"/>
          <element maxOccurs="1" minOccurs="0" name="IdentificationSchemeQuery" type="tns:ClassificationSchemeQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ExternalIdentifierQuery" type="tns:ExternalIdentifierQueryType"/>
  <complexType name="ExternalLinkQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence/>
      </extension>
    </complexContent>
  </complexType>
  <element name="ExternalLinkQuery" type="tns:ExternalLinkQueryType"/>
  <complexType name="ExtrinsicObjectQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="ContentVersionInfoFilter" type="tns:FilterType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ExtrinsicObjectQuery" type="tns:ExtrinsicObjectQueryType"/>
  <complexType name="OrganizationQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="AddressFilter" type="tns:FilterType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="TelephoneNumberFilter" type="tns:FilterType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="EmailAddressFilter" type="tns:FilterType"/>
          <element maxOccurs="1" minOccurs="0" name="ParentQuery" type="tns:OrganizationQueryType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="ChildOrganizationQuery" type="tns:OrganizationQueryType"/>
          <element maxOccurs="1" minOccurs="0" name="PrimaryContactQuery" type="tns:PersonQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="OrganizationQuery" type="tns:OrganizationQueryType"/>
  <complexType name="RegistryPackageQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType"></extension>
    </complexContent>
  </complexType>
  <element name="RegistryPackageQuery" type="tns:RegistryPackageQueryType"/>
  <complexType name="ServiceQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:ServiceBindingQuery"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ServiceQuery" type="tns:ServiceQueryType"/>
  <complexType name="ServiceBindingQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:ServiceQuery"/>
          <element maxOccurs="unbounded" minOccurs="0" ref="tns:SpecificationLinkQuery"/>
          <element maxOccurs="1" minOccurs="0" name="TargetBindingQuery" type="tns:ServiceBindingQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="ServiceBindingQuery" type="tns:ServiceBindingQueryType"/>
  <complexType name="SpecificationLinkQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="UsageDescriptionBranch" type="tns:InternationalStringBranchType"/>
          <element maxOccurs="1" minOccurs="0" ref="tns:ServiceBindingQuery"/>
          <element maxOccurs="1" minOccurs="0" name="SpecificationObjectQuery" type="tns:RegistryObjectQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="SpecificationLinkQuery" type="tns:SpecificationLinkQueryType"/>
  <complexType name="PersonQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="unbounded" minOccurs="0" name="AddressFilter" type="tns:FilterType"/>
          <element maxOccurs="1" minOccurs="0" name="PersonNameFilter" type="tns:FilterType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="TelephoneNumberFilter" type="tns:FilterType"/>
          <element maxOccurs="unbounded" minOccurs="0" name="EmailAddressFilter" type="tns:FilterType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="PersonQuery" type="tns:PersonQueryType"/>
  <complexType name="UserQueryType">
    <complexContent>
      <extension base="tns:PersonQueryType">
        <sequence/>
      </extension>
    </complexContent>
  </complexType>
  <element name="UserQuery" type="tns:UserQueryType"/>
  <complexType name="RegistryQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="OperatorQuery" type="tns:OrganizationQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="RegistryQuery" type="tns:RegistryQueryType"/>
  <complexType name="FederationQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence/>
      </extension>
    </complexContent>
  </complexType>
  <element name="FederationQuery" type="tns:FederationQueryType"/>
  <complexType name="AdhocQueryQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="QueryExpressionBranch" type="tns:QueryExpressionBranchType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="AdhocQueryQuery" type="tns:AdhocQueryQueryType"/>
  <complexType name="QueryExpressionBranchType">
    <complexContent>
      <extension base="tns:BranchType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="QueryLanguageQuery" type="tns:ClassificationNodeQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="NotificationQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" ref="tns:RegistryObjectQuery"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="NotificationQuery" type="tns:NotificationQueryType"/>
  <complexType name="SubscriptionQueryType">
    <complexContent>
      <extension base="tns:RegistryObjectQueryType">
        <sequence>
          <element maxOccurs="1" minOccurs="0" name="SelectorQuery" type="tns:AdhocQueryQueryType"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <element name="SubscriptionQuery" type="tns:SubscriptionQueryType"/>
  <!--The Filter type hierarchy-->
  <complexType name="FilterType">
    <attribute default="false" name="negate" type="boolean"/>
  </complexType>
  <element abstract="true" name="Filter" type="tns:FilterType"/>
  <complexType name="CompoundFilterType">
    <complexContent>
      <extension base="tns:FilterType">
        <sequence>
          <element maxOccurs="1" minOccurs="1" name="LeftFilter" type="tns:FilterType"/>
          <element maxOccurs="1" minOccurs="1" name="RightFilter" type="tns:FilterType"/>
        </sequence>
        <attribute name="logicalOperator" use="required">
          <simpleType>
            <restriction base="NCName">
              <enumeration value="AND"/>
              <enumeration value="OR"/>
            </restriction>
          </simpleType>
        </attribute>
      </extension>
    </complexContent>
  </complexType>
  <element name="CompoundFilter" type="tns:CompoundFilterType"/>
  <complexType name="SimpleFilterType" abstract="true">
    <complexContent>
      <extension base="tns:FilterType">
        <attribute name="domainAttribute" type="string" use="required"/>
        <attribute name="comparator" use="required">
          <simpleType>
            <restriction base="NCName">
              <enumeration value="LE"/>
              <enumeration value="LT"/>
              <enumeration value="GE"/>
              <enumeration value="GT"/>
              <enumeration value="EQ"/>
              <enumeration value="NE"/>
              <enumeration value="Like"/>
              <enumeration value="NotLike"/>
            </restriction>
          </simpleType>
        </attribute>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="BooleanFilterType">
    <complexContent>
      <extension base="tns:SimpleFilterType">
        <attribute name="value" type="boolean" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="BooleanFilter" type="tns:BooleanFilterType"/>
  <complexType name="IntegerFilterType">
    <complexContent>
      <extension base="tns:SimpleFilterType">
        <attribute name="value" type="integer" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="IntegerFilter" type="tns:IntegerFilterType"/>
  <complexType name="FloatFilterType">
    <complexContent>
      <extension base="tns:SimpleFilterType">
        <attribute name="value" type="float" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="FloatFilter" type="tns:FloatFilterType"/>
  <complexType name="DateTimeFilterType">
    <complexContent>
      <extension base="tns:SimpleFilterType">
        <attribute name="value" type="dateTime" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="DateTimeFilter" type="tns:DateTimeFilterType"/>
  <complexType name="StringFilterType">
    <complexContent>
      <extension base="tns:SimpleFilterType">
        <attribute name="value" type="string" use="required"/>
      </extension>
    </complexContent>
  </complexType>
  <element name="StringFilter" type="tns:StringFilterType"/>
</schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\NhincCommonEntity.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:hl7="urn:hl7-org:v3" xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ihe="urn:ihe:iti:xds-b:2007" xmlns:iheaudit="http://nhinc.services.com/schema/auditmessage" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:x12="http://www.caqh.org/SOAP/WSDL/CORERule2.2.0.xsd" xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:subb2obcdc="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:subb2obdoc="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:ncsub="urn:gov:hhs:fha:nhinc:common:subscription" xmlns:edxlde="urn:oasis:names:tc:emergency:EDXL:DE:1.0">
  <xsd:import namespace="urn:gov:hhs:fha:nhinc:common:nhinccommon" schemaLocation="NhincCommon.xsd"/>
  <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" schemaLocation="../../ebRS/query.xsd"/>
  <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" schemaLocation="../../ebRS/rs.xsd"/>
  <xsd:import namespace="urn:ihe:iti:xds-b:2007" schemaLocation="../../ihe/XDS.b_DocumentRepository.xsd"/>
  <xsd:import namespace="http://nhinc.services.com/schema/auditmessage" schemaLocation="../../ihe/auditmessage.xsd"/>
  <xsd:import namespace="http://docs.oasis-open.org/wsn/b-2" schemaLocation="../../docs.oasis-open.org/wsn/b-2.xsd"/>
  <xsd:import namespace="urn:gov:hhs:fha:nhinc:common:subscription" schemaLocation="../../../schemas/nhinc/common/Subscription.xsd"/>
  <xsd:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" schemaLocation="../../../schemas/ebRS/rim.xsd"/>
  <xsd:import namespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" schemaLocation="../../../schemas/nhinc/common/SubscriptionB2OverrideForCdc.xsd"/>
  <xsd:import namespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" schemaLocation="../../../schemas/nhinc/common/SubscriptionB2OverrideForDocuments.xsd"/>
  <xsd:import namespace="urn:oasis:names:tc:emergency:EDXL:DE:1.0" schemaLocation="../../../schemas/ebRS/edxl-de.xsd"/>
  <xsd:import namespace="http://www.caqh.org/SOAP/WSDL/CORERule2.2.0.xsd" schemaLocation="../../../schemas/caqh/CORERule2.2.0.xsd"/>
  <!--====================================================================
    Document Query Schemas.
    ====================================================================-->
  <xsd:complexType name="RespondingGateway_CrossGatewayQueryRequestType">
    <xsd:sequence>
      <xsd:element ref="query:AdhocQueryRequest"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayQueryRequest" type="tns:RespondingGateway_CrossGatewayQueryRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayQueryResponseType">
    <xsd:sequence>
      <xsd:element ref="query:AdhocQueryResponse"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayQueryResponse" type="tns:RespondingGateway_CrossGatewayQueryResponseType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayQueryResponseSecuredType">
    <xsd:sequence>
      <xsd:element ref="query:AdhocQueryResponse"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayQueryResponseSecured" type="tns:RespondingGateway_CrossGatewayQueryResponseSecuredType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayQuerySecuredRequestType">
    <xsd:sequence>
      <xsd:element ref="query:AdhocQueryRequest"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayQuerySecuredRequest" type="tns:RespondingGateway_CrossGatewayQuerySecuredRequestType"/>
  <!--====================================================================
    Document Retrieve Schemas.
    ====================================================================-->
  <xsd:complexType name="RespondingGateway_CrossGatewayRetrieveRequestType">
    <xsd:sequence>
      <xsd:element ref="ihe:RetrieveDocumentSetRequest"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRetrieveRequest" type="tns:RespondingGateway_CrossGatewayRetrieveRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayRetrieveSecuredRequestType">
    <xsd:sequence>
      <xsd:element ref="ihe:RetrieveDocumentSetRequest"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRetrieveSecuredRequest" type="tns:RespondingGateway_CrossGatewayRetrieveSecuredRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayRetrieveResponseType">
    <xsd:sequence>
      <xsd:element ref="ihe:RetrieveDocumentSetResponse"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRetrieveResponse" type="tns:RespondingGateway_CrossGatewayRetrieveResponseType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayRetrieveSecuredResponseType">
    <xsd:sequence>
      <xsd:element ref="ihe:RetrieveDocumentSetResponse"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRetrieveSecuredResponse" type="tns:RespondingGateway_CrossGatewayRetrieveSecuredResponseType"/>
  <!--====================================================================
    Audit Log Schemas.
    ====================================================================-->
  <xsd:complexType name="FindAuditEventsRequestType">
    <xsd:sequence>
      <xsd:element ref="iheaudit:FindAuditEvents"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="FindAuditEventsRequest" type="tns:FindAuditEventsRequestType"/>
  <xsd:complexType name="FindAuditEventsSecuredRequestType">
    <xsd:sequence>
      <xsd:element ref="iheaudit:FindAuditEvents"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="FindAuditEventsSecuredRequest" type="tns:FindAuditEventsSecuredRequestType"/>
  <!--====================================================================
    Subscription Management Schemas.
    ====================================================================-->
  <!--i think this could be removed-->
  <xsd:complexType name="SubscribeRequestType">
    <xsd:sequence>
      <xsd:element ref="wsnt:Subscribe"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeRequest" type="tns:SubscribeRequestType"/>
  <xsd:complexType name="SubscribeRequestSecuredType">
    <xsd:sequence>
      <xsd:element ref="wsnt:Subscribe"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeRequestSecured" type="tns:SubscribeRequestSecuredType"/>
  <xsd:complexType name="SubscribeDocumentRequestType">
    <xsd:sequence>
      <xsd:element name="subscribe" type="subb2obdoc:SubscribeDocumentType"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeDocumentRequest" type="tns:SubscribeDocumentRequestType"/>
  <xsd:complexType name="SubscribeDocumentRequestSecuredType">
    <xsd:sequence>
      <xsd:element name="subscribe" type="subb2obdoc:SubscribeDocumentType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeDocumentRequestSecured" type="tns:SubscribeDocumentRequestSecuredType"/>
  <xsd:complexType name="SubscribeCdcBioPackageRequestType">
    <xsd:sequence>
      <xsd:element name="subscribe" type="subb2obcdc:SubscribeCdcBioPackageType"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeCdcBioPackageRequest" type="tns:SubscribeCdcBioPackageRequestType"/>
  <xsd:complexType name="SubscribeDocumentResponseType">
    <xsd:sequence>
      <xsd:element ref="wsnt:SubscribeResponse"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeDocumentResponse" type="tns:SubscribeDocumentResponseType"/>
  <xsd:complexType name="SubscribeCdcBioPackageResponseType">
    <xsd:sequence>
      <xsd:element ref="wsnt:SubscribeResponse"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeCdcBioPackageResponse" type="tns:SubscribeCdcBioPackageResponseType"/>
  <xsd:complexType name="UnsubscribeRequestType">
    <xsd:sequence>
      <xsd:element ref="wsnt:Unsubscribe"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="UnsubscribeRequest" type="tns:UnsubscribeRequestType"/>
  <!--====================================================================
    Notification Schemas.
    ====================================================================-->
  <xsd:complexType name="NotifySubscribersOfDocumentRequestType">
    <xsd:sequence>
      <xsd:element name="notify" type="subb2obdoc:NotifyDocumentType"/>
      <xsd:element ref="rim:RegistryObjectList" minOccurs="0"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotifySubscribersOfDocumentRequest" type="tns:NotifySubscribersOfDocumentRequestType"/>
  <xsd:complexType name="NotifySubscribersOfDocumentRequestSecuredType">
    <xsd:sequence>
      <xsd:element name="notify" type="subb2obdoc:NotifyDocumentType"/>
      <xsd:element ref="rim:RegistryObjectList" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotifySubscribersOfDocumentRequestSecured" type="tns:NotifySubscribersOfDocumentRequestSecuredType"/>
  <xsd:complexType name="NotifySubscribersOfCdcBioPackageRequestType">
    <xsd:sequence>
      <xsd:element name="notify" type="subb2obcdc:NotifyCdcBioPackageType"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotifySubscribersOfCdcBioPackageRequest" type="tns:NotifySubscribersOfCdcBioPackageRequestType"/>
  <xsd:complexType name="NotifyRequestType">
    <xsd:sequence>
      <xsd:element ref="wsnt:Notify"/>
      <xsd:element name="Assertion" type="nccommon:AssertionType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotifyRequest" type="tns:NotifyRequestType"/>
  <xsd:complexType name="RespondingGateway_ProvideAndRegisterDocumentSetRequestType">
    <xsd:sequence>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
      <xsd:element name="ProvideAndRegisterDocumentSetRequest" type="ihe:ProvideAndRegisterDocumentSetRequestType"/>
      <xsd:element name="url" type="nccommon:UrlInfoType" minOccurs="0" maxOccurs="1"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_ProvideAndRegisterDocumentSetRequest" type="tns:RespondingGateway_ProvideAndRegisterDocumentSetRequestType"/>
  <xsd:complexType name="RespondingGateway_ProvideAndRegisterDocumentSetSecuredRequestType">
    <xsd:sequence>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
      <xsd:element name="ProvideAndRegisterDocumentSetRequest" type="ihe:ProvideAndRegisterDocumentSetRequestType"/>
      <xsd:element name="url" type="nccommon:UrlInfoType" minOccurs="0" maxOccurs="1"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_ProvideAndRegisterDocumentSetSecuredRequest" type="tns:RespondingGateway_ProvideAndRegisterDocumentSetSecuredRequestType"/>
  <xsd:complexType name="RespondingGateway_ProvideAndRegisterDocumentSetResponseRequestType">
    <xsd:sequence>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
      <xsd:element name="RegistryResponse" type="rs:RegistryResponseType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_ProvideAndRegisterDocumentSetResponseRequest" type="tns:RespondingGateway_ProvideAndRegisterDocumentSetResponseRequestType"/>
  <xsd:complexType name="RespondingGateway_ProvideAndRegisterDocumentSetSecuredResponseRequestType">
    <xsd:sequence>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
      <xsd:element name="RegistryResponse" type="rs:RegistryResponseType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_ProvideAndRegisterDocumentSetSecuredResponseRequest" type="tns:RespondingGateway_ProvideAndRegisterDocumentSetSecuredResponseRequestType"/>
  <xsd:complexType name="RespondingGateway_SendAlertMessageType">
    <xsd:sequence>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
      <xsd:element ref="edxlde:EDXLDistribution"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_SendAlertMessage" type="tns:RespondingGateway_SendAlertMessageType"/>
  <xsd:complexType name="RespondingGateway_SendAlertMessageSecuredType">
    <xsd:sequence>
      <xsd:element ref="edxlde:EDXLDistribution"/>
      <xsd:element name="nhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_SendAlertMessageSecured" type="tns:RespondingGateway_SendAlertMessageSecuredType"/>
  <!--====================================================================
    X12 Document Submission Realtime/Sync Schemas.
    ====================================================================-->
  <xsd:complexType name="RespondingGateway_CrossGatewayRealTimeRequestType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeRealTimeRequest"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRealTimeRequest" type="tns:RespondingGateway_CrossGatewayRealTimeRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayRealTimeSecuredRequestType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeRealTimeRequest"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRealTimeSecuredRequest" type="tns:RespondingGateway_CrossGatewayRealTimeSecuredRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayRealTimeResponseType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeRealTimeResponse"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayRealTimeResponse" type="tns:RespondingGateway_CrossGatewayRealTimeResponseType"/>
  <!--====================================================================
    X12 Document Submission Batch/Deferred/Async Schemas.
    ====================================================================-->
  <xsd:complexType name="RespondingGateway_CrossGatewayBatchSubmissionRequestType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeBatchSubmission"/>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayBatchSubmissionRequest" type="tns:RespondingGateway_CrossGatewayBatchSubmissionRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayBatchSubmissionSecuredRequestType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeBatchSubmission"/>
      <xsd:element name="NhinTargetCommunities" type="nccommon:NhinTargetCommunitiesType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayBatchSubmissionRequestSecured" type="tns:RespondingGateway_CrossGatewayBatchSubmissionSecuredRequestType"/>
  <xsd:complexType name="RespondingGateway_CrossGatewayBatchSubmissionResponseMessageType">
    <xsd:sequence>
      <xsd:element ref="x12:COREEnvelopeBatchSubmissionResponse"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RespondingGateway_CrossGatewayBatchSubmissionResponseMessage" type="tns:RespondingGateway_CrossGatewayBatchSubmissionResponseMessageType"/>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\NhincCommon.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:common:nhinccommon" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:addr="http://www.w3.org/2005/08/addressing">
  <xsd:import namespace="http://www.w3.org/2005/08/addressing" schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd"/>
  <xsd:complexType name="QualifiedSubjectIdentifierType">
    <xsd:sequence>
      <xsd:element name="SubjectIdentifier" type="xsd:string"/>
      <xsd:element name="AssigningAuthorityIdentifier" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="QualifiedSubjectIdentifier" type="tns:QualifiedSubjectIdentifierType"/>
  <xsd:complexType name="AcknowledgementType">
    <xsd:sequence>
      <xsd:element name="message" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Acknowledgement" type="tns:AcknowledgementType"/>
  <xsd:complexType name="QualifiedSubjectIdentifiersType">
    <xsd:sequence>
      <xsd:element name="QualifiedSubjectIdentifier" type="tns:QualifiedSubjectIdentifierType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="QualifiedSubjectIdentifiers" type="tns:QualifiedSubjectIdentifiersType"/>
  <xsd:complexType name="AssertionType">
    <xsd:sequence>
      <xsd:element name="address" type="tns:AddressType"/>
      <xsd:element name="dateOfBirth" type="xsd:string"/>
      <xsd:element name="explanationNonClaimantSignature" type="xsd:string"/>
      <xsd:element name="haveSecondWitnessSignature" type="xsd:boolean"/>
      <xsd:element name="haveSignature" type="xsd:boolean"/>
      <xsd:element name="haveWitnessSignature" type="xsd:boolean"/>
      <xsd:element name="homeCommunity" type="tns:HomeCommunityType"/>
      <xsd:element name="nationalProviderId" type="xsd:string"/>
      <xsd:element name="personName" type="tns:PersonNameType"/>
      <xsd:element name="phoneNumber" type="tns:PhoneType"/>
      <xsd:element name="secondWitnessAddress" type="tns:AddressType"/>
      <xsd:element name="secondWitnessName" type="tns:PersonNameType"/>
      <xsd:element name="secondWitnessPhone" type="tns:PhoneType"/>
      <xsd:element name="SSN" type="xsd:string"/>
      <xsd:element name="uniquePatientId" type="xsd:string" maxOccurs="unbounded"/>
      <xsd:element name="witnessAddress" type="tns:AddressType"/>
      <xsd:element name="witnessName" type="tns:PersonNameType"/>
      <xsd:element name="witnessPhone" type="tns:PhoneType"/>
      <xsd:element name="userInfo" type="tns:UserType"/>
      <xsd:element name="authorized" type="xsd:boolean"/>
      <xsd:element name="purposeOfDisclosureCoded" type="tns:CeType" minOccurs="0"/>
      <xsd:element name="samlAuthnStatement" type="tns:SamlAuthnStatementType" minOccurs="0"/>
      <xsd:element name="samlAuthzDecisionStatement" type="tns:SamlAuthzDecisionStatementType" minOccurs="0"/>
      <xsd:element name="samlSignature" type="tns:SamlSignatureType" minOccurs="0"/>
      <xsd:element name="samlIssuer" type="tns:SamlIssuerType" minOccurs="0"/>
      <xsd:element name="messageId" type="xsd:string" minOccurs="0"/>
      <xsd:element name="relatesToList" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="implementsSpecVersion" type="xsd:string" minOccurs="0"/>
      <xsd:element name="transactionTimeout" type="xsd:int" minOccurs="0" default="-1"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Assertion" type="tns:AssertionType"/>
  <xsd:complexType name="SamlAuthnStatementType">
    <xsd:sequence>
      <xsd:element name="authInstant" type="xsd:string" minOccurs="0"/>
      <xsd:element name="sessionIndex" type="xsd:string" minOccurs="0"/>
      <xsd:element name="authContextClassRef" type="xsd:string" minOccurs="0"/>
      <xsd:element name="subjectLocalityAddress" type="xsd:string" minOccurs="0"/>
      <xsd:element name="subjectLocalityDNSName" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlAuthnStatement" type="tns:SamlAuthnStatementType"/>
  <xsd:complexType name="SamlAuthzDecisionStatementType">
    <xsd:sequence>
      <xsd:element name="decision" type="xsd:string" minOccurs="0"/>
      <xsd:element name="resource" type="xsd:string" minOccurs="0"/>
      <xsd:element name="action" type="xsd:string" minOccurs="0"/>
      <xsd:element name="evidence" type="tns:SamlAuthzDecisionStatementEvidenceType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlAuthzDecisionStatement" type="tns:SamlAuthzDecisionStatementType"/>
  <xsd:complexType name="SamlAuthzDecisionStatementEvidenceType">
    <xsd:sequence>
      <xsd:element name="assertion" type="tns:SamlAuthzDecisionStatementEvidenceAssertionType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlAuthzDecisionStatementEvidence" type="tns:SamlAuthzDecisionStatementEvidenceType"/>
  <xsd:complexType name="SamlAuthzDecisionStatementEvidenceAssertionType">
    <xsd:sequence>
      <xsd:element name="id" type="xsd:string" minOccurs="0"/>
      <xsd:element name="issueInstant" type="xsd:string" minOccurs="0"/>
      <xsd:element name="version" type="xsd:string" minOccurs="0"/>
      <xsd:element name="issuer" type="xsd:string" minOccurs="0"/>
      <xsd:element name="issuerFormat" type="xsd:string" minOccurs="0"/>
      <xsd:element name="subject" type="xsd:string" minOccurs="0"/>
      <xsd:element name="conditions" type="tns:SamlAuthzDecisionStatementEvidenceConditionsType" minOccurs="0"/>
      <xsd:element name="accessConsentPolicy" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="instanceAccessConsentPolicy" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlAuthzDecisionStatementEvidenceAssertion" type="tns:SamlAuthzDecisionStatementEvidenceAssertionType"/>
  <xsd:complexType name="SamlAuthzDecisionStatementEvidenceConditionsType">
    <xsd:sequence>
      <xsd:element name="notBefore" type="xsd:string" minOccurs="0"/>
      <xsd:element name="notOnOrAfter" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlAuthzDecisionStatementEvidenceConditions" type="tns:SamlAuthzDecisionStatementEvidenceConditionsType"/>
  <xsd:complexType name="SamlIssuerType">
    <xsd:sequence>
      <xsd:element name="issuer" type="xsd:string" minOccurs="0"/>
      <xsd:element name="issuerFormat" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlIssuer" type="tns:SamlIssuerType"/>
  <xsd:complexType name="SamlSignatureType">
    <xsd:sequence>
      <xsd:element name="keyInfo" type="tns:SamlSignatureKeyInfoType" minOccurs="0"/>
      <xsd:element name="signatureValue" type="xsd:base64Binary" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlSignature" type="tns:SamlSignatureType"/>
  <xsd:complexType name="SamlSignatureKeyInfoType">
    <xsd:sequence>
      <xsd:element name="rsaKeyValueModulus" type="xsd:base64Binary" minOccurs="0"/>
      <xsd:element name="rsaKeyValueExponent" type="xsd:base64Binary" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SamlSignatureKeyInfo" type="tns:SamlSignatureKeyInfoType"/>
  <xsd:complexType name="AddressType">
    <xsd:sequence>
      <xsd:element name="addressType" type="tns:CeType"/>
      <xsd:element name="city" type="xsd:string"/>
      <xsd:element name="country" type="xsd:string"/>
      <xsd:element name="state" type="xsd:string"/>
      <xsd:element name="streetAddress" type="xsd:string"/>
      <xsd:element name="zipCode" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Address" type="tns:AddressType"/>
  <xsd:complexType name="AddressesType">
    <xsd:sequence>
      <xsd:element name="address" type="tns:AddressType" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Addresses" type="tns:AddressesType"/>
  <xsd:complexType name="CeType">
    <xsd:sequence>
      <xsd:element name="code" type="xsd:string"/>
      <xsd:element name="codeSystem" type="xsd:string"/>
      <xsd:element name="codeSystemName" type="xsd:string"/>
      <xsd:element name="codeSystemVersion" type="xsd:string"/>
      <xsd:element name="displayName" type="xsd:string"/>
      <xsd:element name="originalText" type="xsd:string"/>
      <xsd:element name="translation" type="tns:CeType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Ce" type="tns:CeType"/>
  <xsd:complexType name="HomeCommunityType">
    <xsd:sequence>
      <xsd:element name="description" type="xsd:string" minOccurs="0"/>
      <xsd:element name="homeCommunityId" type="xsd:string"/>
      <xsd:element name="name" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="HomeCommunity" type="tns:HomeCommunityType"/>
  <xsd:complexType name="HomeCommunitiesType">
    <xsd:sequence>
      <xsd:element name="homeCommunity" type="tns:HomeCommunityType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="HomeCommunities" type="tns:HomeCommunitiesType"/>
  <xsd:complexType name="PersonNameType">
    <xsd:sequence>
      <xsd:element name="familyName" type="xsd:string"/>
      <xsd:element name="givenName" type="xsd:string"/>
      <xsd:element name="nameType" type="tns:CeType"/>
      <xsd:element name="secondNameOrInitials" type="xsd:string"/>
      <xsd:element name="fullName" type="xsd:string"/>
      <xsd:element name="prefix" type="xsd:string"/>
      <xsd:element name="suffix" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="PersonName" type="tns:PersonNameType"/>
  <xsd:complexType name="PhoneType">
    <xsd:sequence>
      <xsd:element name="areaCode" type="xsd:string"/>
      <xsd:element name="countryCode" type="xsd:string"/>
      <xsd:element name="extension" type="xsd:string"/>
      <xsd:element name="localNumber" type="xsd:string"/>
      <xsd:element name="phoneNumberType" type="tns:CeType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Phone" type="tns:PhoneType"/>
  <xsd:complexType name="UserType">
    <xsd:sequence>
      <xsd:element name="personName" type="tns:PersonNameType"/>
      <xsd:element name="userName" type="xsd:string"/>
      <xsd:element name="org" type="tns:HomeCommunityType"/>
      <xsd:element name="roleCoded" type="tns:CeType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="User" type="tns:UserType"/>
  <!--<xsd:complexType name="EPRType">
        <xsd:sequence>
            <xsd:element name="EndpointReference" type="addr:EndpointReferenceType"/>
        </xsd:sequence>
    </xsd:complexType>-->
  <xsd:element name="EPR" type="addr:EndpointReferenceType"/>
  <xsd:complexType name="CreateEPRRequestType">
    <xsd:sequence>
      <xsd:element name="endpointURL" type="xsd:string"/>
      <xsd:element name="namespaceURI" type="xsd:string"/>
      <xsd:element name="namespacePrefix" type="xsd:string"/>
      <xsd:element name="serviceName" type="xsd:string"/>
      <xsd:element name="portName" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="CreateEPRRequest" type="tns:CreateEPRRequestType"/>
  <xsd:complexType name="NhinTargetSystemType">
    <xsd:sequence>
      <xsd:choice>
        <xsd:element name="epr" type="addr:EndpointReferenceType"/>
        <xsd:element name="homeCommunity" type="tns:HomeCommunityType"/>
        <xsd:element name="url" type="xsd:string"/>
      </xsd:choice>
      <xsd:element name="useSpecVersion" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NhinTargetSystem" type="tns:NhinTargetSystemType"/>
  <xsd:complexType name="ResponseType">
    <xsd:sequence>
      <xsd:element name="status" type="xsd:boolean"/>
      <xsd:element name="message" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Response" type="tns:ResponseType"/>
  <xsd:complexType name="TokenCreationInfoType">
    <xsd:sequence>
      <xsd:element name="assertion" type="tns:AssertionType"/>
      <xsd:element name="actionName" type="xsd:string"/>
      <xsd:element name="resourceName" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="TokenCreationInfo" type="tns:TokenCreationInfoType"/>
  <xsd:complexType name="TokenRetrieveInfoType">
    <xsd:sequence>
      <xsd:element name="request" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="TokenRetrieveInfo" type="tns:TokenRetrieveInfoType"/>
  <xsd:complexType name="AssigningAuthorityType">
    <xsd:sequence>
      <xsd:element name="assigningAuthorityId" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="AssigningAuthority" type="tns:AssigningAuthorityType"/>
  <xsd:complexType name="AssigningAuthoritiesType">
    <xsd:sequence>
      <xsd:element name="assigningAuthority" type="tns:AssigningAuthorityType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="assigningAuthorites" type="tns:AssigningAuthoritiesType"/>
  <xsd:complexType name="NhinTargetCommunityType">
    <xsd:sequence>
      <xsd:element name="homeCommunity" type="tns:HomeCommunityType"/>
      <xsd:element name="list" type="xsd:string" minOccurs="0"/>
      <xsd:element name="region" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="NhinTargetCommunitiesType">
    <xsd:sequence>
      <xsd:element name="nhinTargetCommunity" type="tns:NhinTargetCommunityType" maxOccurs="unbounded"/>
      <xsd:element name="useSpecVersion" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NhinTargetCommunities" type="tns:NhinTargetCommunitiesType"/>
  <xsd:element name="NhinTargetCommunity" type="tns:NhinTargetCommunityType"/>
  <xsd:complexType name="UrlSetType">
    <xsd:sequence>
      <xsd:element name="url" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="UrlSet" type="tns:UrlSetType"/>
  <xsd:complexType name="UrlInfoType">
    <xsd:sequence>
      <xsd:element name="url" type="xsd:string"/>
      <xsd:element name="id" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="UrlInfo" type="tns:UrlInfoType"/>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\www.w3.org\2005\08\addressing\ws-addr.xsd</con:url><con:content><![CDATA[<!--W3C XML Schema defined in the Web Services Addressing 1.0 specification
    http://www.w3.org/TR/ws-addr-core

   Copyright © 2005 World Wide Web Consortium,

   (Massachusetts Institute of Technology, European Research Consortium for
   Informatics and Mathematics, Keio University). All Rights Reserved. This
   work is distributed under the W3C® Software License [1] in the hope that
   it will be useful, but WITHOUT ANY WARRANTY; without even the implied
   warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

   [1] http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231

   $Id: ws-addr.xsd,v 1.2 2008/07/23 13:38:16 plehegar Exp $-->
<xs:schema targetNamespace="http://www.w3.org/2005/08/addressing" blockDefault="#all" elementFormDefault="qualified" finalDefault="" attributeFormDefault="unqualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.w3.org/2005/08/addressing">
  <!--Constructs from the WS-Addressing Core-->
  <xs:element name="EndpointReference" type="tns:EndpointReferenceType"/>
  <xs:complexType name="EndpointReferenceType" mixed="false">
    <xs:sequence>
      <xs:element name="Address" type="tns:AttributedURIType"/>
      <xs:element ref="tns:ReferenceParameters" minOccurs="0"/>
      <xs:element ref="tns:Metadata" minOccurs="0"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
  <xs:element name="ReferenceParameters" type="tns:ReferenceParametersType"/>
  <xs:complexType name="ReferenceParametersType" mixed="false">
    <xs:sequence>
      <xs:any namespace="##any" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
  <xs:element name="Metadata" type="tns:MetadataType"/>
  <xs:complexType name="MetadataType" mixed="false">
    <xs:sequence>
      <xs:any namespace="##any" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
  <xs:element name="MessageID" type="tns:AttributedURIType"/>
  <xs:element name="RelatesTo" type="tns:RelatesToType"/>
  <xs:complexType name="RelatesToType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:anyURI">
        <xs:attribute name="RelationshipType" type="tns:RelationshipTypeOpenEnum" use="optional" default="http://www.w3.org/2005/08/addressing/reply"/>
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:simpleType name="RelationshipTypeOpenEnum">
    <xs:union memberTypes="tns:RelationshipType xs:anyURI"/>
  </xs:simpleType>
  <xs:simpleType name="RelationshipType">
    <xs:restriction base="xs:anyURI">
      <xs:enumeration value="http://www.w3.org/2005/08/addressing/reply"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="ReplyTo" type="tns:EndpointReferenceType"/>
  <xs:element name="From" type="tns:EndpointReferenceType"/>
  <xs:element name="FaultTo" type="tns:EndpointReferenceType"/>
  <xs:element name="To" type="tns:AttributedURIType"/>
  <xs:element name="Action" type="tns:AttributedURIType"/>
  <xs:complexType name="AttributedURIType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:anyURI">
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <!--Constructs from the WS-Addressing SOAP binding-->
  <xs:attribute name="IsReferenceParameter" type="xs:boolean"/>
  <xs:simpleType name="FaultCodesOpenEnumType">
    <xs:union memberTypes="tns:FaultCodesType xs:QName"/>
  </xs:simpleType>
  <xs:simpleType name="FaultCodesType">
    <xs:restriction base="xs:QName">
      <xs:enumeration value="tns:InvalidAddressingHeader"/>
      <xs:enumeration value="tns:InvalidAddress"/>
      <xs:enumeration value="tns:InvalidEPR"/>
      <xs:enumeration value="tns:InvalidCardinality"/>
      <xs:enumeration value="tns:MissingAddressInEPR"/>
      <xs:enumeration value="tns:DuplicateMessageID"/>
      <xs:enumeration value="tns:ActionMismatch"/>
      <xs:enumeration value="tns:MessageAddressingHeaderRequired"/>
      <xs:enumeration value="tns:DestinationUnreachable"/>
      <xs:enumeration value="tns:ActionNotSupported"/>
      <xs:enumeration value="tns:EndpointUnavailable"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="RetryAfter" type="tns:AttributedUnsignedLongType"/>
  <xs:complexType name="AttributedUnsignedLongType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:unsignedLong">
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:element name="ProblemHeaderQName" type="tns:AttributedQNameType"/>
  <xs:complexType name="AttributedQNameType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:QName">
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:element name="ProblemIRI" type="tns:AttributedURIType"/>
  <xs:element name="ProblemAction" type="tns:ProblemActionType"/>
  <xs:complexType name="ProblemActionType" mixed="false">
    <xs:sequence>
      <xs:element ref="tns:Action" minOccurs="0"/>
      <xs:element name="SoapAction" minOccurs="0" type="xs:anyURI"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ihe\auditmessage.xsd</con:url><con:content><![CDATA[<!--edited with XMLSPY v2004 rel. 3 U (http://www.xmlspy.com) by Glen F. Marshall (HL7 Technical Steering Committee)-->
<xs:schema targetNamespace="http://nhinc.services.com/schema/auditmessage" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://nhinc.services.com/schema/auditmessage">
  <xs:complexType name="AuditMessageType">
    <xs:sequence>
      <xs:element name="EventIdentification" type="tns:EventIdentificationType"/>
      <xs:element name="ActiveParticipant" maxOccurs="unbounded">
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="tns:ActiveParticipantType"/>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="AuditSourceIdentification" type="tns:AuditSourceIdentificationType" maxOccurs="unbounded"/>
      <xs:element name="ParticipantObjectIdentification" type="tns:ParticipantObjectIdentificationType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="AuditMessage" type="tns:AuditMessageType"/>
  <xs:complexType name="EventIdentificationType">
    <xs:sequence>
      <xs:element name="EventID" type="tns:CodedValueType"/>
      <xs:element name="EventTypeCode" type="tns:CodedValueType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="EventActionCode" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:enumeration value="C">
            <xs:annotation>
              <xs:appinfo>Create</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="R">
            <xs:annotation>
              <xs:appinfo>Read</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="U">
            <xs:annotation>
              <xs:appinfo>Update</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="D">
            <xs:annotation>
              <xs:appinfo>Delete</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="E">
            <xs:annotation>
              <xs:documentation>Execute</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="EventDateTime" type="xs:dateTime" use="required"/>
    <xs:attribute name="EventOutcomeIndicator" use="required">
      <xs:simpleType>
        <xs:restriction base="xs:integer">
          <xs:enumeration value="0">
            <xs:annotation>
              <xs:appinfo>Success</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="4">
            <xs:annotation>
              <xs:appinfo>Minor failure</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="8">
            <xs:annotation>
              <xs:appinfo>Serious failure</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="12">
            <xs:annotation>
              <xs:appinfo>Major failure; action made unavailable</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="AuditSourceIdentificationType">
    <xs:sequence>
      <xs:element name="AuditSourceTypeCode" type="tns:CodedValueType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="AuditEnterpriseSiteID" type="xs:string" use="optional"/>
    <xs:attribute name="AuditSourceID" type="xs:string" use="required"/>
  </xs:complexType>
  <xs:complexType name="ActiveParticipantType">
    <xs:sequence minOccurs="0">
      <xs:element name="RoleIDCode" type="tns:CodedValueType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="UserID" type="xs:string" use="required"/>
    <xs:attribute name="AlternativeUserID" type="xs:string" use="optional"/>
    <xs:attribute name="UserName" type="xs:string" use="optional"/>
    <xs:attribute name="UserIsRequestor" type="xs:boolean" use="optional" default="true"/>
    <xs:attribute name="NetworkAccessPointID" type="xs:string" use="optional"/>
    <xs:attribute name="NetworkAccessPointTypeCode" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:unsignedByte">
          <xs:enumeration value="1">
            <xs:annotation>
              <xs:appinfo>Machine Name, including DNS name</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="2">
            <xs:annotation>
              <xs:appinfo>IP Address</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="3">
            <xs:annotation>
              <xs:appinfo>Telephone Number</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ParticipantObjectIdentificationType">
    <xs:sequence>
      <xs:element name="ParticipantObjectIDTypeCode" type="tns:CodedValueType"/>
      <xs:choice minOccurs="0">
        <xs:element name="ParticipantObjectName" type="xs:string" minOccurs="0"/>
        <xs:element name="ParticipantObjectQuery" type="xs:base64Binary" minOccurs="0"/>
      </xs:choice>
      <xs:element name="ParticipantObjectDetail" type="tns:TypeValuePairType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="ParticipantObjectID" type="xs:string" use="required"/>
    <xs:attribute name="ParticipantObjectTypeCode" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:unsignedByte">
          <xs:enumeration value="1">
            <xs:annotation>
              <xs:appinfo>Person</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="2">
            <xs:annotation>
              <xs:appinfo>System object</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="3">
            <xs:annotation>
              <xs:appinfo>Organization</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="4">
            <xs:annotation>
              <xs:appinfo>Other</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ParticipantObjectTypeCodeRole" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:unsignedByte">
          <xs:enumeration value="1">
            <xs:annotation>
              <xs:appinfo>Patient</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="2">
            <xs:annotation>
              <xs:appinfo>Location</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="3">
            <xs:annotation>
              <xs:appinfo>Report</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="4">
            <xs:annotation>
              <xs:appinfo>Resource</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="5">
            <xs:annotation>
              <xs:appinfo>Master file</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="6">
            <xs:annotation>
              <xs:appinfo>User</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="7">
            <xs:annotation>
              <xs:appinfo>List</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="8">
            <xs:annotation>
              <xs:appinfo>Doctor</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="9">
            <xs:annotation>
              <xs:appinfo>Subscriber</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="10">
            <xs:annotation>
              <xs:appinfo>Guarantor</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="11">
            <xs:annotation>
              <xs:appinfo>Security User Entity</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="12">
            <xs:annotation>
              <xs:appinfo>Security User Group</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="13">
            <xs:annotation>
              <xs:appinfo>Security Resource</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="14">
            <xs:annotation>
              <xs:appinfo>Security Granualarity Definition</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="15">
            <xs:annotation>
              <xs:appinfo>Provider</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="16">
            <xs:annotation>
              <xs:appinfo>Report Destination</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="17">
            <xs:annotation>
              <xs:appinfo>Report Library</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="18">
            <xs:annotation>
              <xs:appinfo>Schedule</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="19">
            <xs:annotation>
              <xs:appinfo>Customer</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="20">
            <xs:annotation>
              <xs:appinfo>Job</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="21">
            <xs:annotation>
              <xs:appinfo>Job Stream</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="22">
            <xs:annotation>
              <xs:appinfo>Table</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="23">
            <xs:annotation>
              <xs:appinfo>Routing Criteria</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="24">
            <xs:annotation>
              <xs:appinfo>Query</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ParticipantObjectDataLifeCycle" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:unsignedByte">
          <xs:enumeration value="1">
            <xs:annotation>
              <xs:appinfo>Origination / Creation</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="2">
            <xs:annotation>
              <xs:appinfo>Import / Copy from original</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="3">
            <xs:annotation>
              <xs:appinfo>Amendment</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="4">
            <xs:annotation>
              <xs:appinfo>Verification</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="5">
            <xs:annotation>
              <xs:appinfo>Translation</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="6">
            <xs:annotation>
              <xs:appinfo>Access / Use</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="7">
            <xs:annotation>
              <xs:appinfo>De-identification</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="8">
            <xs:annotation>
              <xs:appinfo>Aggregation, summarization, derivation</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="9">
            <xs:annotation>
              <xs:appinfo>Report</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="10">
            <xs:annotation>
              <xs:appinfo>Export / Copy to target</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="11">
            <xs:annotation>
              <xs:appinfo>Disclosure</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="12">
            <xs:annotation>
              <xs:appinfo>Receipt of disclosure</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="13">
            <xs:annotation>
              <xs:appinfo>Archiving</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="14">
            <xs:annotation>
              <xs:appinfo>Logical deletion</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="15">
            <xs:annotation>
              <xs:appinfo>Permanent erasure / Physical destruction</xs:appinfo>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ParticipantObjectSensitivity" type="xs:string" use="optional"/>
  </xs:complexType>
  <xs:complexType name="CodedValueType">
    <xs:attribute name="code" type="xs:string" use="required"/>
    <xs:attributeGroup ref="tns:CodeSystem"/>
    <xs:attribute name="displayName" type="xs:string" use="optional"/>
    <xs:attribute name="originalText" type="xs:string" use="optional"/>
  </xs:complexType>
  <xs:complexType name="TypeValuePairType">
    <xs:attribute name="type" type="xs:string" use="required"/>
    <xs:attribute name="value" type="xs:base64Binary" use="required"/>
  </xs:complexType>
  <xs:attributeGroup name="CodeSystem">
    <xs:attribute name="codeSystem" type="tns:OID" use="optional"/>
    <xs:attribute name="codeSystemName" type="xs:string" use="optional"/>
  </xs:attributeGroup>
  <xs:simpleType name="OID">
    <xs:restriction base="xs:string">
      <xs:whiteSpace value="collapse"/>
    </xs:restriction>
  </xs:simpleType>
  <!--The following were added from the AuditLogQuery WSDL-->
  <xs:complexType name="FindAuditEventsType">
    <xs:sequence>
      <xs:element name="patientId" type="xs:string" minOccurs="1"/>
      <xs:element name="userId" type="xs:string"/>
      <xs:element name="beginDateTime" type="xs:dateTime"/>
      <xs:element name="endDateTime" type="xs:dateTime"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="FindAuditEvents" type="tns:FindAuditEventsType"/>
  <xs:complexType name="FindAuditEventsResponseType">
    <xs:sequence>
      <xs:element name="findAuditEventsReturn" type="tns:AuditMessageType" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="FindAuditEventsResponse" type="tns:FindAuditEventsResponseType"/>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\docs.oasis-open.org\wsn\b-2.xsd</con:url><con:content><![CDATA[<!--OASIS takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights. Information on OASIS's procedures with respect to rights in OASIS specifications can be found at the OASIS website. Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementors or users of this specification, can be obtained from the OASIS Executive Director.

OASIS invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights which may cover technology that may be required to implement this specification. Please address the information to the OASIS Executive Director.

Copyright (C) OASIS Open (2004-2006). All Rights Reserved.

This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to OASIS, except as needed for the purpose of developing OASIS specifications, in which case the procedures for copyrights defined in the OASIS Intellectual Property Rights document must be followed, or as required to translate it into languages other than English. 

The limited permissions granted above are perpetual and will not be revoked by OASIS or its successors or assigns. 

This document and the information contained herein is provided on an "AS IS" basis and OASIS DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.-->
<xsd:schema targetNamespace="http://docs.oasis-open.org/wsn/b-2" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:wsrf-bf="http://docs.oasis-open.org/wsrf/bf-2" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <!--======================== Imports  ============================-->
  <xsd:import namespace="http://www.w3.org/2005/08/addressing" schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd"/>
  <xsd:import namespace="http://docs.oasis-open.org/wsrf/bf-2" schemaLocation="../wsrf/bf-2.xsd"/>
  <xsd:import namespace="http://docs.oasis-open.org/wsn/t-1" schemaLocation="t-1.xsd"/>
  <!--===================== Misc. Helper Types =====================-->
  <xsd:complexType name="QueryExpressionType" mixed="true">
    <xsd:sequence>
      <xsd:any minOccurs="0" maxOccurs="1" processContents="lax"/>
    </xsd:sequence>
    <xsd:attribute name="Dialect" type="xsd:anyURI" use="required"/>
  </xsd:complexType>
  <xsd:complexType name="TopicExpressionType" mixed="true">
    <xsd:sequence>
      <xsd:any minOccurs="0" maxOccurs="1" processContents="lax"/>
    </xsd:sequence>
    <xsd:attribute name="Dialect" type="xsd:anyURI" use="required"/>
    <xsd:anyAttribute/>
  </xsd:complexType>
  <xsd:complexType name="FilterType">
    <xsd:sequence>
      <xsd:any minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="SubscriptionPolicyType">
    <xsd:sequence>
      <xsd:any minOccurs="0" maxOccurs="unbounded" processContents="lax"/>
    </xsd:sequence>
  </xsd:complexType>
  <!--=============== Resource Property Related  ===================-->
  <!--======== Resource Properties for NotificationProducer ========-->
  <xsd:element name="TopicExpression" type="wsnt:TopicExpressionType"/>
  <xsd:element name="FixedTopicSet" type="xsd:boolean" default="true"/>
  <xsd:element name="TopicExpressionDialect" type="xsd:anyURI"/>
  <xsd:element name="NotificationProducerRP">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="wsnt:TopicExpression" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element ref="wsnt:FixedTopicSet" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="wsnt:TopicExpressionDialect" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element ref="wstop:TopicSet" minOccurs="0" maxOccurs="1"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <!--======== Resource Properties for SubscriptionManager =========-->
  <xsd:element name="ConsumerReference" type="wsa:EndpointReferenceType"/>
  <xsd:element name="Filter" type="wsnt:FilterType"/>
  <xsd:element name="SubscriptionPolicy" type="wsnt:SubscriptionPolicyType"/>
  <xsd:element name="CreationTime" type="xsd:dateTime"/>
  <xsd:element name="SubscriptionManagerRP">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="wsnt:ConsumerReference" minOccurs="1" maxOccurs="1"/>
        <xsd:element ref="wsnt:Filter" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="wsnt:SubscriptionPolicy" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="wsnt:CreationTime" minOccurs="0" maxOccurs="1"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <!--================= Notification Metadata  =====================-->
  <xsd:element name="SubscriptionReference" type="wsa:EndpointReferenceType"/>
  <xsd:element name="Topic" type="wsnt:TopicExpressionType"/>
  <xsd:element name="ProducerReference" type="wsa:EndpointReferenceType"/>
  <!--================== Message Helper Types  =====================-->
  <xsd:complexType name="NotificationMessageHolderType">
    <xsd:sequence>
      <xsd:element ref="wsnt:SubscriptionReference" minOccurs="0" maxOccurs="1"/>
      <xsd:element ref="wsnt:Topic" minOccurs="0" maxOccurs="1"/>
      <xsd:element ref="wsnt:ProducerReference" minOccurs="0" maxOccurs="1"/>
      <xsd:element name="Message">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:any namespace="##any" processContents="lax" minOccurs="1" maxOccurs="1"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotificationMessage" type="wsnt:NotificationMessageHolderType"/>
  <!--========== Message Types for NotificationConsumer  ===========-->
  <xsd:element name="Notify">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="wsnt:NotificationMessage" minOccurs="1" maxOccurs="unbounded"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <!--========== Message Types for NotificationProducer  ===========-->
  <xsd:simpleType name="AbsoluteOrRelativeTimeType">
    <xsd:union memberTypes="xsd:dateTime xsd:duration"/>
  </xsd:simpleType>
  <xsd:element name="CurrentTime" type="xsd:dateTime"/>
  <xsd:element name="TerminationTime" nillable="true" type="xsd:dateTime"/>
  <xsd:element name="ProducerProperties" type="wsnt:QueryExpressionType"/>
  <xsd:element name="MessageContent" type="wsnt:QueryExpressionType"/>
  <xsd:element name="UseRaw">
    <xsd:complexType/>
  </xsd:element>
  <xsd:element name="Subscribe">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="ConsumerReference" type="wsa:EndpointReferenceType" minOccurs="1" maxOccurs="1"/>
        <xsd:element name="Filter" type="wsnt:FilterType" minOccurs="0" maxOccurs="1"/>
        <xsd:element name="InitialTerminationTime" type="wsnt:AbsoluteOrRelativeTimeType" nillable="true" minOccurs="0" maxOccurs="1"/>
        <xsd:element name="SubscriptionPolicy" minOccurs="0" maxOccurs="1">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:any namespace="##any" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="SubscribeResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="SubscriptionReference" type="wsa:EndpointReferenceType" minOccurs="1" maxOccurs="1"/>
        <xsd:element ref="wsnt:CurrentTime" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="wsnt:TerminationTime" minOccurs="0" maxOccurs="1"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="GetCurrentMessage">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="Topic" type="wsnt:TopicExpressionType"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="GetCurrentMessageResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="SubscribeCreationFailedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="SubscribeCreationFailedFault" type="wsnt:SubscribeCreationFailedFaultType"/>
  <xsd:complexType name="InvalidFilterFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType">
        <xsd:sequence>
          <xsd:element name="UnknownFilter" type="xsd:QName" minOccurs="1" maxOccurs="unbounded"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="InvalidFilterFault" type="wsnt:InvalidFilterFaultType"/>
  <xsd:complexType name="TopicExpressionDialectUnknownFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="TopicExpressionDialectUnknownFault" type="wsnt:TopicExpressionDialectUnknownFaultType"/>
  <xsd:complexType name="InvalidTopicExpressionFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="InvalidTopicExpressionFault" type="wsnt:InvalidTopicExpressionFaultType"/>
  <xsd:complexType name="TopicNotSupportedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="TopicNotSupportedFault" type="wsnt:TopicNotSupportedFaultType"/>
  <xsd:complexType name="MultipleTopicsSpecifiedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="MultipleTopicsSpecifiedFault" type="wsnt:MultipleTopicsSpecifiedFaultType"/>
  <xsd:complexType name="InvalidProducerPropertiesExpressionFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="InvalidProducerPropertiesExpressionFault" type="wsnt:InvalidProducerPropertiesExpressionFaultType"/>
  <xsd:complexType name="InvalidMessageContentExpressionFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="InvalidMessageContentExpressionFault" type="wsnt:InvalidMessageContentExpressionFaultType"/>
  <xsd:complexType name="UnrecognizedPolicyRequestFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType">
        <xsd:sequence>
          <xsd:element name="UnrecognizedPolicy" type="xsd:QName" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnrecognizedPolicyRequestFault" type="wsnt:UnrecognizedPolicyRequestFaultType"/>
  <xsd:complexType name="UnsupportedPolicyRequestFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType">
        <xsd:sequence>
          <xsd:element name="UnsupportedPolicy" type="xsd:QName" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnsupportedPolicyRequestFault" type="wsnt:UnsupportedPolicyRequestFaultType"/>
  <xsd:complexType name="NotifyMessageNotSupportedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="NotifyMessageNotSupportedFault" type="wsnt:NotifyMessageNotSupportedFaultType"/>
  <xsd:complexType name="UnacceptableInitialTerminationTimeFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType">
        <xsd:sequence>
          <xsd:element name="MinimumTime" type="xsd:dateTime"/>
          <xsd:element name="MaximumTime" type="xsd:dateTime" minOccurs="0"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnacceptableInitialTerminationTimeFault" type="wsnt:UnacceptableInitialTerminationTimeFaultType"/>
  <xsd:complexType name="NoCurrentMessageOnTopicFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="NoCurrentMessageOnTopicFault" type="wsnt:NoCurrentMessageOnTopicFaultType"/>
  <!--======== Message Types for PullPoint  ========================-->
  <xsd:element name="GetMessages">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="MaximumNumber" type="xsd:nonNegativeInteger" minOccurs="0"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="GetMessagesResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="wsnt:NotificationMessage" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="DestroyPullPoint">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="DestroyPullPointResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="UnableToGetMessagesFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnableToGetMessagesFault" type="wsnt:UnableToGetMessagesFaultType"/>
  <xsd:complexType name="UnableToDestroyPullPointFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnableToDestroyPullPointFault" type="wsnt:UnableToDestroyPullPointFaultType"/>
  <!--======== Message Types for Create PullPoint  =================-->
  <xsd:element name="CreatePullPoint">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="CreatePullPointResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="PullPoint" type="wsa:EndpointReferenceType"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
      <xsd:anyAttribute/>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="UnableToCreatePullPointFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnableToCreatePullPointFault" type="wsnt:UnableToCreatePullPointFaultType"/>
  <!--======== Message Types for Base SubscriptionManager  =========-->
  <xsd:element name="Renew">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="TerminationTime" type="wsnt:AbsoluteOrRelativeTimeType" nillable="true" minOccurs="1" maxOccurs="1"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="RenewResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="wsnt:TerminationTime" minOccurs="1" maxOccurs="1"/>
        <xsd:element ref="wsnt:CurrentTime" minOccurs="0" maxOccurs="1"/>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="UnacceptableTerminationTimeFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType">
        <xsd:sequence>
          <xsd:element name="MinimumTime" type="xsd:dateTime"/>
          <xsd:element name="MaximumTime" type="xsd:dateTime" minOccurs="0"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnacceptableTerminationTimeFault" type="wsnt:UnacceptableTerminationTimeFaultType"/>
  <xsd:element name="Unsubscribe">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="UnsubscribeResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="UnableToDestroySubscriptionFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="UnableToDestroySubscriptionFault" type="wsnt:UnableToDestroySubscriptionFaultType"/>
  <!--====== Message Types for Pausable SubscriptionManager  =======-->
  <xsd:element name="PauseSubscription">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="PauseSubscriptionResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="ResumeSubscription">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="ResumeSubscriptionResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="PauseFailedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="PauseFailedFault" type="wsnt:PauseFailedFaultType"/>
  <xsd:complexType name="ResumeFailedFaultType">
    <xsd:complexContent>
      <xsd:extension base="wsrf-bf:BaseFaultType"/>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="ResumeFailedFault" type="wsnt:ResumeFailedFaultType"/>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\docs.oasis-open.org\wsrf\bf-2.xsd</con:url><con:content><![CDATA[<!--OASIS takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights. Information on OASIS's procedures with respect to rights in OASIS specifications can be found at the OASIS website. Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementers or users of this specification, can be obtained from the OASIS Executive Director. 

OASIS invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights which may cover technology that may be required to implement this specification. Please address the information to the OASIS Executive Director. 

Copyright (C) OASIS Open (2005). All Rights Reserved. 

This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to OASIS, except as needed for the purpose of developing OASIS specifications, in which case the procedures for copyrights defined in the OASIS Intellectual Property Rights document must be followed, or as required to translate it into languages other than English. 

The limited permissions granted above are perpetual and will not be revoked by OASIS or its successors or assigns. 

This document and the information contained herein is provided on an "AS IS" basis and OASIS DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.-->
<xsd:schema elementFormDefault="qualified" attributeFormDefault="unqualified" targetNamespace="http://docs.oasis-open.org/wsrf/bf-2" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:wsrf-bf="http://docs.oasis-open.org/wsrf/bf-2">
  <xsd:import namespace="http://www.w3.org/2005/08/addressing" schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd"/>
  <xsd:import namespace="http://www.w3.org/XML/1998/namespace" schemaLocation="../../www.w3.org/2001/xml.xsd">
    <xsd:annotation>
      <xsd:documentation>Get access to the xml: attribute groups for xml:lang as declared on 'schema'
        and 'documentation' below</xsd:documentation>
    </xsd:annotation>
  </xsd:import>
  <!--====================== BaseFault Types =======================-->
  <xsd:element name="BaseFault" type="wsrf-bf:BaseFaultType"/>
  <xsd:complexType name="BaseFaultType">
    <xsd:sequence>
      <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="Timestamp" type="xsd:dateTime" minOccurs="1" maxOccurs="1"/>
      <xsd:element name="Originator" type="wsa:EndpointReferenceType" minOccurs="0" maxOccurs="1"/>
      <xsd:element name="ErrorCode" minOccurs="0" maxOccurs="1">
        <xsd:complexType>
          <xsd:complexContent>
            <xsd:extension base="xsd:anyType">
              <xsd:attribute name="dialect" type="xsd:anyURI" use="required"/>
            </xsd:extension>
          </xsd:complexContent>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="Description" minOccurs="0" maxOccurs="unbounded">
        <xsd:complexType>
          <xsd:simpleContent>
            <xsd:extension base="xsd:string">
              <xsd:attribute ref="xml:lang" use="optional"/>
            </xsd:extension>
          </xsd:simpleContent>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="FaultCause" minOccurs="0" maxOccurs="1">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:any namespace="##other" processContents="lax" minOccurs="1" maxOccurs="1"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
    <xsd:anyAttribute namespace="##other" processContents="lax"/>
  </xsd:complexType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\docs.oasis-open.org\wsn\t-1.xsd</con:url><con:content><![CDATA[<!--OASIS takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights. Information on OASIS's procedures with respect to rights in OASIS specifications can be found at the OASIS website. Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementors or users of this specification, can be obtained from the OASIS Executive Director.

OASIS invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights which may cover technology that may be required to implement this specification. Please address the information to the OASIS Executive Director.

Copyright (C) OASIS Open (2004-2006). All Rights Reserved.

This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to OASIS, except as needed for the purpose of developing OASIS specifications, in which case the procedures for copyrights defined in the OASIS Intellectual Property Rights document must be followed, or as required to translate it into languages other than English. 

The limited permissions granted above are perpetual and will not be revoked by OASIS or its successors or assigns. 

This document and the information contained herein is provided on an "AS IS" basis and OASIS DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.-->
<xsd:schema targetNamespace="http://docs.oasis-open.org/wsn/t-1" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wstop="http://docs.oasis-open.org/wsn/t-1">
  <!--=============== utility type definitions  ====================-->
  <xsd:complexType name="Documentation" mixed="true">
    <xsd:sequence>
      <xsd:any processContents="lax" minOccurs="0" maxOccurs="unbounded" namespace="##any"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="ExtensibleDocumented" abstract="true" mixed="false">
    <xsd:sequence>
      <xsd:element name="documentation" type="wstop:Documentation" minOccurs="0"/>
    </xsd:sequence>
    <xsd:anyAttribute namespace="##other" processContents="lax"/>
  </xsd:complexType>
  <xsd:complexType name="QueryExpressionType" mixed="true">
    <xsd:sequence>
      <xsd:any minOccurs="0" maxOccurs="1" processContents="lax"/>
    </xsd:sequence>
    <xsd:attribute name="Dialect" type="xsd:anyURI" use="required"/>
  </xsd:complexType>
  <!--================== Topic-Namespace Related  ================-->
  <xsd:complexType name="TopicNamespaceType">
    <xsd:complexContent>
      <xsd:extension base="wstop:ExtensibleDocumented">
        <xsd:sequence>
          <xsd:element name="Topic" minOccurs="0" maxOccurs="unbounded">
            <xsd:complexType>
              <xsd:complexContent>
                <xsd:extension base="wstop:TopicType">
                  <xsd:attribute name="parent" type="wstop:ConcreteTopicExpression"/>
                </xsd:extension>
              </xsd:complexContent>
            </xsd:complexType>
          </xsd:element>
          <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="lax"/>
        </xsd:sequence>
        <xsd:attribute name="name" type="xsd:NCName"/>
        <xsd:attribute name="targetNamespace" type="xsd:anyURI" use="required"/>
        <xsd:attribute name="final" type="xsd:boolean" default="false"/>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="TopicNamespace" type="wstop:TopicNamespaceType">
    <xsd:unique name="rootTopicUniqueness">
      <xsd:selector xpath="wstop:Topic"/>
      <xsd:field xpath="@name"/>
    </xsd:unique>
  </xsd:element>
  <xsd:attribute name="topicNamespaceLocation" type="xsd:anyURI"/>
  <!--===================== Topic Related  =========================-->
  <xsd:complexType name="TopicType">
    <xsd:complexContent>
      <xsd:extension base="wstop:ExtensibleDocumented">
        <xsd:sequence>
          <xsd:element name="MessagePattern" type="wstop:QueryExpressionType" minOccurs="0" maxOccurs="1"/>
          <xsd:element name="Topic" type="wstop:TopicType" minOccurs="0" maxOccurs="unbounded">
            <xsd:unique name="childTopicUniqueness">
              <xsd:selector xpath="wstop:topic"/>
              <xsd:field xpath="@name"/>
            </xsd:unique>
          </xsd:element>
          <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
        <xsd:attribute name="name" use="required" type="xsd:NCName"/>
        <xsd:attribute name="messageTypes">
          <xsd:simpleType>
            <xsd:list itemType="xsd:QName"/>
          </xsd:simpleType>
        </xsd:attribute>
        <xsd:attribute name="final" type="xsd:boolean" default="false"/>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <!--================ Topic Set Related  ===================-->
  <xsd:complexType name="TopicSetType">
    <xsd:complexContent>
      <xsd:extension base="wstop:ExtensibleDocumented">
        <xsd:sequence>
          <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="lax"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:element name="TopicSet" type="wstop:TopicSetType"/>
  <xsd:attribute name="topic" type="xsd:boolean" default="false"/>
  <!--================ Topic Expression Related  ===================-->
  <xsd:simpleType name="FullTopicExpression">
    <xsd:restriction base="xsd:token">
      <xsd:annotation>
        <xsd:documentation>TopicPathExpression  ::=   TopicPath ( '|' TopicPath )*  
        TopicPath       ::=   RootTopic ChildTopicExpression* 
        RootTopic       ::=   NamespacePrefix? ('//')? (NCName | '*')  
        NamespacePrefix ::=   NCName ':'      
        ChildTopicExpression ::=   '/' '/'? (QName | NCName | '*'| '.')</xsd:documentation>
      </xsd:annotation>
      <xsd:pattern value="([\i-[:]][\c-[:]]*:)?(//)?([\i-[:]][\c-[:]]*|\*)((/|//)(([\i-[:]][\c-[:]]*:)?[\i-[:]][\c-[:]]*|\*|[.]))*(\|([\i-[:]][\c-[:]]*:)?(//)?([\i-[:]][\c-[:]]*|\*)((/|//)(([\i-[:]][\c-[:]]*:)?[\i-[:]][\c-[:]]*|\*|[.]))*)*"></xsd:pattern>
    </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="ConcreteTopicExpression">
    <xsd:restriction base="xsd:token">
      <xsd:annotation>
        <xsd:documentation>The pattern allows strings matching the following EBNF:
    ConcreteTopicPath    ::=   RootTopic ChildTopic*    
    RootTopic            ::=   QName  
    ChildTopic           ::=   '/' (QName | NCName)</xsd:documentation>
      </xsd:annotation>
      <xsd:pattern value="(([\i-[:]][\c-[:]]*:)?[\i-[:]][\c-[:]]*)(/([\i-[:]][\c-[:]]*:)?[\i-[:]][\c-[:]]*)*"></xsd:pattern>
    </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="SimpleTopicExpression">
    <xsd:restriction base="xsd:QName">
      <xsd:annotation>
        <xsd:documentation>The pattern allows strings matching the following EBNF:
    RootTopic            ::=   QName</xsd:documentation>
      </xsd:annotation>
    </xsd:restriction>
  </xsd:simpleType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\Subscription.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:common:subscription" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:common:subscription" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:addr="http://www.w3.org/2005/08/addressing" xmlns:ihe="urn:ihe:iti:xds-b:2007" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:nccommon="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:nhin-cdc="http://www.hhs.gov/healthit/nhin/cdc" xmlns:subb2obcdc="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:subb2obdoc="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments">
  <xsd:import schemaLocation="../../docs.oasis-open.org/wsn/b-2.xsd" namespace="http://docs.oasis-open.org/wsn/b-2"/>
  <xsd:import schemaLocation="../../ebRS/rim.xsd" namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"/>
  <xsd:import schemaLocation="../../ihe/XDS.b_DocumentRepository.xsd" namespace="urn:ihe:iti:xds-b:2007"/>
  <xsd:import schemaLocation="../common/NhincCommon.xsd" namespace="urn:gov:hhs:fha:nhinc:common:nhinccommon"/>
  <xsd:import schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd" namespace="http://www.w3.org/2005/08/addressing"/>
  <xsd:import schemaLocation="../common/Cdc.xsd" namespace="http://www.hhs.gov/healthit/nhin/cdc"/>
  <xsd:import schemaLocation="../common/SubscriptionB2OverrideForCdc.xsd" namespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc"/>
  <xsd:import schemaLocation="../common/SubscriptionB2OverrideForDocuments.xsd" namespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments"/>
  <xsd:complexType name="CommunityType">
    <xsd:sequence>
      <xsd:element name="Id" type="xsd:string"/>
      <xsd:element name="Name" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Community" type="tns:CommunityType"></xsd:element>
  <xsd:complexType name="SubscriberType">
    <xsd:sequence>
      <xsd:element name="Community" type="tns:CommunityType"/>
      <xsd:element name="NotificationConsumerEndpointAddress" type="xsd:string"/>
      <xsd:element name="UserAddress" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Subscriber" type="tns:SubscriberType"></xsd:element>
  <xsd:complexType name="SubscribeeType">
    <xsd:sequence>
      <xsd:element name="Community" type="tns:CommunityType"/>
      <xsd:element name="NotificationProducerEndpointAddress" type="xsd:string"/>
      <xsd:element name="UserAddress" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Subscribee" type="tns:SubscribeeType"></xsd:element>
  <xsd:complexType name="SubscriptionCriteriaType">
    <xsd:sequence>
      <xsd:element name="SubscribeePatient" type="nccommon:QualifiedSubjectIdentifierType"/>
      <xsd:element name="SubscriberPatient" type="nccommon:QualifiedSubjectIdentifierType"></xsd:element>
      <xsd:element name="Criteria" type="tns:CriteriaType" minOccurs="0"></xsd:element>
      <xsd:element name="TopicExpression" type="tns:TopicExpressionType" minOccurs="0"></xsd:element>
      <xsd:element name="SubscriptionPolicy" type="tns:SubscriptionPolicyType" minOccurs="0"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionCriteria" type="tns:SubscriptionCriteriaType"></xsd:element>
  <xsd:complexType name="SubscriptionReferenceType">
    <xsd:sequence>
      <xsd:element name="SubscriptionManagerEndpointAddress" type="xsd:string" minOccurs="0"/>
      <xsd:element name="ReferenceParameters" type="tns:ReferenceParametersType" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType"/>
  <xsd:complexType name="SubscriptionItemType">
    <xsd:sequence>
      <xsd:element name="Subscriber" type="tns:SubscriberType" minOccurs="0"/>
      <xsd:element name="Subscribee" type="tns:SubscribeeType" minOccurs="0"/>
      <xsd:element name="SubscriptionCriteria" type="tns:SubscriptionCriteriaType" minOccurs="0"/>
      <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType" minOccurs="0"/>
      <xsd:element name="ParentSubscriptionReference" type="tns:SubscriptionReferenceType" minOccurs="0"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionItem" type="tns:SubscriptionItemType"/>
  <xsd:complexType name="SubscriptionItemsType">
    <xsd:sequence>
      <xsd:element name="subscriptionItem" type="tns:SubscriptionItemType" maxOccurs="unbounded" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionItems" type="tns:SubscriptionItemsType"></xsd:element>
  <xsd:complexType name="CriterionType">
    <xsd:sequence>
      <xsd:element name="Key" type="xsd:string"/>
      <xsd:element name="Value" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Criterion" type="tns:CriterionType"></xsd:element>
  <xsd:complexType name="CriteriaType">
    <xsd:sequence>
      <xsd:element name="Criterion" type="tns:CriterionType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Criteria" type="tns:CriteriaType"></xsd:element>
  <xsd:complexType name="ReferenceParameterType">
    <xsd:sequence>
      <xsd:element name="Prefix" type="xsd:string" minOccurs="0"/>
      <xsd:element name="Namespace" type="xsd:string"/>
      <xsd:element name="ElementName" type="xsd:string"/>
      <xsd:element name="Value" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="ReferenceParameter" type="tns:ReferenceParameterType"></xsd:element>
  <xsd:complexType name="ReferenceParametersType">
    <xsd:sequence>
      <xsd:element name="ReferenceParameter" type="tns:ReferenceParameterType" maxOccurs="unbounded" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="ReferenceParameters" type="tns:ReferenceParametersType"></xsd:element>
  <xsd:complexType name="SubscriptionReferencesType">
    <xsd:sequence>
      <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionReferences" type="tns:SubscriptionReferencesType"></xsd:element>
  <xsd:complexType name="SubscribeDocumentRequestType">
    <xsd:sequence>
      <xsd:element name="Assertion" type="nccommon:AssertionType"/>
      <xsd:element name="Subscribe" type="tns:SubscribeDocumentType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeDocumentRequest" type="tns:SubscribeDocumentRequestType"></xsd:element>
  <!--begin CdcBioPackage messages-->
  <!--<xsd:complexType name="SubscribeCdcBioPackageRequestType">
        <xsd:sequence>
            <xsd:element name="Assertion" type="nccommon:AssertionType"/>
            <xsd:element name="Subscribe" type="tns:SubscribeBioPackageType"/>
            <xsd:element name="TargetHomeCommunity" type="nccommon:HomeCommunityType"/>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="SubscribeCdcBioPackageRequest" type="tns:SubscribeCdcBioPackageRequestType">
    </xsd:element>
    <xsd:complexType name="NotifyOfCdcBioPackageType">
        <xsd:sequence>
            <xsd:element name="Assertion" type="nccommon:AssertionType">
            </xsd:element>
            <xsd:element name="Notify" type="subb2obcdc:NotifyCdcBioPackageType">
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="NotifySubscribersOfCdcBioPackage" type="tns:NotifyOfCdcBioPackageType"/>
    <xsd:element name="NotifyOfCdcBioPackage" type="tns:NotifyOfCdcBioPackageType"/>-->
  <!--end CdcBioPackage messages-->
  <xsd:complexType name="UnsubscribeType">
    <xsd:sequence>
      <xsd:element name="subscriptionReference" type="tns:SubscriptionReferenceType"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Unsubscribe" type="tns:UnsubscribeType"></xsd:element>
  <!--<xsd:complexType name="NotifyOfDocumentType">
        <xsd:sequence>
            <xsd:element name="Assertion" type="nccommon:AssertionType"/>
            <xsd:element ref="rim:RegistryObjectList" minOccurs="0"/>
            <xsd:element name="Notify" type="tns:NotifyDocumentType"/>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="NotifyOfDocument" type="tns:NotifyOfDocumentType">
    </xsd:element>
    <xsd:element name="NotifySubscribersOfDocument" type="tns:NotifyOfDocumentType">
    </xsd:element>-->
  <xsd:complexType name="EmptyType">
    <xsd:sequence>
      <xsd:element name="notUsed" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Empty" type="tns:EmptyType"></xsd:element>
  <xsd:complexType name="AckInputType">
    <xsd:sequence>
      <xsd:element name="notUsed" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="AckInput" type="tns:AckInputType"></xsd:element>
  <xsd:complexType name="DeleteSubscriptionMessageRequestType">
    <xsd:sequence>
      <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="DeleteSubscriptionMessageRequest" type="tns:DeleteSubscriptionMessageRequestType"></xsd:element>
  <xsd:complexType name="RetrieveBySubscriptionReferenceRequestMessageType">
    <xsd:sequence>
      <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RetrieveBySubscriptionReferenceRequestMessage" type="tns:RetrieveBySubscriptionReferenceRequestMessageType"></xsd:element>
  <xsd:complexType name="RetrieveByParentSubscriptionReferenceMessageType">
    <xsd:sequence>
      <xsd:element name="SubscriptionReference" type="tns:SubscriptionReferenceType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="RetrieveByParentSubscriptionReferenceMessage" type="tns:RetrieveByParentSubscriptionReferenceMessageType"></xsd:element>
  <xsd:complexType name="UpdateCppRequestType">
    <xsd:sequence>
      <xsd:element name="assertion" type="nccommon:AssertionType"/>
      <xsd:element name="RetrieveDocumentSetRequest" type="ihe:RetrieveDocumentSetRequestType"/>
      <xsd:element name="ExtrinsicObject" type="rim:ExtrinsicObjectType"/>
      <xsd:element name="optInOutFlag" type="xsd:boolean"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="UpdateCppRequest" type="tns:UpdateCppRequestType"></xsd:element>
  <xsd:complexType name="UpdateCppResponseType">
    <xsd:sequence>
      <xsd:element name="message" type="xsd:string" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="UpdateCppResponse" type="tns:UpdateCppResponseType"></xsd:element>
  <xsd:complexType name="InternalNhieUnsubscribeType">
    <xsd:sequence>
      <xsd:element ref="tns:SubscriptionReference"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="InternalNhieUnsubscribe" type="tns:InternalNhieUnsubscribeType"></xsd:element>
  <xsd:complexType name="InternalNhieUnsubscribeResponseType">
    <xsd:sequence>
      <xsd:element name="notUsed" type="xsd:string"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="InternalNhieUnsubscribeResponse" type="tns:InternalNhieUnsubscribeResponseType"></xsd:element>
  <xsd:complexType name="NotifyWrapperType">
    <xsd:sequence>
      <xsd:element name="Assertion" type="nccommon:AssertionType"/>
      <xsd:element ref="wsnt:Notify"/>
      <xsd:element name="TargetHomeCommunity" type="nccommon:HomeCommunityType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="NotifyWrapper" type="tns:NotifyWrapperType"/>
  <xsd:complexType name="TopicExpressionType">
    <xsd:simpleContent>
      <xsd:extension base="tns:TopicExpressionValue">
        <xsd:attribute name="Dialect" use="required">
          <xsd:simpleType>
            <xsd:restriction base="xsd:string">
              <xsd:enumeration value="text"/>
            </xsd:restriction>
          </xsd:simpleType>
        </xsd:attribute>
      </xsd:extension>
    </xsd:simpleContent>
  </xsd:complexType>
  <xsd:element name="TopicExpression" type="tns:TopicExpressionType"/>
  <xsd:simpleType name="TopicExpressionValue">
    <xsd:restriction base="xsd:string"/>
  </xsd:simpleType>
  <xsd:complexType name="SubscriptionPolicyType">
    <xsd:sequence>
      <xsd:element name="GenericPolicyItems" type="tns:KeyValuePairListType" minOccurs="0"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscriptionPolicy" type="tns:SubscriptionPolicyType"/>
  <xsd:complexType name="KeyValuePairType">
    <xsd:sequence>
      <xsd:element name="Key" type="xsd:string"/>
      <xsd:element name="Value" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="KeyValuePair" type="tns:KeyValuePairType"/>
  <xsd:complexType name="KeyValuePairListType">
    <xsd:sequence>
      <xsd:element name="KeyValuePair" type="tns:KeyValuePairType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="KeyValuePairList" type="tns:KeyValuePairListType"/>
  <xsd:complexType name="SubscribeDocumentType">
    <xsd:sequence>
      <xsd:element name="ConsumerReference" type="addr:EndpointReferenceType"></xsd:element>
      <xsd:element name="AdhocQuery" type="rim:AdhocQueryType"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="SubscribeDocument" type="tns:SubscribeDocumentType"></xsd:element>
  <!--<xsd:complexType name="NotificationMessageHolderType">
        <xsd:sequence>
            <xsd:element ref="wsnt:SubscriptionReference" minOccurs="0"/>
            <xsd:element name="Message">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element ref="ihe:RetrieveDocumentSetRequest"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="NotificationMessageHolder" type="tns:NotificationMessageHolderType">
    </xsd:element>
    <xsd:complexType name="NotifyDocumentType">
        <xsd:sequence>
            <xsd:element name="NotificationMessage" type="tns:NotificationMessageHolderType" maxOccurs="unbounded" minOccurs="0">
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="NotifyDocument" type="tns:NotifyDocumentType">
    </xsd:element>
    <xsd:complexType name="SubscribeBioPackageType">
        <xsd:sequence>
            <xsd:element ref="wsnt:ConsumerReference" minOccurs="0"/>
            <xsd:element ref="wsnt:Filter" minOccurs="0"/>
            <xsd:element name="SubscriptionPolicy" type="subb2obcdc:SubscriptionPolicyType">
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="SubscribeBioPackage" type="tns:SubscribeBioPackageType">
    </xsd:element>-->
  <xsd:complexType name="MessageTypesType">
    <xsd:sequence>
      <xsd:element name="MessageType" type="xsd:string" maxOccurs="unbounded" minOccurs="0"></xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="MessageTypes" type="tns:MessageTypesType"></xsd:element>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\Cdc.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="http://www.hhs.gov/healthit/nhin/cdc" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.hhs.gov/healthit/nhin/cdc">
  <xsd:complexType name="CdcBioPackageSubscriptionCriteriaType">
    <xsd:sequence>
      <xsd:element name="Frequency" minOccurs="0">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="FrequencyUnits" type="xsd:integer"/>
            <xsd:element name="FrequencyDuration" type="xsd:string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="SizeThreshold" type="xsd:integer" minOccurs="0"/>
      <xsd:element name="MessageTypes" type="tns:MessageTypesType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="MessageTypesType">
    <xsd:sequence>
      <xsd:element name="MessageType" type="xsd:string" maxOccurs="unbounded" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="CdcBioPackageSubscriptionCriteria" type="tns:CdcBioPackageSubscriptionCriteriaType"/>
  <xsd:simpleType name="CdcBioPackagePayloadType">
    <xsd:restriction base="xsd:base64Binary"/>
  </xsd:simpleType>
  <xsd:element name="CdcBioPackagePayload" type="tns:CdcBioPackagePayloadType"/>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\SubscriptionB2OverrideForCdc.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:common:subscriptionb2overrideforcdc" xmlns:xdsb="urn:ihe:iti:xds-b:2007" xmlns:addr="http://www.w3.org/2005/08/addressing" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" xmlns:nhin-cdc="http://www.hhs.gov/healthit/nhin/cdc">
  <xsd:import schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd" namespace="http://www.w3.org/2005/08/addressing"/>
  <xsd:import schemaLocation="../../docs.oasis-open.org/wsn/b-2.xsd" namespace="http://docs.oasis-open.org/wsn/b-2"/>
  <xsd:import schemaLocation="../common/Cdc.xsd" namespace="http://www.hhs.gov/healthit/nhin/cdc"/>
  <xsd:complexType name="SubscribeCdcBioPackageType">
    <xsd:sequence>
      <!--<xsd:element name="ConsumerReference" type="addr:EndpointReferenceType"></xsd:element>
            <xsd:element name="Filter" type="wsnt:FilterType" minOccurs="0"></xsd:element>
            <xsd:element name="SubscriptionPolicy" type="tns:SubscriptionPolicy"></xsd:element>-->
      <xsd:element ref="wsnt:ConsumerReference" minOccurs="0"/>
      <xsd:element ref="wsnt:Filter" minOccurs="0"/>
      <xsd:element name="SubscriptionPolicy" type="tns:SubscriptionPolicyType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="SubscriptionPolicyType">
    <xsd:sequence>
      <xsd:element ref="nhin-cdc:CdcBioPackageSubscriptionCriteria"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="NotificationMessageHolderType">
    <xsd:sequence>
      <xsd:element ref="wsnt:SubscriptionReference" minOccurs="0"/>
      <xsd:element ref="wsnt:Topic" minOccurs="0"/>
      <xsd:element name="Message">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element ref="nhin-cdc:CdcBioPackagePayload"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="NotifyCdcBioPackageType">
    <xsd:sequence>
      <xsd:element name="NotificationMessage" type="tns:NotificationMessageHolderType" maxOccurs="unbounded" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\nhinc\common\SubscriptionB2OverrideForDocuments.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:gov:hhs:fha:nhinc:common:subscriptionb2overridefordocuments" xmlns:xdsb="urn:ihe:iti:xds-b:2007" xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:addr="http://www.w3.org/2005/08/addressing" xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2">
  <xsd:import schemaLocation="../../ihe/XDS.b_DocumentRepository.xsd" namespace="urn:ihe:iti:xds-b:2007"/>
  <xsd:import schemaLocation="../../ebRS/rim.xsd" namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"/>
  <xsd:import schemaLocation="../../www.w3.org/2005/08/addressing/ws-addr.xsd" namespace="http://www.w3.org/2005/08/addressing"/>
  <xsd:import schemaLocation="../../docs.oasis-open.org/wsn/b-2.xsd" namespace="http://docs.oasis-open.org/wsn/b-2"/>
  <!--<xsd:complexType name="UnsubscribeType">
        <xsd:sequence>
            <xsd:element name="Assertion" type="assert:assertion"></xsd:element>
            <xsd:any/>
        </xsd:sequence>
    </xsd:complexType>-->
  <xsd:complexType name="SubscribeDocumentType">
    <xsd:sequence>
      <xsd:element name="ConsumerReference" type="addr:EndpointReferenceType"/>
      <xsd:element name="AdhocQuery" type="rim:AdhocQueryType"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="NotificationMessageHolderType">
    <xsd:sequence>
      <xsd:element ref="wsnt:SubscriptionReference" minOccurs="0"/>
      <xsd:element ref="wsnt:Topic" minOccurs="0"/>
      <xsd:element name="Message">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element ref="xdsb:RetrieveDocumentSetRequest"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="NotifyDocumentType">
    <xsd:sequence>
      <xsd:element name="NotificationMessage" type="tns:NotificationMessageHolderType" maxOccurs="unbounded" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\ebRS\edxl-de.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="urn:oasis:names:tc:emergency:EDXL:DE:1.0" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.0CD" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="urn:oasis:names:tc:emergency:EDXL:DE:1.0" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
  <xsd:element name="EDXLDistribution">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="distributionID" type="xsd:string"/>
        <xsd:element name="senderID" type="xsd:string"/>
        <xsd:element name="dateTimeSent" type="xsd:dateTime"/>
        <xsd:element name="distributionStatus" type="statusValues"/>
        <xsd:element name="distributionType" type="typeValues"/>
        <xsd:element name="combinedConfidentiality" type="xsd:string"/>
        <xsd:element name="language" type="xsd:string" minOccurs="0"/>
        <xsd:element name="senderRole" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="recipientRole" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="keyword" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="distributionReference" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="explicitAddress" type="valueSchemeType" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="targetArea" type="targetAreaType" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="contentObject" type="contentObjectType" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:annotation/>
  <xsd:annotation/>
  <xsd:complexType name="contentObjectType">
    <xsd:sequence>
      <xsd:element name="contentDescription" type="xsd:string" minOccurs="0"/>
      <xsd:element name="contentKeyword" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="incidentID" type="xsd:string" minOccurs="0"/>
      <xsd:element name="incidentDescription" type="xsd:string" minOccurs="0"/>
      <xsd:element name="originatorRole" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="consumerRole" type="valueListType" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="confidentiality" type="xsd:string" minOccurs="0"/>
      <xsd:choice>
        <xsd:element name="nonXMLContent" type="nonXMLContentType"/>
        <xsd:element name="xmlContent" type="xmlContentType"/>
      </xsd:choice>
      <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="nonXMLContentType">
    <xsd:sequence>
      <xsd:element name="mimeType" type="xsd:string"/>
      <xsd:element name="size" type="xsd:integer" minOccurs="0"/>
      <xsd:element name="digest" type="xsd:string" minOccurs="0"/>
      <xsd:element name="uri" type="xsd:anyURI" minOccurs="0"/>
      <xsd:element name="contentData" type="xsd:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="xmlContentType">
    <xsd:sequence>
      <xsd:element name="keyXMLContent" type="anyXMLType" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="embeddedXMLContent" type="anyXMLType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="anyXMLType">
    <xsd:sequence>
      <xsd:any namespace="##other" processContents="lax" maxOccurs="unbounded"/>
    </xsd:sequence>
    <xsd:anyAttribute namespace="##other" processContents="lax"/>
  </xsd:complexType>
  <xsd:complexType name="valueListType">
    <xsd:sequence>
      <xsd:element name="valueListUrn" type="xsd:string"/>
      <xsd:element name="value" type="xsd:string" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="valueSchemeType">
    <xsd:sequence>
      <xsd:element name="explicitAddressScheme" type="xsd:string"/>
      <xsd:element name="explicitAddressValue" type="xsd:string" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="targetAreaType">
    <xsd:sequence>
      <xsd:element name="circle" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="polygon" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="country" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="subdivision" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element name="locCodeUN" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:simpleType name="statusValues">
    <xsd:restriction base="xsd:NMTOKEN">
      <xsd:enumeration value="Actual"/>
      <xsd:enumeration value="Exercise"/>
      <xsd:enumeration value="System"/>
      <xsd:enumeration value="Test"/>
    </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="typeValues">
    <xsd:restriction base="xsd:NMTOKEN">
      <xsd:enumeration value="Report"/>
      <xsd:enumeration value="Update"/>
      <xsd:enumeration value="Cancel"/>
      <xsd:enumeration value="Request"/>
      <xsd:enumeration value="Response"/>
      <xsd:enumeration value="Dispatch"/>
      <xsd:enumeration value="Ack"/>
      <xsd:enumeration value="Error"/>
      <xsd:enumeration value="SensorConfiguration"/>
      <xsd:enumeration value="SensorControl"/>
      <xsd:enumeration value="SensorStatus"/>
      <xsd:enumeration value="SensorDetection"/>
    </xsd:restriction>
  </xsd:simpleType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\dev\CONNECT\Product\SoapUI_Test\target\schemas\caqh\CORERule2.2.0.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://www.caqh.org/SOAP/WSDL/CORERule2.2.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.caqh.org/SOAP/WSDL/CORERule2.2.0.xsd" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
  <xs:element name="COREEnvelopeRealTimeRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="RealTimeMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeRealTimeResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="RealTimeMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="ErrorCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ErrorMessage" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchSubmission">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="1" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchSubmissionResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
        <xs:element name="ErrorCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ErrorMessage" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchSubmissionAckRetrievalRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchSubmissionAckRetrievalResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
        <xs:element name="ErrorCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ErrorMessage" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchResultsRetrievalRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchResultsRetrievalResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
        <xs:element name="ErrorCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ErrorMessage" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchResultsAckSubmission">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="COREEnvelopeBatchResultsAckSubmissionResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PayloadType" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ProcessingMode" type="BatchMode" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="PayloadLength" type="xs:int" minOccurs="0" maxOccurs="1"/>
        <xs:element name="TimeStamp" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="SenderID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ReceiverID" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CORERuleVersion" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="CheckSum" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Payload" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream" minOccurs="0" maxOccurs="1"/>
        <xs:element name="ErrorCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
        <xs:element name="ErrorMessage" type="xs:string" minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:simpleType name="RealTimeMode">
    <xs:restriction base="xs:string">
      <xs:pattern value="RealTime"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="BatchMode">
    <xs:restriction base="xs:string">
      <xs:pattern value="Batch"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints>
      <con:endpoint>${#TestSuite#Endpoint-EntityXDRRequest}</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/EntityService/EntityXDRAsyncRequest</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/EntityService/EntityXDRRequest</con:endpoint>
      <con:endpoint>http://localhost:8080/CONNECTAdapter/EntityProxyService/EntityXDRRequest</con:endpoint>
    </con:endpoints>
    <con:operation action="tns:ProvideAndRegisterDocumentSet-bAsyncRequest" anonymous="optional" bindingOperationName="ProvideAndRegisterDocumentSet-bAsyncRequest" inputName="" isOneWay="false" name="ProvideAndRegisterDocumentSet-bAsyncRequest" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="4c0c77a3-4bd5-44e1-b76b-a067bb729b80">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:entitypatientdiscovery}EntityPatientDiscoveryBindingSoap" definition="../../../target/wsdl/EntityPatientDiscovery.wsdl" name="EntityPatientDiscoveryBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="8c8a5dbe-9819-47db-ae01-9bacac0e2c31" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache/><con:endpoints>
      <con:endpoint>http://localhost:${HttpDefaultPort}/Gateway/PatientDiscovery/1_0/EntityPatientDiscovery</con:endpoint>
      <con:endpoint>http://localhost:8080/CONNECTGateway/EntityPatientDiscovery</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:gov:hhs:fha:nhinc:entitypatientdiscovery:RespondingGateway_PRPA_IN201305UV02RequestMessage" bindingOperationName="RespondingGateway_PRPA_IN201305UV02" inputName="RespondingGateway_PRPA_IN201305UV02Request" isOneWay="false" name="RespondingGateway_PRPA_IN201305UV02" outputName="RespondingGateway_PRPA_IN201306UV02Response" receivesAttachments="false" sendsAttachments="false" type="Request-Response" anonymous="optional" id="db6fd908-4d9f-43d8-b832-d04499d2795e">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:entitypatientdiscoveryasyncreq}EntityPatientDiscoveryAsyncReqBindingSoap" definition="../../../target/wsdl/EntityPatientDiscoveryAsyncReq.wsdl" name="EntityPatientDiscoveryAsyncReqBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="c2372cf7-477b-46e4-bd1d-e5e1695d36bc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache/><con:endpoints>
      <con:endpoint>${#TestSuite#Endpoint-PatientDiscoveryAsyncReq}</con:endpoint>
      <con:endpoint>http://localhost/NhinConnect/EntityPatientDiscoveryAsyncReq</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:ProcessPatientDiscoveryAsyncReq" anonymous="optional" bindingOperationName="ProcessPatientDiscoveryAsyncReq" inputName="ProcessPatientDiscoveryAsyncReqAsyncRequest" isOneWay="false" name="ProcessPatientDiscoveryAsyncReq" outputName="ProcessPatientDiscoveryAsyncReqAsyncResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="16a9a484-a1b8-42a0-b93f-9faa9209dac5">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:entitydocretrieve}EntityDocRetrieveBindingSoap" definition="../../../target/wsdl/EntityDocRetrieve.wsdl" name="EntityDocRetrieveBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="45ea3e5f-7537-4425-a33c-73709193c20c" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache/><con:endpoints>
      <con:endpoint>http://localhost:${HttpDefaultPort}/Gateway/DocumentRetrieve/2_0/EntityService/EntityDocRetrieve</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/EntityDocRetrieve</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:gov:hhs:fha:nhinc:entitydocretrieve:RespondingGateway_CrossGatewayRetrieveRequestMessage" anonymous="optional" bindingOperationName="RespondingGateway_CrossGatewayRetrieve" inputName="RespondingGateway_CrossGatewayRetrieveRequest" isOneWay="false" name="RespondingGateway_CrossGatewayRetrieve" outputName="RespondingGateway_CrossGatewayRetrieveResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="c8bb2134-2cf9-4dca-bf94-d3e7ebaf083b">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:entitypatientdiscoveryasyncresp}EntityPatientDiscoveryAsyncRespBindingSoap" definition="../../../target/wsdl/EntityPatientDiscoveryAsyncResp.wsdl" name="EntityPatientDiscoveryAsyncRespBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="97d981d5-6f8d-4fca-a059-ce607375e8d1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache/><con:endpoints>
      <con:endpoint>${#TestSuite#Endpoint-PatientDiscoveryAsyncResp}</con:endpoint>
      <con:endpoint>http://localhost/NhinConnect/EntityPatientDiscoveryAsyncResp</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/Gateway/PatientDiscovery/1_0/EntityService/EntityPatientDiscoveryDeferredResponseUnsecured</con:endpoint>
    </con:endpoints>
    <con:operation action="" bindingOperationName="ProcessPatientDiscoveryAsyncResp" inputName="ProcessPatientDiscoveryAsyncRespAsyncRequest" isOneWay="false" name="ProcessPatientDiscoveryAsyncResp" outputName="ProcessPatientDiscoveryAsyncRespAsyncResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response" anonymous="optional" id="70d70d58-af8a-42b7-add6-84dcec4d0665">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:entitydocquery}EntityDocQueryBindingSoap" definition="../../../target/wsdl/EntityDocQuery.wsdl" name="EntityDocQueryBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="0b000165-8ffb-436c-b5f6-59762d0305f6" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache/><con:endpoints>
      <con:endpoint>http://localhost:${HttpDefaultPort}/Gateway/DocumentQuery/2_0/EntityService/EntityDocQueryUnsecured</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/EntityDocQuery</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:gov:hhs:fha:nhinc:entitydocquery:RespondingGateway_CrossGatewayQueryRequest" anonymous="optional" bindingOperationName="RespondingGateway_CrossGatewayQuery" inputName="RespondingGateway_CrossGatewayQueryRequest" isOneWay="false" name="RespondingGateway_CrossGatewayQuery" outputName="RespondingGateway_CrossGatewayQueryResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="8a429e1d-44e7-409b-874a-b711fda21dca">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="AdministrativeDistribution_Binding_Soap12_g0" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:entityadmindistribution}AdministrativeDistribution_Binding_Soap12" soapVersion="1_2" anonymous="optional" definition="../../../target/wsdl/EntityAdminDist.wsdl" id="90e3783f-3190-4d2a-967e-936d7eb18a7e" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:definitionCache/><con:endpoints>
      <con:endpoint>http://localhost:${HttpDefaultPort}/Gateway/AdminDistribution/1_0/AdministrativeDistribution_Service</con:endpoint>
    </con:endpoints>
    <con:operation isOneWay="false" action="urn:oasis:names:tc:emergency:EDXL:DE:1.0:SendAlertMessage" name="SendAlertMessage" bindingOperationName="SendAlertMessage" type="One-Way" inputName="" sendsAttachments="false" anonymous="optional" id="4e1fefc3-eb03-4b53-8b7e-ca942994e7b1">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:testSuite name="g1" id="7613ded3-2501-40f5-98f6-6da03aac789f">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Submission Deferred Req" searchProperties="true" id="7e685188-254a-4e21-9f18-98674d0f4a82">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="4ef377b4-8c2b-4d15-8672-8a5371597627">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
			}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Doc Submission Deferred Req" type="request" id="5494696d-5ac3-4ba0-bac8-7a1fbae89475">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityXDRAsyncRequest_Binding</con:interface>
          <con:operation>ProvideAndRegisterDocumentSet-bAsyncRequest</con:operation>
          <con:request incomingWss="" name="Doc Submission Deferred Req" outgoingWss="" useWsAddressing="true" wssPasswordType="" id="c8f6631f-05f4-462a-9b12-eedfb1f271b5">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-EntityXDRRequest}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:urn3="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:urn4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn5="urn:ihe:iti:xds-b:2007">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Document Submission Deferred Req">
      <urn:RespondingGateway_ProvideAndRegisterDocumentSetRequest>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>253-98-7546</urn1:SSN>
            <urn1:uniquePatientId>500000000^^^&amp;1.1&amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTHKIERAN</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>

         <urn:nhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>

         <urn:ProvideAndRegisterDocumentSetRequest>
            <urn2:SubmitObjectsRequest id="123" comment="comme">
               <!--Optional:-->
  
               <urn4:RegistryObjectList>
                  <urn4:ExtrinsicObject id="Document01" mimeType="text/xml" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1">
                     <urn4:Slot name="creationTime">
                        <urn4:ValueList>
                           <urn4:Value>20051224</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="languageCode">
                        <urn4:ValueList>
                           <urn4:Value>en-us</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="serviceStartTime">
                        <urn4:ValueList>
                           <urn4:Value>200412230800</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="serviceStopTime">
                        <urn4:ValueList>
                           <urn4:Value>200412230801</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="sourcePatientId">
                        <urn4:ValueList>
                           <urn4:Value>ST-1000^^^&amp;1.3.6.1.4.1.21367.2003.3.9&amp;ISO</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="sourcePatientInfo">
                        <urn4:ValueList>
                           <urn4:Value>PID-3|ST-1000^^^&amp;1.3.6.1.4.1.21367.2003.3.9&amp;ISO</urn4:Value>
                           <urn4:Value>PID-5|Doe^John^^^</urn4:Value>
                           <urn4:Value>PID-7|19560527</urn4:Value>
                           <urn4:Value>PID-8|M</urn4:Value>
                           <urn4:Value>PID-11|100 Main St^^Metropolis^Il^44130^USA</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Name>
                        <urn4:LocalizedString value="Physical"/>
                     </urn4:Name>
                     <urn4:Description/>
                     <urn4:Classification id="cl01" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="Document01">
                        <urn4:Slot name="authorPerson">
                           <urn4:ValueList>
                              <urn4:Value>Gerald Smitty</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorInstitution">
                           <urn4:ValueList>
                              <urn4:Value>Cleveland Clinic</urn4:Value>
                              <urn4:Value>Parma Community</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorRole">
                           <urn4:ValueList>
                              <urn4:Value>Attending</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorSpecialty">
                           <urn4:ValueList>
                              <urn4:Value>Orthopedic</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                     </urn4:Classification>
                     <urn4:Classification id="cl02" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="Document01" nodeRepresentation="History and Physical">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon classCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="History and Physical"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl03" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="Document01" nodeRepresentation="1.3.6.1.4.1.21367.2006.7.101">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon confidentialityCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Clinical-Staff"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="Document01" nodeRepresentation="CDAR2/IHE 1.0">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon formatCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="CDAR2/IHE 1.0"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl05" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="Document01" nodeRepresentation="Outpatient">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon healthcareFacilityTypeCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Outpatient"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl06" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="Document01" nodeRepresentation="General Medicine">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon practiceSettingCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="General Medicine"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl07" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="Document01" nodeRepresentation="34108-1">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>LOINC</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Outpatient Evaluation And Management"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:ExternalIdentifier id="ei01" registryObject="Document01" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" value="SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSDocumentEntry.patientId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei02" registryObject="Document01" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" value="1.3.6.1.4.1.21367.2005.3.9999.32">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                  </urn4:ExtrinsicObject>
                  <urn4:RegistryPackage id="SubmissionSet01">
                     <urn4:Slot name="submissionTime">
                        <urn4:ValueList>
                           <urn4:Value>20041225235050</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Name>
                        <urn4:LocalizedString value="Physical"/>
                     </urn4:Name>
                     <urn4:Description>
                        <urn4:LocalizedString value="Annual physical"/>
                     </urn4:Description>
                     <urn4:Classification id="cl08" classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet01">
                        <urn4:Slot name="authorPerson">
                           <urn4:ValueList>
                              <urn4:Value>Sherry Dopplemeyer</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorInstitution">
                           <urn4:ValueList>
                              <urn4:Value>Cleveland Clinic</urn4:Value>
                              <urn4:Value>Berea Community</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorRole">
                           <urn4:ValueList>
                              <urn4:Value>Purn4ary Surgon</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorSpecialty">
                           <urn4:ValueList>
                              <urn4:Value>Orthopedic</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                     </urn4:Classification>
                     <urn4:Classification id="cl09" classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet01" nodeRepresentation="History and Physical">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon contentTypeCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="History and Physical"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:ExternalIdentifier id="ei03" registryObject="SubmissionSet01" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" value="1.3.6.1.4.1.21367.2005.3.9999.33">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.uniqueId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei04" registryObject="SubmissionSet01" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" value="3670984664">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.sourceId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei05" registryObject="SubmissionSet01" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" value="SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.patientId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                  </urn4:RegistryPackage>
                  <urn4:Classification id="cl10" classifiedObject="SubmissionSet01" classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd"/>
                  <urn4:Association id="as01" associationType="HasMember" sourceObject="SubmissionSet01" targetObject="Document01">
                     <urn4:Slot name="SubmissionSetStatus">
                        <urn4:ValueList>
                           <urn4:Value>Original</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                  </urn4:Association>
               </urn4:RegistryObjectList> 

            </urn2:SubmitObjectsRequest>
            <!--1 or more repetitions:-->
            <urn5:Document id="Document01">UjBsR09EbGhjZ0dTQUxNQUFBUUNBRU1tQ1p0dU1GUXhEUzhi</urn5:Document>
         </urn:ProvideAndRegisterDocumentSetRequest>
      </urn:RespondingGateway_ProvideAndRegisterDocumentSetRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="15ace7a5-5670-40d8-8510-d4538b8a7b65"/>
            <con:assertion type="SOAP Fault Assertion" id="1ef6d900-6497-458a-b0bc-8f0aa08b9b34"/>
            <con:assertion name="Match content of [@status]" type="XPath Match" id="71915c9a-f93f-4127-8c88-4cc545a26ba3">
              <con:configuration>
                <path>declare namespace ns10='http://www.hhs.gov/healthit/nhin';
							//ns10:XDRAcknowledgement[1]/ns10:message[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:RequestAccepted</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Schema Compliance" type="Schema Compliance" id="8d0c9f7f-1f9e-48af-b8a9-e27dd92fe5e7">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig action="urn:gov:hhs:fha:nhinc:nhincentityxdr:async:request:ProvideAndRegisterDocumentSet-bAsyncRequest_RequestMessage" generateMessageId="true" mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="9af1f656-9833-42d1-8b82-b79f779c22ae" disabled="true">
        <con:settings/>
        <con:config><script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
	
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)" disabled="true">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

//check for Human Requestor details
if (!parsedXmlMessage.ActiveParticipant[0].UserID.isEmpty()){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
	    	assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	     if(!node.@UserName.isEmpty()){
        		assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
	
	}
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID_g1" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
   	     if(!node.@AlternativeUserID.isEmpty()){
	     	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

//Audit Source details
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}


// ParticipantObjectIdentification Patient details
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
 }
 
 
// check for  ParticipantObjectIdentification Submission Set details
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	assert(!node.@ParticipantObjectID.isEmpty())
		if (!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )     
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )	
		assert(!node.@ParticipantObjectIDTypeCode.isEmpty())		 
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given.text() == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script></con:config>
      </con:testStep><con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2) - ACK" disabled="true">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
assert it.@EventActionCode == context.findProperty( "EventIdentification_Responder.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification_Responder.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification_Responder.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	     
	     if (!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }

     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	    	assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID_g1" )	    
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
	    assert(!node.@AlternativeUserID.isEmpty())
	    // assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID") 
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){		
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
 }
 
 if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->	     
	    		 
		 if(!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
		 
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )	     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script></con:config>
      </con:testStep><con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/DocumentSubmissionDeferredRequestAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-28T18:07:57Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-28T18:17:57Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/28/2015 18:07:57</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-27T00:00:00Z</con:value>
        </con:property>
      <con:property><con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name><con:value>110153</con:value></con:property><con:property><con:name>ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode</con:name><con:value>2</con:value></con:property><con:property><con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name><con:value>1</con:value></con:property><con:property><con:name>&lt;!--Destination--></con:name><con:value/></con:property><con:property><con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@displayName</con:name><con:value>submission set classificationNode</con:value></con:property><con:property><con:name>EventIdentification_Responder.@EventActionCode</con:name><con:value>C</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/2_0/DocumentRepositoryXDR_Service</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name><con:value>false</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name><con:value>1</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@AlternativeUserID</con:name><con:value>19233@192.168.1.2</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@code</con:name><con:value>ITI-41</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name><con:value>1010</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name><con:value>IHE Transactions</con:value></con:property><con:property><con:name>EventIdentification_Responder.EventID.@code</con:name><con:value>110107</con:value></con:property><con:property><con:name>ActiveParticipant.@UserIsRequestor</con:name><con:value>true</con:value></con:property><con:property><con:name>&lt;--Patient--></con:name><con:value/></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name><con:value>Destination</con:value></con:property><con:property><con:name>&lt;--Submission</con:name><con:value>Set --></con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name><con:value>localhost</con:value></con:property><con:property><con:name>&lt;!--Human</con:name><con:value>Requestor--></con:value></con:property><con:property><con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name><con:value>2</con:value></con:property><con:property><con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name><con:value>Patient Number</con:value></con:property><con:property><con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name><con:value>Source</con:value></con:property><con:property><con:name>ActiveParticipant.@UserName</con:name><con:value>Karl Skagerberg</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name><con:value>192.168.1.2</con:value></con:property><con:property><con:name>EventIdentification.@EventActionCode</con:name><con:value>R</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name><con:value>110152</con:value></con:property><con:property><con:name>EventIdentification.EventID.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name><con:value>Gateway 1</con:value></con:property><con:property><con:name>EventIdentification.EventID.@displayName</con:name><con:value>Export</con:value></con:property><con:property><con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name><con:value>1</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserName</con:name><con:value>Karl Skagerberg</con:value></con:property><con:property><con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name><con:value>SNOMED_CT</con:value></con:property><con:property><con:name>ActiveParticipant.@AlternativeUserID</con:name><con:value>19233@192.168.1.1</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@displayName</con:name><con:value>Provide and Register Document Set-b</con:value></con:property><con:property><con:name>EventIdentification.EventID.@code</con:name><con:value>110106</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name><con:value>19233@192.168.1.2</con:value></con:property><con:property><con:name>ActiveParticipant.RoleIDCode.@code</con:name><con:value>307969004</con:value></con:property><con:property><con:name>EventIdentification.@EventDateTime</con:name><con:value>2015-04-02T13:47:30.199Z</con:value></con:property><con:property><con:name>ParticipantObjectIdentification_Set.@ParticipantObjectTypeCodeRole</con:name><con:value>20</con:value></con:property><con:property><con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@code</con:name><con:value>urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd</con:value></con:property><con:property><con:name>EventIdentification.@EventOutcomeIndicator</con:name><con:value>0</con:value></con:property><con:property><con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name><con:value>RFC-3881</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserIsRequestor</con:name><con:value>true</con:value></con:property><con:property><con:name>ActiveParticipant.RoleIDCode.@displayName</con:name><con:value>Human Requestor</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserID</con:name><con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value></con:property><con:property><con:name>AuditMessage.xmlns</con:name><con:value>http://nhinc.services.com/schema/auditmessage</con:value></con:property><con:property><con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@codeSystemName</con:name><con:value>IHE XDS Metadata</con:value></con:property><con:property><con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name><con:value>2</con:value></con:property><con:property><con:name>&lt;!--Source--></con:name><con:value/></con:property><con:property><con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name><con:value>SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</con:value></con:property><con:property><con:name>EventIdentification_Responder.EventID.@displayName</con:name><con:value>Import</con:value></con:property><con:property><con:name>ParticipantObjectIdentification_Set.@ParticipantObjectID</con:name><con:value>1.3.6.1.4.1.21367.2005.3.9999.33</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditSourceID</con:name><con:value>urn:oid:1.1</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserName</con:name><con:value>Karl Skagerberg</con:value></con:property><con:property><con:name>ActiveParticipant.@UserID</con:name><con:value>kskagerb</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID_g1</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/2_0/NhinService/XDRRequest_Service</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID_g0</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/1_1/NhinService/XDRRequest_Service</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Submission Deferred Resp" searchProperties="true" id="28f122a1-cdca-487c-ba68-f9d985f97826">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="c5213d53-567c-48eb-b261-10b3d7672af2">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
			}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Doc Submission Deferred Resp" type="request" id="19f9d64a-97d6-46c8-b150-4bd18f70679a">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityXDRAsyncResponse_Binding</con:interface>
          <con:operation>ProvideAndRegisterDocumentSet-bAsyncResponse</con:operation>
          <con:request name="Doc Submission Deferred Resp" id="cb0d60b2-8881-4b4d-a1a4-d985c5529752">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-DSDeferredResp}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:urn3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
   <soap:Header/>
   <soap:Body>
      <urn:RespondingGateway_ProvideAndRegisterDocumentSetResponseRequest>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
               <urn1:prefix>Ms.</urn1:prefix>
               <urn1:suffix>?</urn1:suffix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
               <urn1:prefix>Mr.</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>253-98-7546</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>500000000^^^&amp;1.1&amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>?addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
               <urn1:prefix>Mr.</urn1:prefix>
               <urn1:suffix>?</urn1:suffix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>SkagerBerg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                     <!--Zero or more repetitions:-->
                     <urn1:translation/>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Karl S. Skagerberg</urn1:fullName>
                  <urn1:prefix>?</urn1:prefix>
                  <urn1:suffix>?</urn1:suffix>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:org>
               <!--Optional:-->
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <!--Optional:-->
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTHKIERAN</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy notes</urn1:originalText>
               <!--Zero or more repetitions:-->
               <urn1:translation/>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <!--Optional:-->
                     <urn1:version>2.0</urn1:version>
                     <!--Optional:-->
                     <urn1:issuer>CN=SAML User,OU=Harris,0=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <!--Optional:-->
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <!--Optional:-->
                     <urn1:conditions>
                        <!--Optional:-->
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <!--Optional:-->
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <!--Zero or more repetitions:-->
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <!--Zero or more repetitions:-->
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
            <!--Optional:-->
            <urn1:samlSignature>
               <!--Optional:-->
               <urn1:keyInfo>
                  <!--Optional:-->
                  <urn1:rsaKeyValueModulus>cid:721645965035</urn1:rsaKeyValueModulus>
                  <!--Optional:-->
                  <urn1:rsaKeyValueExponent>cid:146207300753</urn1:rsaKeyValueExponent>
               </urn1:keyInfo>
               <!--Optional:-->
               <urn1:signatureValue>cid:783710993742</urn1:signatureValue>
            </urn1:samlSignature>
            <!--Optional:-->
            <urn1:samlIssuer>
               <!--Optional:-->
               <urn1:issuer>?</urn1:issuer>
               <!--Optional:-->
               <urn1:issuerFormat>?</urn1:issuerFormat>
            </urn1:samlIssuer>
            <!--Optional:-->
            <urn1:messageId>?</urn1:messageId>
            <!--1 or more repetitions:-->
            <urn1:relatesToList>uuid:088a26e8-6b03-4bf8-84f1-737dc94be2e0</urn1:relatesToList>
         </urn:assertion>
         <!--Optional:-->
         <urn:nhinTargetCommunities>
            <!--1 or more repetitions:-->
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>
         <urn:RegistryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" requestId="?"><!--Optional:-->
            <urn2:ResponseSlotList>
               <!--Zero or more repetitions:-->
               <urn3:Slot name="?" slotType="?">
                  <urn3:ValueList>
                     <urn3:Value>?</urn3:Value>
                  </urn3:ValueList>
               </urn3:Slot>
            </urn2:ResponseSlotList>
            <!--Optional:-->
            <urn2:RegistryErrorList highestSeverity="?">
               <!--1 or more repetitions:-->
               <urn2:RegistryError codeContext="?" errorCode="?" severity="urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error" location="?">?</urn2:RegistryError>
            </urn2:RegistryErrorList>
         </urn:RegistryResponse>
      </urn:RespondingGateway_ProvideAndRegisterDocumentSetResponseRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="733c67ce-afa1-465b-bc76-2d65a40871f0"/>
            <con:assertion type="Schema Compliance" id="7a96247b-75a0-47c7-9532-f1ffb1fb480f">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="3d90a100-eb37-4727-8c4d-8d833bbcd9bb"/>
            <con:assertion type="XPath Match" id="ecb84da2-8eec-4747-b187-c8ea5aed733f">
              <con:configuration>
                <path>declare namespace ns10='http://www.hhs.gov/healthit/nhin';
					//ns10:XDRAcknowledgement[1]/ns10:message[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:ResponseAccepted</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="2518c97d-6055-4a7a-a2bf-4e7af8674da0" disabled="true">
        <con:settings/>
        <con:config><script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
	
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)" disabled="true">
        <con:settings/>
        <con:config><script>context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}



//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() &amp;&amp; parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
		//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() &amp;&amp; parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID_g1" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
   	    assert(!node.@AlternativeUserID.isEmpty())
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

//Audit Source details
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2) - ACK" disabled="true">
        <con:settings/>
        <con:config><script>context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification_Responder.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification_Responder.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification_Responder.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() &amp;&amp; parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	     
	     if (!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }

     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() &amp;&amp; parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	    	assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID_g1" )	    
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }

     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){		
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}


}</script></con:config>
      </con:testStep><con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/DocumentSubmissionDeferredResponseAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-28T18:08:35Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-28T18:18:35Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/28/2015 18:08:35</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-27T00:00:00Z</con:value>
        </con:property>
      <con:property><con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name><con:value>110153</con:value></con:property><con:property><con:name>&lt;!--Destination--></con:name><con:value/></con:property><con:property><con:name>EventIdentification_Responder.@EventActionCode</con:name><con:value>R</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/2_0/DocumentRepositoryXDR_Service</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name><con:value>false</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name><con:value>1</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@AlternativeUserID</con:name><con:value>19233@192.168.1.2</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@code</con:name><con:value>ITI-41</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name><con:value>1010</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name><con:value>IHE Transactions</con:value></con:property><con:property><con:name>EventIdentification_Responder.EventID.@code</con:name><con:value>110106</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name><con:value>Destination</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name><con:value>2</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name><con:value>localhost</con:value></con:property><con:property><con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name><con:value>Source</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name><con:value>192.168.1.2</con:value></con:property><con:property><con:name>EventIdentification.@EventActionCode</con:name><con:value>C</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name><con:value>110152</con:value></con:property><con:property><con:name>EventIdentification.EventID.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name><con:value>Gateway 1</con:value></con:property><con:property><con:name>EventIdentification.EventID.@displayName</con:name><con:value>Import</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserName</con:name><con:value>Karl Skagerberg</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@displayName</con:name><con:value>Provide and Register Document Set-b</con:value></con:property><con:property><con:name>EventIdentification.EventID.@code</con:name><con:value>110107</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name><con:value>19233@192.168.1.2</con:value></con:property><con:property><con:name>EventIdentification.@EventDateTime</con:name><con:value>2015-04-02T13:47:30.199Z</con:value></con:property><con:property><con:name>EventIdentification.@EventOutcomeIndicator</con:name><con:value>0</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserIsRequestor</con:name><con:value>true</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserID</con:name><con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value></con:property><con:property><con:name>AuditMessage.xmlns</con:name><con:value>http://nhinc.services.com/schema/auditmessage</con:value></con:property><con:property><con:name>&lt;!--Source--></con:name><con:value/></con:property><con:property><con:name>EventIdentification_Responder.EventID.@displayName</con:name><con:value>Export</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserName</con:name><con:value>Karl Skagerberg</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditSourceID</con:name><con:value>urn:oid:1.1</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID_g1</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/2_0/NhinService/XDRResponse_Service</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID_g0</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/1_1/NhinService/XDRResponse_Service</con:value></con:property></con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Submission" searchProperties="true" id="bfb21e63-366d-4679-9fe6-33293702838f">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="cd5e587a-19fa-4a60-9020-521134fd99cd">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Doc Submission" type="request" id="374acf1c-f106-46a8-81f6-0f256a4fafaa">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityXDR_Binding</con:interface>
          <con:operation>ProvideAndRegisterDocumentSet-b</con:operation>
          <con:request incomingWss="" name="Doc Submission" outgoingWss="" wssPasswordType="" id="0c9d535e-35d6-4925-803b-284f87545674">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-XDREntity}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:urn3="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:urn4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn5="urn:ihe:iti:xds-b:2007">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Document Submission">
      <urn:RespondingGateway_ProvideAndRegisterDocumentSetRequest>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>253-98-7546</urn1:SSN>
            <urn1:uniquePatientId>500000000^^^&amp;1.1&amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTHKIERAN</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>

         <urn:nhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>

         <urn:ProvideAndRegisterDocumentSetRequest>
            <urn2:SubmitObjectsRequest id="123" comment="comme">
               <!--Optional:-->
  
               <urn4:RegistryObjectList>
                  <urn4:ExtrinsicObject id="Document01" mimeType="text/xml" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1">
                     <urn4:Slot name="creationTime">
                        <urn4:ValueList>
                           <urn4:Value>20051224</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="languageCode">
                        <urn4:ValueList>
                           <urn4:Value>en-us</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="serviceStartTime">
                        <urn4:ValueList>
                           <urn4:Value>200412230800</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="serviceStopTime">
                        <urn4:ValueList>
                           <urn4:Value>200412230801</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="sourcePatientId">
                        <urn4:ValueList>
                           <urn4:Value>ST-1000^^^&amp;1.3.6.1.4.1.21367.2003.3.9&amp;ISO</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="sourcePatientInfo">
                        <urn4:ValueList>
                           <urn4:Value>PID-3|ST-1000^^^&amp;1.3.6.1.4.1.21367.2003.3.9&amp;ISO</urn4:Value>
                           <urn4:Value>PID-5|Doe^John^^^</urn4:Value>
                           <urn4:Value>PID-7|19560527</urn4:Value>
                           <urn4:Value>PID-8|M</urn4:Value>
                           <urn4:Value>PID-11|100 Main St^^Metropolis^Il^44130^USA</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Name>
                        <urn4:LocalizedString value="Physical"/>
                     </urn4:Name>
                     <urn4:Description/>
                     <urn4:Classification id="cl01" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="Document01">
                        <urn4:Slot name="authorPerson">
                           <urn4:ValueList>
                              <urn4:Value>Gerald Smitty</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorInstitution">
                           <urn4:ValueList>
                              <urn4:Value>Cleveland Clinic</urn4:Value>
                              <urn4:Value>Parma Community</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorRole">
                           <urn4:ValueList>
                              <urn4:Value>Attending</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorSpecialty">
                           <urn4:ValueList>
                              <urn4:Value>Orthopedic</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                     </urn4:Classification>
                     <urn4:Classification id="cl02" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="Document01" nodeRepresentation="History and Physical">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon classCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="History and Physical"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl03" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="Document01" nodeRepresentation="1.3.6.1.4.1.21367.2006.7.101">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon confidentialityCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Clinical-Staff"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="Document01" nodeRepresentation="CDAR2/IHE 1.0">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon formatCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="CDAR2/IHE 1.0"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl05" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="Document01" nodeRepresentation="Outpatient">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon healthcareFacilityTypeCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Outpatient"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl06" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="Document01" nodeRepresentation="General Medicine">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon practiceSettingCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="General Medicine"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl07" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="Document01" nodeRepresentation="34108-1">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>LOINC</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Outpatient Evaluation And Management"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:ExternalIdentifier id="ei01" registryObject="Document01" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" value="SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSDocumentEntry.patientId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei02" registryObject="Document01" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" value="1.3.6.1.4.1.21367.2005.3.9999.32">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                  </urn4:ExtrinsicObject>
                  <urn4:RegistryPackage id="SubmissionSet01">
                     <urn4:Slot name="submissionTime">
                        <urn4:ValueList>
                           <urn4:Value>20041225235050</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Name>
                        <urn4:LocalizedString value="Physical"/>
                     </urn4:Name>
                     <urn4:Description>
                        <urn4:LocalizedString value="Annual physical"/>
                     </urn4:Description>
                     <urn4:Classification id="cl08" classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet01">
                        <urn4:Slot name="authorPerson">
                           <urn4:ValueList>
                              <urn4:Value>Sherry Dopplemeyer</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorInstitution">
                           <urn4:ValueList>
                              <urn4:Value>Cleveland Clinic</urn4:Value>
                              <urn4:Value>Berea Community</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorRole">
                           <urn4:ValueList>
                              <urn4:Value>Purn4ary Surgon</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorSpecialty">
                           <urn4:ValueList>
                              <urn4:Value>Orthopedic</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                     </urn4:Classification>
                     <urn4:Classification id="cl09" classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet01" nodeRepresentation="History and Physical">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon contentTypeCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="History and Physical"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:ExternalIdentifier id="ei03" registryObject="SubmissionSet01" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" value="1.3.6.1.4.1.21367.2005.3.9999.33">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.uniqueId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei04" registryObject="SubmissionSet01" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" value="3670984664">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.sourceId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei05" registryObject="SubmissionSet01" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" value="SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.patientId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                  </urn4:RegistryPackage>
                  <urn4:Classification id="cl10" classifiedObject="SubmissionSet01" classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd"/>
                  <urn4:Association id="as01" associationType="HasMember" sourceObject="SubmissionSet01" targetObject="Document01">
                     <urn4:Slot name="SubmissionSetStatus">
                        <urn4:ValueList>
                           <urn4:Value>Original</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                  </urn4:Association>
               </urn4:RegistryObjectList> 

            </urn2:SubmitObjectsRequest>
            <!--1 or more repetitions:-->
            <urn5:Document id="Document01">UjBsR09EbGhjZ0dTQUxNQUFBUUNBRU1tQ1p0dU1GUXhEUzhi</urn5:Document>
         </urn:ProvideAndRegisterDocumentSetRequest>
      </urn:RespondingGateway_ProvideAndRegisterDocumentSetRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="f5428481-8cd4-4efa-b4f8-c71b4e345d5d"/>
            <con:assertion type="SOAP Fault Assertion" id="d868be22-a3ce-44ed-ac26-ed680056a484"/>
            <con:assertion type="XPath Match" id="2756a1d2-f350-4a46-a913-69584ea391fa">
              <con:configuration>
                <path>declare namespace ns11='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
							//ns11:RegistryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Schema Compliance" type="Schema Compliance" id="94d66bf1-af2c-41fe-9078-fd785cada557">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig action="{urn:gov:hhs:fha:nhinc:nhincentityxdr}ProvideAndRegisterDocumentSet-b" mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay">
        <con:settings/>
        <con:config>
          <delay>2000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="49fc03f8-cb24-4bd5-bb32-195ac38c4c29">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
		assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	     }     	
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
     	if(!node.RoleIDCode.isEmpty()){
   	     	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant.RoleIDCode.@code" )
	     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant.RoleIDCode.@codeSystemName" )
	   		assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )
	     }
	}
  }
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     //assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
          assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserName" )
	     }
   	     if(!node.@AlternativeUserID.isEmpty()){
	     	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->	    
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )
     	assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}	
}
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     //assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCodeRole" )
	     assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@displayName" )
  	}
 }
}]]></script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification_Responder.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification_Responder.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification_Responder.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->
	     
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     //assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
          assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserName" )
	     }
   	     //assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )	     
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
     	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){
			log.info "inside auditsourcetype code" + it.@AuditSourceTypeCode
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )
     	assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}	
}
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     //assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCodeRole" )
	     assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@displayName" )
  	}
 }
}]]></script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG1ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/DocumentSubmissionAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-14T23:02:30Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-14T23:12:30Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/14/2015 23:02:30</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-13T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>submission set classificationNode</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.@EventActionCode</con:name>
          <con:value>C</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/DocumentSubmission/2_0/DocumentRepositoryXDR_Service</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-41</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.EventID.@code</con:name>
          <con:value>110107</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--Patient--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--Submission</con:name>
          <con:value>Set --></con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>R</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Export</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Provide and Register Document Set-b</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110106</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>20</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>IHE XDS Metadata</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.EventID.@displayName</con:name>
          <con:value>Import</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.@ParticipantObjectID</con:name>
          <con:value>1.3.6.1.4.1.21367.2005.3.9999.33</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Patient Discovery Deferred Req" searchProperties="true" id="722d7a11-28b2-47ff-93a2-1393fc42abb3">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="9c898c67-4fd9-410c-a77d-103a33311ee2">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery Deferred Req" type="request" id="27035536-f9f9-4c4f-8a1a-f709e11aed17">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryAsyncReqBindingSoap</con:interface>
          <con:operation>ProcessPatientDiscoveryAsyncReq</con:operation>
          <con:request name="Patient Discovery Deferred Req" useWsAddressing="true" id="97fe96a6-8f49-400b-81c4-78449e2f9097">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-PatientDiscoveryAsyncReq}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Patient Discovery Deferred Req">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#RemoteHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#LocalAA}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="${#Project#RemoteHCID}" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#Gender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#BirthTime}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#FamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#GivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#LocalAA}" extension="${#Project#LocalPatientID}"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:assertion>
            <urn1:nationalProviderId>1234567890</urn1:nationalProviderId>         
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>LEESBURG</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>20176</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>19990627</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>YOUNGER</urn1:familyName>
               <urn1:givenName>GALLOW</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>123456789</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>D123401^^^&amp;amp;2.16.840.1.113883.3.337&amp;amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>Test HCID1</urn1:description>
                  <urn1:homeCommunityId>2.16.840.1.113883.3.337</urn1:homeCommunityId>
                  <urn1:name>HCID1</urn1:name>
               </urn1:org>
               <!--Optional:-->
               <urn1:roleCoded>
                  <urn1:code>Code</urn1:code>
                  <urn1:codeSystem>CodeSystem</urn1:codeSystem>
                  <urn1:codeSystemName>CodeSystemName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>codeSystemVersion</urn1:codeSystemVersion>
                  <urn1:displayName>displayName</urn1:displayName>
                  <urn1:originalText>originalText</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>authorized</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTHKIERAN</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <!--Optional:-->
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
            <!--Optional:-->
            <urn1:samlSignature>
               <!--Optional:-->
               <urn1:keyInfo>
                  <!--Optional:-->
                  <urn1:rsaKeyValueModulus>cid:1157111506023</urn1:rsaKeyValueModulus>
                  <!--Optional:-->
                  <urn1:rsaKeyValueExponent>cid:136268302631</urn1:rsaKeyValueExponent>
               </urn1:keyInfo>
               <!--Optional:-->
               <urn1:signatureValue>cid:880867232879</urn1:signatureValue>
            </urn1:samlSignature>
         </urn:assertion>
         <!--Optional:-->
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="fa09bb13-8277-4b90-8a04-ff52b0b80d85"/>
            <con:assertion type="SOAP Fault Assertion" id="6499cee3-d282-47ca-ae32-553141e35764"/>
            <con:assertion name="Verify Receiver" type="XPath Match" id="0d5e83ec-7196-4c5d-ae33-75d88fd8de05">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
							//ns3:MCCI_IN000002UV01[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
                <content>1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Verify Sender" type="XPath Match" id="d36ceada-34cf-49f6-a800-35ac35acfbb0">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
							//ns3:MCCI_IN000002UV01[1]/ns3:sender[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
                <content>2.2</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Verify Message" type="XPath Match" id="b5440bc2-dab2-4b4b-803d-c23d4cf8bc4f">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
							//ns3:MCCI_IN000002UV01[1]/ns3:acknowledgement[1]/ns3:acknowledgementDetail[1]/ns3:text[1]/text()</path>
                <content>Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Verify RelatesTo" type="XPath Match" id="6ca9ca8b-cc67-402a-b31d-0b1d62eb1a90">
              <con:configuration>
                <path>declare namespace ns1='http://www.w3.org/2005/08/addressing';
							//ns1:RelatesTo[1]/text()</path>
                <content>uuid:6666666666.66666.666.66</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Schema Compliance" type="Schema Compliance" id="e37e7c1b-bb35-4110-ac43-09d2a0611fac">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig action="urn:gov:hhs:fha:nhinc:entitypatientdiscoveryasyncreq:ProcessPatientDiscoveryAsyncReqAsyncRequest" addDefaultTo="true" messageID="uuid:6666666666.66666.666.66" mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="db7e5156-753b-49f0-97ed-ab389757b9d5">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
	
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty()){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
	    	assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	     if(!node.@UserName.isEmpty()){
        		assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
	
	}
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
   	     if(!node.@AlternativeUserID.isEmpty()){
	     	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
 }
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
		if (!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )     
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given.text() == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2) - ACK">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	     
	     if (!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }

     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	    	assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	    
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
	    assert(!node.@AlternativeUserID.isEmpty())
	    // assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID") 
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){		
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

if (parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty()){
	// Patient details will not be populated for PD Deferred 
 }
 
 
 if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->	     
	    		 
		 if(!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
		 
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )	     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/PatientDiscoveryDeferredAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>LocalHCID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAA</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalHCDescription</con:name>
          <con:value>InternalTest1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteHCID</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAA</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteHCDescription</con:name>
          <con:value>InternalTest2</con:value>
        </con:property>
        <con:property>
          <con:name>RemotePatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>NHINGatewayConfigDir</con:name>
          <con:value>C:/Sun/AppServer/domains/domain1/config/nhin</con:value>
        </con:property>
        <con:property>
          <con:name>MPIDir</con:name>
          <con:value>C:/Sun/AppServer/domains/domain1/config</con:value>
        </con:property>
        <con:property>
          <con:name>LocalConfigDir</con:name>
          <con:value>C:/SelfTest/EndToEndSelfTest</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-DocQuery</con:name>
          <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocQueryUnsecured</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-DocRetrieve</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityDocRetrieve</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Reidentification</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntitySubjectDiscovery</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Subscribe</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityNotificationProducer</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Notify</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityNotificationConsumer</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Unsubscribe</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntitySubscriptionManager</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-AuditLogQuery</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityAuditQuery</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-PatientDiscoveryAsyncReq</con:name>
          <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityPatientDiscoveryDeferredRequestUnsecured</con:value>
        </con:property>
        <con:property>
          <con:name>DBHost</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>DBPort</con:name>
          <con:value>3306</con:value>
        </con:property>
        <con:property>
          <con:name>DBUser</con:name>
          <con:value>nhincuser</con:value>
        </con:property>
        <con:property>
          <con:name>DBPass</con:name>
          <con:value>nhincpass</con:value>
        </con:property>
        <con:property>
          <con:name>PatientCorrelationDB</con:name>
          <con:value>patientcorrelationdb</con:value>
        </con:property>
        <con:property>
          <con:name>PatientCorrelationTable</con:name>
          <con:value>correlatedidentifiers</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionDB</con:name>
          <con:value>subscriptionrepository</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionTable</con:name>
          <con:value>subscription</con:value>
        </con:property>
        <con:property>
          <con:name>AAMappingDB</con:name>
          <con:value>assigningauthoritydb</con:value>
        </con:property>
        <con:property>
          <con:name>AAMappingTable</con:name>
          <con:value>aa_to_home_community_mapping</con:value>
        </con:property>
        <con:property>
          <con:name>PseudonymAA</con:name>
          <con:value>ABC</con:value>
        </con:property>
        <con:property>
          <con:name>PseudonymPatientID</con:name>
          <con:value>PSEUDO001</con:value>
        </con:property>
        <con:property>
          <con:name>RealAA</con:name>
          <con:value>1.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>RealPatientID</con:name>
          <con:value>D1234010050</con:value>
        </con:property>
        <con:property>
          <con:name>DQDocID</con:name>
          <con:value>1.123401.11111</con:value>
        </con:property>
        <con:property>
          <con:name>DQPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>DynamicDQDocID</con:name>
          <con:value>103.8.9284320.020.3590.75^1266324032288</con:value>
        </con:property>
        <con:property>
          <con:name>DRDocID</con:name>
          <con:value>1.123407.777777</con:value>
        </con:property>
        <con:property>
          <con:name>DRRepoID</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>NotificationEndpoint</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationConsumerService/HiemNotify</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionEndpoint</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationProducerService/HiemSubscription</con:value>
        </con:property>
        <con:property>
          <con:name>SubscribePatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>NotifySubscriptionID</con:name>
          <con:value>-f7c1a5d:1204e50e42e:-79eb</con:value>
        </con:property>
        <con:property>
          <con:name>NotifySubscriptionManagerEndpointAddress</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
        </con:property>
        <con:property>
          <con:name>UnSubscriptionID</con:name>
          <con:value>3e74139f-5271-4db1-98c0-88748fa3e4e3</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionManagerEndpointAddress</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
        </con:property>
        <con:property>
          <con:name>AQUserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>AQPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-EntityXDRRequest</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityProxyService/EntityXDRRequest</con:value>
        </con:property>
        <con:property>
          <con:name>AsyncMsgDB</con:name>
          <con:value>asyncmsgs</con:value>
        </con:property>
        <con:property>
          <con:name>AsyncMsgTable</con:name>
          <con:value>asyncmsgrepo</con:value>
        </con:property>
        <con:property>
          <con:name>Gender</con:name>
          <con:value>M</con:value>
        </con:property>
        <con:property>
          <con:name>BirthTime</con:name>
          <con:value>19630804</con:value>
        </con:property>
        <con:property>
          <con:name>FamilyName</con:name>
          <con:value>Younger</con:value>
        </con:property>
        <con:property>
          <con:name>GivenName</con:name>
          <con:value>Gallow</con:value>
        </con:property>
        <con:property>
          <con:name>SubjectID</con:name>
          <con:value>1111</con:value>
        </con:property>
        <con:property>
          <con:name>UniquePatientId</con:name>
          <con:value>1111^^^&amp;amp;1.1&amp;amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>StreetAddress</con:name>
          <con:value>123 Johnson Rd</con:value>
        </con:property>
        <con:property>
          <con:name>City</con:name>
          <con:value>Melbourne</con:value>
        </con:property>
        <con:property>
          <con:name>State</con:name>
          <con:value>FL</con:value>
        </con:property>
        <con:property>
          <con:name>ZipCode</con:name>
          <con:value>12345</con:value>
        </con:property>
        <con:property>
          <con:name>Country</con:name>
          <con:value>US</con:value>
        </con:property>
        <con:property>
          <con:name>SSN</con:name>
          <con:value>123456789</con:value>
        </con:property>
        <con:property>
          <con:name>PurposeOfDisclosure</con:name>
          <con:value>Mental</con:value>
        </con:property>
        <con:property>
          <con:name>ExpirationDate</con:name>
          <con:value>20100520</con:value>
        </con:property>
        <con:property>
          <con:name>DOB</con:name>
          <con:value>19800516</con:value>
        </con:property>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-21T00:35:32Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-21T00:45:32Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/21/2015 00:35:32</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-20T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110112</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>24</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText</con:name>
          <con:value>LivingSubject.birthTime</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given.@partType</con:name>
          <con:value>GIV</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>D123401^^^&amp;1.1&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family.@partType</con:name>
          <con:value>FAM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>responseModalityCode.@code</con:name>
          <con:value>R</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.value.@value</con:name>
          <con:value>19630804</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectID</con:name>
          <con:value>a797fa28-45fd-4a29-867d-32f3301e73fe</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor.inbound</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--ParticipantObjectIdentification_Query.ParticipantObjectQuery</con:name>
          <con:value>checks --></con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@root</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText</con:name>
          <con:value>LivingSubject.name</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@extension</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>responsePriorityCode.@code</con:name>
          <con:value>I</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/PatientDiscovery/1_0/NhinService/NhinPatientDiscoveryAsyncReq</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family</con:name>
          <con:value>Younger</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given</con:name>
          <con:value>Gallow</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Query</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText</con:name>
          <con:value>LivingSubject.administrativeGender</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>E</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>queryId.@root</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.value.@code</con:name>
          <con:value>M</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_Initiator.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>queryId.@extension</con:name>
          <con:value>-abd3453dcd24wkkks545</con:value>
        </con:property>
        <con:property>
          <con:name>statusCode.@code</con:name>
          <con:value>new</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Responder.@ParticipantObjectID</con:name>
          <con:value>D123401^^^&amp;1.1&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Patient Discovery Deferred Resp" searchProperties="true" id="1bb2218d-381d-4724-8ba6-a019f2532778">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="19ec0cae-8bd8-4f38-94da-647b6036fb4b">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery Deferred Resp" type="request" id="8f330759-6996-44bf-9d4c-da74d3459571">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryAsyncRespBindingSoap</con:interface>
          <con:operation>ProcessPatientDiscoveryAsyncResp</con:operation>
          <con:request name="Patient Discovery Deferred Resp" id="a44ad968-d79b-452f-8c86-962270805bd1">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-PatientDiscoveryAsyncResp}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header xmlns:add="SoapUI_Test/ValidationSuite/2-EndToEndSelfTest-soapui-project.xml">
      <add:Action>urn:gov:hhs:fha:nhinc:entitypatientdiscoveryasyncresp:ProcessPatientDiscoveryAsyncRespAsyncRequest</add:Action>
      <add:MessageID>uuid:12bcfc1e-f422-4d1d-af99-ff83d050313e</add:MessageID>
      <add:RelatesTo>uuid:6666666666.66666.666.66</add:RelatesTo>
      <add:To>${#TestSuite#Endpoint-PatientDiscoveryAsyncResp}</add:To>
   </soap:Header>
   <soap:Body testSuite="Entity_g1" testCase="Patient Discovery Deferred Resp">
      <urn:RespondingGateway_PRPA_IN201306UV02Request>
         <urn:PRPA_IN201306UV02 ITSVersion="XML_1.0">
            <urn:id root="2.2" extension="-5a3e95b1:11d1fa33d45:-8e45"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201306UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <!--1 or more repetitions:-->
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="1.1"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="1.1"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="2.2"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id extension="D123402" root="2.2"/>
                           <urn:statusCode code="SD"/>
                           <urn:patientPerson>
                              <urn:name>
                                 <urn:family partType="FAM">Younger</urn:family>
                                 <urn:given partType="GIV">Gallow</urn:given>
                              </urn:name>
                              <urn:administrativeGenderCode code="M"/>
                              <urn:birthTime value="19630804"/>
                              <urn:addr>
                                 <urn:city>LEESBURG</urn:city>
                                 <urn:state>VA</urn:state>
                                 <urn:postalCode>20176</urn:postalCode>
                              </urn:addr>
                           </urn:patientPerson>
                           <urn:providerOrganization determinerCode="" classCode="">
                              <urn:id root="2.2"/>
                              <urn:contactParty xsi:nil="true" classCode="CON" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </urn:providerOrganization>
                        </urn:patient>
                     </urn:subject1>
                     <urn:custodian typeCode="">
                        <urn:assignedEntity classCode="">
                           <urn:id root="2.2"/>
                        </urn:assignedEntity>
                     </urn:custodian>
                  </urn:registrationEvent>
               </urn:subject>
               <urn:queryAck>
                  <urn:queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
                  <urn:queryResponseCode code="OK"/>
                  <urn:resultTotalQuantity value="1"/>
                  <urn:resultCurrentQuantity value="1"/>
                  <urn:resultRemainingQuantity value="0"/>
               </urn:queryAck>
               <urn:queryByParameter>
                  <urn:queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="M"/>
                       <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="19630804"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectId>
                        <urn:value extension="D123401" root="1.1"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">Younger</urn:family>
                           <urn:given partType="GIV">Gallow</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201306UV02>
         <urn:assertion>
            <urn1:nationalProviderId>1234567890</urn1:nationalProviderId>         
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>LEESBURG</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>20176</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>19990627</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>Test HCID1</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>HCID1</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>YOUNGER</urn1:familyName>
               <urn1:givenName>GALLOW</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>123456789</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>D123401^^^&amp;amp;2.16.840.1.113883.3.337&amp;amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>Test HCID1</urn1:description>
                  <urn1:homeCommunityId>2.16.840.1.113883.3.337</urn1:homeCommunityId>
                  <urn1:name>HCID1</urn1:name>
               </urn1:org>
               <!--Optional:-->
               <urn1:roleCoded>
                  <urn1:code>Code</urn1:code>
                  <urn1:codeSystem>CodeSystem</urn1:codeSystem>
                  <urn1:codeSystemName>CodeSystemName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>codeSystemVersion</urn1:codeSystemVersion>
                  <urn1:displayName>displayName</urn1:displayName>
                  <urn1:originalText>originalText</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>authorized</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTHKIERAN</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
            <!--Optional:-->
            <urn1:samlSignature>
               <!--Optional:-->
               <urn1:keyInfo>
                  <!--Optional:-->
                  <urn1:rsaKeyValueModulus>cid:1157111506023</urn1:rsaKeyValueModulus>
                  <!--Optional:-->
                  <urn1:rsaKeyValueExponent>cid:136268302631</urn1:rsaKeyValueExponent>
               </urn1:keyInfo>
               <!--Optional:-->
               <urn1:signatureValue>cid:880867232879</urn1:signatureValue>
            </urn1:samlSignature>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_PRPA_IN201306UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="9a940775-83f4-4a2a-99d4-5f79b377e7d2"/>
            <con:assertion type="SOAP Fault Assertion" id="8d48c1f3-328d-41ea-b9f0-493fa0cb4971"/>
            <con:assertion name="Match content of [typeCode/@code]" type="XPath Match" id="1d11f6e1-64e3-4c55-af68-0a17eee02fd0">
              <con:configuration>
                <path>declare namespace ns2='urn:hl7-org:v3';//ns2:MCCI_IN000002UV01[1]/ns2:acknowledgement[1]/ns2:typeCode[1]/@code</path>
                <content>CA</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Match content of [acknowledgementDetail/text/text()]" type="XPath Match" id="503e843c-f718-4048-a5e1-2a12f9599e8b">
              <con:configuration>
                <path>declare namespace ns2='urn:hl7-org:v3';//ns2:MCCI_IN000002UV01[1]/ns2:acknowledgement[1]/ns2:acknowledgementDetail[1]/ns2:text/text()</path>
                <content>Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Schema Compliance" type="Schema Compliance" id="be9b1267-e3e4-4d6b-a908-d3224581b9ad">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay">
        <con:settings/>
        <con:config>
          <delay>50000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="e87c68a1-d465-4a76-8ca4-b06010e140bd">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
	
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}



//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	if(!node.@UserName.isEmpty())
			assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
	     assert(!node.@AlternativeUserID.isEmpty())
   	     if(!node.@AlternativeUserID.isEmpty()){
	     //	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

//check for Patient ParticipantObjectIdentification
if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
 }
 
 
//check for Query Parameters ParticipantObjectIdentification
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
		if (!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )     
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given.text() == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1) - ACK">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	     
	     if (!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }
     	assert(!node.@AlternativeUserID.isEmpty())
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	    	assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	    
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
	    assert(!node.@AlternativeUserID.isEmpty())
	    // assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID") 
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){		
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

//check for Patient ParticipantObjectIdentification
if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
}
 
 //check for Query Parameter ParticipantObjectIdentification
 if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->	     
	    		 
		 if(!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
		 
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )	     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/PatientDiscoveryDeferredResponseAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>LocalHCID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAA</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalHCDescription</con:name>
          <con:value>InternalTest1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteHCID</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAA</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteHCDescription</con:name>
          <con:value>InternalTest2</con:value>
        </con:property>
        <con:property>
          <con:name>RemotePatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>NHINGatewayConfigDir</con:name>
          <con:value>C:/Sun/AppServer/domains/domain1/config/nhin</con:value>
        </con:property>
        <con:property>
          <con:name>MPIDir</con:name>
          <con:value>C:/Sun/AppServer/domains/domain1/config</con:value>
        </con:property>
        <con:property>
          <con:name>LocalConfigDir</con:name>
          <con:value>C:/SelfTest/EndToEndSelfTest</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-DocQuery</con:name>
          <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocQueryUnsecured</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-DocRetrieve</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityDocRetrieve</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Reidentification</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntitySubjectDiscovery</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Subscribe</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityNotificationProducer</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Notify</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityNotificationConsumer</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Unsubscribe</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntitySubscriptionManager</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-AuditLogQuery</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityAuditQuery</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-PatientDiscoveryAsyncReq</con:name>
          <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityPatientDiscoveryDeferredRequestUnsecured</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-PatientDiscoveryAsyncResp</con:name>
          <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityPatientDiscoveryDeferredResponseUnsecured</con:value>
        </con:property>
        <con:property>
          <con:name>DBHost</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>DBPort</con:name>
          <con:value>3306</con:value>
        </con:property>
        <con:property>
          <con:name>DBUser</con:name>
          <con:value>nhincuser</con:value>
        </con:property>
        <con:property>
          <con:name>DBPass</con:name>
          <con:value>nhincpass</con:value>
        </con:property>
        <con:property>
          <con:name>PatientCorrelationDB</con:name>
          <con:value>patientcorrelationdb</con:value>
        </con:property>
        <con:property>
          <con:name>PatientCorrelationTable</con:name>
          <con:value>correlatedidentifiers</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionDB</con:name>
          <con:value>subscriptionrepository</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionTable</con:name>
          <con:value>subscription</con:value>
        </con:property>
        <con:property>
          <con:name>AAMappingDB</con:name>
          <con:value>assigningauthoritydb</con:value>
        </con:property>
        <con:property>
          <con:name>AAMappingTable</con:name>
          <con:value>aa_to_home_community_mapping</con:value>
        </con:property>
        <con:property>
          <con:name>AsyncMsgDB</con:name>
          <con:value>asyncmsgs</con:value>
        </con:property>
        <con:property>
          <con:name>AsyncMsgTable</con:name>
          <con:value>asyncmsgrepo</con:value>
        </con:property>
        <con:property>
          <con:name>PseudonymAA</con:name>
          <con:value>ABC</con:value>
        </con:property>
        <con:property>
          <con:name>PseudonymPatientID</con:name>
          <con:value>PSEUDO001</con:value>
        </con:property>
        <con:property>
          <con:name>RealAA</con:name>
          <con:value>1.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>RealPatientID</con:name>
          <con:value>D1234010050</con:value>
        </con:property>
        <con:property>
          <con:name>DQDocID</con:name>
          <con:value>1.123401.11111</con:value>
        </con:property>
        <con:property>
          <con:name>DQPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>DynamicDQDocID</con:name>
          <con:value>103.8.9284320.020.3590.75^1266324032288</con:value>
        </con:property>
        <con:property>
          <con:name>DRDocID</con:name>
          <con:value>1.123407.777777</con:value>
        </con:property>
        <con:property>
          <con:name>DRRepoID</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>NotificationEndpoint</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationConsumerService/HiemNotify</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionEndpoint</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationProducerService/HiemSubscription</con:value>
        </con:property>
        <con:property>
          <con:name>SubscribePatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>NotifySubscriptionID</con:name>
          <con:value>-f7c1a5d:1204e50e42e:-79eb</con:value>
        </con:property>
        <con:property>
          <con:name>NotifySubscriptionManagerEndpointAddress</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
        </con:property>
        <con:property>
          <con:name>UnSubscriptionID</con:name>
          <con:value>3e74139f-5271-4db1-98c0-88748fa3e4e3</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionManagerEndpointAddress</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
        </con:property>
        <con:property>
          <con:name>AQUserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>AQPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-EntityXDRRequest</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityProxyService/EntityXDRRequest</con:value>
        </con:property>
        <con:property>
          <con:name>Gender</con:name>
          <con:value>M</con:value>
        </con:property>
        <con:property>
          <con:name>BirthTime</con:name>
          <con:value>19630804</con:value>
        </con:property>
        <con:property>
          <con:name>FamilyName</con:name>
          <con:value>Younger</con:value>
        </con:property>
        <con:property>
          <con:name>GivenName</con:name>
          <con:value>Gallow</con:value>
        </con:property>
        <con:property>
          <con:name>SubjectID</con:name>
          <con:value>1111</con:value>
        </con:property>
        <con:property>
          <con:name>UniquePatientId</con:name>
          <con:value>1111^^^&amp;amp;1.1&amp;amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>StreetAddress</con:name>
          <con:value>123 Johnson Rd</con:value>
        </con:property>
        <con:property>
          <con:name>City</con:name>
          <con:value>Melbourne</con:value>
        </con:property>
        <con:property>
          <con:name>State</con:name>
          <con:value>FL</con:value>
        </con:property>
        <con:property>
          <con:name>ZipCode</con:name>
          <con:value>12345</con:value>
        </con:property>
        <con:property>
          <con:name>Country</con:name>
          <con:value>US</con:value>
        </con:property>
        <con:property>
          <con:name>SSN</con:name>
          <con:value>123456789</con:value>
        </con:property>
        <con:property>
          <con:name>PurposeOfDisclosure</con:name>
          <con:value>Mental</con:value>
        </con:property>
        <con:property>
          <con:name>ExpirationDate</con:name>
          <con:value>20100520</con:value>
        </con:property>
        <con:property>
          <con:name>DOB</con:name>
          <con:value>19800516</con:value>
        </con:property>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-17T04:30:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-17T04:40:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/17/2015 04:30:00</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-16T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110112</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>24</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText</con:name>
          <con:value>LivingSubject.birthTime</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given.@partType</con:name>
          <con:value>GIV</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>D123402^^^&amp;2.2&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family.@partType</con:name>
          <con:value>FAM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>responseModalityCode.@code</con:name>
          <con:value>R</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.value.@value</con:name>
          <con:value>19630804</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectID</con:name>
          <con:value>a797fa28-45fd-4a29-867d-32f3301e73fe</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor.inbound</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--ParticipantObjectIdentification_Query.ParticipantObjectQuery</con:name>
          <con:value>checks --></con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@root</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText</con:name>
          <con:value>LivingSubject.name</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@extension</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>responsePriorityCode.@code</con:name>
          <con:value>I</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/PatientDiscovery/1_0/NhinService/NhinPatientDiscoveryAsyncResp</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family</con:name>
          <con:value>Younger</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given</con:name>
          <con:value>Gallow</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Query</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText</con:name>
          <con:value>LivingSubject.administrativeGender</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>E</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>queryId.@root</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.value.@code</con:name>
          <con:value>M</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_Initiator.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>queryId.@extension</con:name>
          <con:value>-abd3453dcd24wkkks545</con:value>
        </con:property>
        <con:property>
          <con:name>statusCode.@code</con:name>
          <con:value>new</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Responder.@ParticipantObjectID</con:name>
          <con:value>D123402^^^&amp;2.2&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Patient Discovery" searchProperties="true" id="c7e1d2d1-838b-4836-afa3-1c655cf5c329">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="977bf23d-5f39-44f0-9749-b4d44747e5bb">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="clear correlations table" type="groovy" id="6ddef972-5912-4e28-bfa7-7ef65ed4fba7">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
			sql.execute('delete from ' + context.findProperty('PatientCorrelationTable'))
			}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery" type="request" id="0984b7c0-3ead-43ef-b4cc-9bd425996cbf">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
          <con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
          <con:request name="Patient Discovery" id="cdb4ec39-1909-46bf-bb68-99edaab048f8">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-PatientDiscovery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Patient Discovery">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#RemoteHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#LocalAA}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="${#Project#LocalHCID}" extension="${#TestCase#queryId.@extension}"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#Gender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#BirthTime}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#FamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#GivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#LocalAA}" extension="${#Project#SubjectID}"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:assertion>
            <urn1:nationalProviderId>1234567890</urn1:nationalProviderId>         
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>${#Project#City}</urn1:city>
               <urn1:country>${#Project#Country}</urn1:country>
               <urn1:state>${#Project#State}</urn1:state>
               <urn1:streetAddress>${#Project#StreetAddress}</urn1:streetAddress>
               <urn1:zipCode>${#Project#ZipCode}</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>${#Project#DOB}</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>${#Project#FamilyName}</urn1:familyName>
               <urn1:givenName>${#Project#GivenName}</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#SSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#UniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#LocalHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#LocalHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="e9c992ea-4b6e-43cb-a4c0-f38f4072b023"/>
            <con:assertion disabled="true" type="Schema Compliance" id="136851b4-52ec-4ffa-ae7a-3e326c3a0dd6">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="0f0f9631-eade-498f-87ad-79ff1d078156"/>
            <con:assertion name="Check for existance of [ns3:controlActProcess]" type="XPath Match" id="f263b41b-3449-4dc2-bfc7-921946b3a222">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
				exists( //ns3:PRPA_IN201306UV02/ns3:controlActProcess)</path>
                <content>true</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Given Name XPath Match" type="XPath Match" id="06688a24-12ad-4b3c-8171-79d56b6de66e">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
				//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:given[1]</path>
                <content>${#Project#GivenName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Family Name XPath Match" type="XPath Match" id="a3fc1216-89e5-48d1-bb19-78eb64e01f8b">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
				//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:family[1]</path>
                <content>${#Project#FamilyName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="count correlations (1)" type="groovy" id="cd05f475-6cc3-400e-9e8f-8be370be2c8e">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
		assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
		}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for Audit table to populate">
        <con:settings/>
        <con:config>
          <delay>1500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="b081fc33-6e40-4f46-a408-2cc98a6ca5fb">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
	    	assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	     if(!node.@UserName.isEmpty()){
        		assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
	     if(!node.RoleIDCode.isEmpty()){
   	     	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant.RoleIDCode.@code" )
	     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant.RoleIDCode.@codeSystemName" )
	   		assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )
	     }
	}
}
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
   	     if(!node.@AlternativeUserID.isEmpty()){
	     	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){
			log.info "inside auditsourcetype code" + it.@AuditSourceTypeCode
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
 }
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     //assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )     
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )
	 	
	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	     
	     if(!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	    	assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	    
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
	    assert(!node.@AlternativeUserID.isEmpty())
	    // assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID") 
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){
			log.info "inside auditsourcetype code" + it.@AuditSourceTypeCode
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	    	assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Responder.@ParticipantObjectID" )
   	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )	     
	}
 }
 if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->	     
	     //	assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )	     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )
	 	
	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG1ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/PatientDiscoveryAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-15T16:11:28Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-15T16:21:28Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/15/2015 16:11:28</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-14T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor.inbound</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectQuery</con:name>
          <con:value>ICA8cXVlcnlJZCByb290PSIxLjEiIGV4dGVuc2lvbj0iLWFiZDM0NTNkY2QyNHdra2tzNTQ1Ii8+DQogIDxzdGF0dXNDb2RlIGNvZGU9Im5ldyIvPg0KICA8cmVzcG9uc2VNb2RhbGl0eUNvZGUgY29kZT0iUiIvPg0KICA8cmVzcG9uc2VQcmlvcml0eUNvZGUgY29kZT0iSSIvPg0KICA8cGFyYW1ldGVyTGlzdD4NCiAgICA8bGl2aW5nU3ViamVjdEFkbWluaXN0cmF0aXZlR2VuZGVyPg0KICAgICAgPHZhbHVlIGNvZGU9Ik0iLz4NCiAgICAgIDxzZW1hbnRpY3NUZXh0IHJlcHJlc2VudGF0aW9uPSJUWFQiPkxpdmluZ1N1YmplY3QuYWRtaW5pc3RyYXRpdmVHZW5kZXI8L3NlbWFudGljc1RleHQ+DQogICAgPC9saXZpbmdTdWJqZWN0QWRtaW5pc3RyYXRpdmVHZW5kZXI+DQogICAgPGxpdmluZ1N1YmplY3RCaXJ0aFRpbWU+DQogICAgICA8dmFsdWUgdmFsdWU9IjE5NjMwODA0Ii8+DQogICAgICA8c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmJpcnRoVGltZTwvc2VtYW50aWNzVGV4dD4NCiAgICA8L2xpdmluZ1N1YmplY3RCaXJ0aFRpbWU+DQogICAgPGxpdmluZ1N1YmplY3RJZD4NCiAgICAgIDx2YWx1ZSByb290PSIxLjEiIGV4dGVuc2lvbj0iMTExMSIvPg0KICAgICAgPHNlbWFudGljc1RleHQgcmVwcmVzZW50YXRpb249IlRYVCIvPg0KICAgIDwvbGl2aW5nU3ViamVjdElkPg0KICAgIDxsaXZpbmdTdWJqZWN0TmFtZT4NCiAgICAgIDx2YWx1ZT4NCiAgICAgICAgPGZhbWlseSBwYXJ0VHlwZT0iRkFNIj5Zb3VuZ2VyPC9mYW1pbHk+DQogICAgICAgIDxnaXZlbiBwYXJ0VHlwZT0iR0lWIj5HYWxsb3c8L2dpdmVuPg0KICAgICAgPC92YWx1ZT4NCiAgICAgIDxzZW1hbnRpY3NUZXh0IHJlcHJlc2VudGF0aW9uPSJUWFQiPkxpdmluZ1N1YmplY3QubmFtZTwvc2VtYW50aWNzVGV4dD4NCiAgICA8L2xpdmluZ1N1YmplY3ROYW1lPg0KICA8L3BhcmFtZXRlckxpc3Q+</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectName</con:name>
          <con:value>anonymus</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/PatientDiscovery/1_0/NhinService/NhinPatientDiscovery</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectID</con:name>
          <con:value>a797fa28-45fd-4a29-867d-32f3301e73fe</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>E</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Query</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110112</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>24</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>1111^^^&amp;1.1&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail.@value</con:name>
          <con:value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxxdWVyeUJ5UGFyYW1ldGVyIHhtbG5zPSJ1cm46aGw3LW9yZzp2MyIgeG1sbnM6bnMyPSJ1cm46aGw3LW9yZzpzZHRjIiB4bWxuczpuczM9InVybjpnb3Y6aGhzOmZoYTpuaGluYzpjb21tb246bmhpbmNjb21tb24iIHhtbG5zOm5zND0iaHR0cDovL3d3dy53My5vcmcvMjAwNS8wOC9hZGRyZXNzaW5nIiB4bWxuczpuczU9InVybjpnb3Y6aGhzOmZoYTpuaGluYzpjb21tb246cGF0aWVudGNvcnJlbGF0aW9uZmFjYWRlIj48cXVlcnlJZCByb290PSIxLjEiIGV4dGVuc2lvbj0iLWFiZDM0NTNkY2QyNHdra2tzNTQ1Ii8+PHN0YXR1c0NvZGUgY29kZT0ibmV3Ii8+PHJlc3BvbnNlTW9kYWxpdHlDb2RlIGNvZGU9IlIiLz48cmVzcG9uc2VQcmlvcml0eUNvZGUgY29kZT0iSSIvPjxwYXJhbWV0ZXJMaXN0PjxsaXZpbmdTdWJqZWN0QWRtaW5pc3RyYXRpdmVHZW5kZXI+PHZhbHVlIGNvZGU9Ik0iLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmFkbWluaXN0cmF0aXZlR2VuZGVyPC9zZW1hbnRpY3NUZXh0PjwvbGl2aW5nU3ViamVjdEFkbWluaXN0cmF0aXZlR2VuZGVyPjxsaXZpbmdTdWJqZWN0QmlydGhUaW1lPjx2YWx1ZSB2YWx1ZT0iMTk2MzA4MDQiLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmJpcnRoVGltZTwvc2VtYW50aWNzVGV4dD48L2xpdmluZ1N1YmplY3RCaXJ0aFRpbWU+PGxpdmluZ1N1YmplY3RJZD48dmFsdWUgcm9vdD0iMS4xIiBleHRlbnNpb249IjExMTEiLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIi8+PC9saXZpbmdTdWJqZWN0SWQ+PGxpdmluZ1N1YmplY3ROYW1lPjx2YWx1ZT48ZmFtaWx5IHBhcnRUeXBlPSJGQU0iPllvdW5nZXI8L2ZhbWlseT48Z2l2ZW4gcGFydFR5cGU9IkdJViI+R2FsbG93PC9naXZlbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC92YWx1ZT48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0Lm5hbWU8L3NlbWFudGljc1RleHQ+PC9saXZpbmdTdWJqZWN0TmFtZT48L3BhcmFtZXRlckxpc3Q+PC9xdWVyeUJ5UGFyYW1ldGVyPg==</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectQuery</con:name>
          <con:value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxxdWVyeUJ5UGFyYW1ldGVyIHhtbG5zPSJ1cm46aGw3LW9yZzp2MyIgeG1sbnM6bnMyPSJ1cm46aGw3LW9yZzpzZHRjIiB4bWxuczpuczM9InVybjpnb3Y6aGhzOmZoYTpuaGluYzpjb21tb246bmhpbmNjb21tb24iIHhtbG5zOm5zND0idXJuOmdvdjpoaHM6ZmhhOm5oaW5jOmNvbW1vbjpwYXRpZW50Y29ycmVsYXRpb25mYWNhZGUiIHhtbG5zOm5zNT0iaHR0cDovL3d3dy53My5vcmcvMjAwNS8wOC9hZGRyZXNzaW5nIj48cXVlcnlJZCByb290PSIxLjEiIGV4dGVuc2lvbj0iLWFiZDM0NTNkY2QyNHdra2tzNTQ1Ii8+PHN0YXR1c0NvZGUgY29kZT0ibmV3Ii8+PHJlc3BvbnNlTW9kYWxpdHlDb2RlIGNvZGU9IlIiLz48cmVzcG9uc2VQcmlvcml0eUNvZGUgY29kZT0iSSIvPjxwYXJhbWV0ZXJMaXN0PjxsaXZpbmdTdWJqZWN0QWRtaW5pc3RyYXRpdmVHZW5kZXI+PHZhbHVlIGNvZGU9Ik0iLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmFkbWluaXN0cmF0aXZlR2VuZGVyPC9zZW1hbnRpY3NUZXh0PjwvbGl2aW5nU3ViamVjdEFkbWluaXN0cmF0aXZlR2VuZGVyPjxsaXZpbmdTdWJqZWN0QmlydGhUaW1lPjx2YWx1ZSB2YWx1ZT0iMTk2MzA4MDQiLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmJpcnRoVGltZTwvc2VtYW50aWNzVGV4dD48L2xpdmluZ1N1YmplY3RCaXJ0aFRpbWU+PGxpdmluZ1N1YmplY3RJZD48dmFsdWUgcm9vdD0iMS4xIiBleHRlbnNpb249IjExMTEiLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIi8+PC9saXZpbmdTdWJqZWN0SWQ+PGxpdmluZ1N1YmplY3ROYW1lPjx2YWx1ZT48ZmFtaWx5IHBhcnRUeXBlPSJGQU0iPllvdW5nZXI8L2ZhbWlseT48Z2l2ZW4gcGFydFR5cGU9IkdJViI+R2FsbG93PC9naXZlbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC92YWx1ZT48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0Lm5hbWU8L3NlbWFudGljc1RleHQ+PC9saXZpbmdTdWJqZWN0TmFtZT48L3BhcmFtZXRlckxpc3Q+PC9xdWVyeUJ5UGFyYW1ldGVyPg==</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectDetail.@value</con:name>
          <con:value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxxdWVyeUJ5UGFyYW1ldGVyIHhtbG5zPSJ1cm46aGw3LW9yZzp2MyIgeG1sbnM6bnMyPSJ1cm46aGw3LW9yZzpzZHRjIiB4bWxuczpuczM9InVybjpnb3Y6aGhzOmZoYTpuaGluYzpjb21tb246bmhpbmNjb21tb24iIHhtbG5zOm5zND0iaHR0cDovL3d3dy53My5vcmcvMjAwNS8wOC9hZGRyZXNzaW5nIiB4bWxuczpuczU9InVybjpnb3Y6aGhzOmZoYTpuaGluYzpjb21tb246cGF0aWVudGNvcnJlbGF0aW9uZmFjYWRlIj48cXVlcnlJZCByb290PSIxLjEiIGV4dGVuc2lvbj0iLWFiZDM0NTNkY2QyNHdra2tzNTQ1Ii8+PHN0YXR1c0NvZGUgY29kZT0ibmV3Ii8+PHJlc3BvbnNlTW9kYWxpdHlDb2RlIGNvZGU9IlIiLz48cmVzcG9uc2VQcmlvcml0eUNvZGUgY29kZT0iSSIvPjxwYXJhbWV0ZXJMaXN0PjxsaXZpbmdTdWJqZWN0QWRtaW5pc3RyYXRpdmVHZW5kZXI+PHZhbHVlIGNvZGU9Ik0iLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmFkbWluaXN0cmF0aXZlR2VuZGVyPC9zZW1hbnRpY3NUZXh0PjwvbGl2aW5nU3ViamVjdEFkbWluaXN0cmF0aXZlR2VuZGVyPjxsaXZpbmdTdWJqZWN0QmlydGhUaW1lPjx2YWx1ZSB2YWx1ZT0iMTk2MzA4MDQiLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmJpcnRoVGltZTwvc2VtYW50aWNzVGV4dD48L2xpdmluZ1N1YmplY3RCaXJ0aFRpbWU+PGxpdmluZ1N1YmplY3RJZD48dmFsdWUgcm9vdD0iMS4xIiBleHRlbnNpb249IjExMTEiLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIi8+PC9saXZpbmdTdWJqZWN0SWQ+PGxpdmluZ1N1YmplY3ROYW1lPjx2YWx1ZT48ZmFtaWx5IHBhcnRUeXBlPSJGQU0iPllvdW5nZXI8L2ZhbWlseT48Z2l2ZW4gcGFydFR5cGU9IkdJViI+R2FsbG93PC9naXZlbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC92YWx1ZT48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0Lm5hbWU8L3NlbWFudGljc1RleHQ+PC9saXZpbmdTdWJqZWN0TmFtZT48L3BhcmFtZXRlckxpc3Q+PC9xdWVyeUJ5UGFyYW1ldGVyPg==</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectName.@value</con:name>
          <con:value>anonymus</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectName.@value</con:name>
          <con:value>anonymus</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectQuery.@value</con:name>
          <con:value>test</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectQuery.@value</con:name>
          <con:value>test</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail</con:name>
          <con:value>test</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectDetail</con:name>
          <con:value>test</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_Initiator.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Responder.@ParticipantObjectID</con:name>
          <con:value>D123401^^^&amp;1.1&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText</con:name>
          <con:value>LivingSubject.birthTime</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given.@partType</con:name>
          <con:value>GIV</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family.@partType</con:name>
          <con:value>FAM</con:value>
        </con:property>
        <con:property>
          <con:name>responseModalityCode.@code</con:name>
          <con:value>R</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.value.@value</con:name>
          <con:value>19630804</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--ParticipantObjectIdentification_Query.ParticipantObjectQuery</con:name>
          <con:value>checks --></con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@root</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText</con:name>
          <con:value>LivingSubject.name</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@extension</con:name>
          <con:value>1111</con:value>
        </con:property>
        <con:property>
          <con:name>responsePriorityCode.@code</con:name>
          <con:value>I</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family</con:name>
          <con:value>Younger</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given</con:name>
          <con:value>Gallow</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText</con:name>
          <con:value>LivingSubject.administrativeGender</con:value>
        </con:property>
        <con:property>
          <con:name>queryId.@root</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.value.@code</con:name>
          <con:value>M</con:value>
        </con:property>
        <con:property>
          <con:name>queryId.@extension</con:name>
          <con:value>-abd3453dcd24wkkks545</con:value>
        </con:property>
        <con:property>
          <con:name>statusCode.@code</con:name>
          <con:value>new</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2--></con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Query" searchProperties="true" id="8271858b-0d6d-4d2f-81e5-d8591b2274ae">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="5688daf7-0da4-4351-9d4e-f8c40cf0675c">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy" id="9c194669-54ec-49d2-a5a9-eda6665ce6c5">
        <con:settings/>
        <con:config>
          <script>nhinc.FileUtils.updateProperty(context.findProperty('GatewayPropDir'), "gateway.properties", "documentQueryQuerySelf", "false", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table &amp; Add Correlation" type="groovy" id="84026ec9-cd01-487f-9f50-64aafdf9e3db">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
		def table = context.findProperty('PatientCorrelationTable')

		sql.execute('delete from ' + table)

		def localAA = context.findProperty( "LocalAA" )
		def localPatientID = context.findProperty("LocalPatientID")
		def remoteAA = context.findProperty( "RemoteAA" )
		def remotePatientID = context.findProperty("RemotePatientID")
		def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
		"values (1, ?, ?, ?, ?)"
		sql.executeUpdate(insertSql, [localAA, localPatientID, remoteAA, remotePatientID])
		}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy" id="b9969616-d159-424b-82c3-3f19c6b2f77a">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -> 
		def table = context.findProperty('AAMappingTable')

		sql.execute('delete from ' + table)

		def remoteAA = context.findProperty( "RemoteAA" )
		def remoteHCID = context.findProperty("RemoteHCID")
		def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
		"values (1, ?, ?)"
		sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
		}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request" id="9a543f53-198a-4105-824b-c64777602491">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query" id="b27cc914-3135-4535-965f-6ddaf098c21a">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Document Query">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="LeafClass" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>'${#Project#DQPatientID}^^^&amp;${#Project#LocalAA}&amp;ISO'</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryStatus">
                  <urn2:ValueList>
                     <urn2:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
         <urn2:Slot name="$XDSDocumentEntryClassCode">
            <urn2:ValueList>
                    <urn2:Value>34133-9</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryClassCodeScheme">
                  <urn2:ValueList>
                     <urn2:Value>2.16.840.1.113883.6.1</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerberg</urn3:userName>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
         <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#RemoteHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#RemoteHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#RemoteHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="6fbcad09-48ed-49ce-bd84-d71b1ccd924e"/>
            <con:assertion type="Schema Compliance" id="693a20b9-1f4b-48b1-9a02-3e613f90aade">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="100346c9-e0be-466a-9bd6-37fb9b81e49d"/>
            <con:assertion name="DocID Match" type="GroovyScriptAssertion" id="0a54b025-bdd7-4d1c-9985-f072cc0bc343">
              <con:configuration>
                <scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
				def holder = groovyUtils.getXmlHolder( messageExchange.responseContent );
				holder.namespaces["ns1"] = "urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0";
				holder.namespaces["ns3"] = "urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0";

				def documentID = context.findProperty('DQDocID')
				def msgDocID = holder["//ns1:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject[1]/ns3:ExternalIdentifier[@identificationScheme='urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab']/@value"];
				assert (documentID == msgDocID)</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for Audit table to populate">
        <con:settings/>
        <con:config>
          <delay>1500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="8aa56f04-4f6c-4395-8925-6018498b8eea">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
	
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
	    	assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	    	if(!node.@UserName.isEmpty()){	    
        		assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	    	}
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
	     if(!node.RoleIDCode.isEmpty()){
   	     	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant.RoleIDCode.@code" )
	     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant.RoleIDCode.@codeSystemName" )
	   		assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )
	     }
	}
  }
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->	     
     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	//Keeping this assertion in because we should implement it in the future
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	 }
}
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
   	     if(!node.@AlternativeUserID.isEmpty()){
	     	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->	    
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )   
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )
   	    	
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}	
}
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     //assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectID" )    	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" ) 
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole" )	     
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName" )

	 	byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()   
   		def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))
   		assert parsedParticipantObjectQuery.AdhocQuery.Slot.ValueList.Value.text().contains(context.findProperty( "parsedParticipantObjectQuery.AdhocQuery.Slot.ValueList.Value.PatientID" ))
   		  		
		parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].each{			
			def decodedData1 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@value.text().decodeBase64())
  			assert decodedData1 == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value" )
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type" )
	 		def decodedData2 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@value.text().decodeBase64())
	 		def remoteHCID = testRunner.testCase.testSuite.project.getPropertyValue("RemoteHCID")
	 		def remoteHCIDWithPrefix 
	 		if(remoteHCID.startsWith("urn:oid:")){
	 			remoteHCIDWithPrefix= remoteHCID
	 		}
	 		else{
	 			remoteHCIDWithPrefix = "urn:oid:"+remoteHCID
	 		}
  			assert decodedData2 == remoteHCIDWithPrefix
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type" )
	 		
	 	} 
  	}
  }
}]]></script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2)">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )
	     //assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){
			log.info "inside auditsourcetype code" + it.@AuditSourceTypeCode
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )      
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}	
 }
 if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     //assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectID" )	     	
		assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" ) 
     	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole" )
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName" )

		if(!node.ParticipantObjectQuery.text().isEmpty()){    
    			byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()   
   			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))  
   			assert parsedParticipantObjectQuery.AdhocQuery.Slot.ValueList.Value.text().contains(context.findProperty( "parsedParticipantObjectQuery.AdhocQuery.Slot.ValueList.Value.PatientID" ))
   		}   		
		parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].each{			
			def decodedData1 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@value.text().decodeBase64())
  			assert decodedData1 == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value" )
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type" )
	 		def decodedData2 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@value.text().decodeBase64())
	 		def localHCID = testRunner.testCase.testSuite.project.getPropertyValue("LocalHCID")
	 		def localHCIDWithPrefix 
	 		if(localHCID.startsWith("urn:oid:")){
	 			localHCIDWithPrefix= localHCID
	 		}
	 		else{
	 			localHCIDWithPrefix = "urn:oid:"+localHCID
	 		}
  			assert decodedData2 == localHCIDWithPrefix
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type" )
	 		
	 	} 
  	}
  }
}]]></script></con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG1ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/QueryDocumentAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-27T16:14:44Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-27T16:24:44Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/27/2015 16:14:44</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-26T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>24</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type</con:name>
          <con:value>QueryEncoding</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectName</con:name>
          <con:value>anonymus</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/DocumentQuery/3_0/NhinService/RespondingGateway_Query_Service/DocQuery</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-38</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_Initiator.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>ITI-38</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--Patient--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Query</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--Document</con:name>
          <con:value>--></con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value</con:name>
          <con:value>UTF-8</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>E</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Query</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Query</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110112</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@value</con:name>
          <con:value>urn:oid:2.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>D123401^^^&amp;2.2&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type</con:name>
          <con:value>urn:ihe:iti:xca:2010:homeCommunityId</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.EventID.@displayName</con:name>
          <con:value>Export</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectQuery</con:name>
          <con:value>unknown</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectQuery</con:name>
          <con:value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxBZGhvY1F1ZXJ5UmVxdWVzdCB4bWx....</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>urn:oid:1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--RESPONDER--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ResponderActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/DocumentQuery/2_0/NhinService/RespondingGateway_Query_Service/DocQuery</con:value>
        </con:property>
        <con:property>
          <con:name>ResponderActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>3732@GFE-ONC-WDEV22</con:value>
        </con:property>
        <con:property>
          <con:name>parsedParticipantObjectQuery.AdhocQuery.Slot.ValueList.Value.PatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_g0.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/DocumentQuery/2_0/NhinService/RespondingGateway_Query_Service/DocQuery</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Retrieve" searchProperties="true" id="aaab3ed0-71f1-4f72-83f0-cc840ec185cd">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="51fea7c9-370f-4d28-b362-e79feb7b5d47">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Retrieve" type="request" id="0b684917-158e-4591-ab73-952037ca7338">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityDocRetrieveBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayRetrieve</con:operation>
          <con:request incomingWss="" name="Document Retrieve" outgoingWss="" wssPasswordType="" id="983c7a52-8720-4b48-b7be-d04d68eec9f1">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">true</con:setting>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-DocRetrieve}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:ihe:iti:xds-b:2007" xmlns:urn2="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Document Retrieve">
      <urn:RespondingGateway_CrossGatewayRetrieveRequest>
         <urn1:RetrieveDocumentSetRequest>
            <urn1:DocumentRequest>
               <urn1:HomeCommunityId>${#Project#RemoteHCID}</urn1:HomeCommunityId>
               <urn1:RepositoryUniqueId>${#Project#DRRepoID}</urn1:RepositoryUniqueId>
               <urn1:DocumentUniqueId>${#Project#DRDocID}</urn1:DocumentUniqueId>
            </urn1:DocumentRequest>
         </urn1:RetrieveDocumentSetRequest>
         <urn:assertion>
            <urn2:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:addressType>
                  <urn2:code>AddrCode</urn2:code>
                  <urn2:codeSystem>AddrCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>AddrCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>AddrCode</urn2:displayName>
                  <urn2:originalText>AddrCode</urn2:originalText>
               </urn2:addressType>
               <urn2:city>AddrCity</urn2:city>
               <urn2:country>AddrCountry</urn2:country>
               <urn2:state>AddrState</urn2:state>
               <urn2:streetAddress>AddrStreet</urn2:streetAddress>
               <urn2:zipCode>AddrZip</urn2:zipCode>
            </urn2:address>
            <urn2:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn2:dateOfBirth>
            <urn2:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn2:explanationNonClaimantSignature>
            <urn2:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn2:haveSecondWitnessSignature>
            <urn2:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn2:haveSignature>
            <urn2:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn2:haveWitnessSignature>
            <urn2:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:description>${#Project#LocalHCDescription}</urn2:description>
               <urn2:homeCommunityId>${#Project#LocalHCID}</urn2:homeCommunityId>
               <urn2:name>${#Project#LocalHCDescription}</urn2:name>
            </urn2:homeCommunity>
            <urn2:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:familyName>Smith</urn2:familyName>
               <urn2:givenName>Sandy</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>nameCode</urn2:code>
                  <urn2:codeSystem>nameCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>nameCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>nameCode</urn2:displayName>
                  <urn2:originalText>nameCode</urn2:originalText>
               </urn2:nameType>
               <urn2:secondNameOrInitials>S</urn2:secondNameOrInitials>
               <urn2:fullName>Sandy S. Smith</urn2:fullName>
            </urn2:personName>
            <urn2:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:areaCode>321</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>5436</urn2:extension>
               <urn2:localNumber>253-6849</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>phoneCode</urn2:code>
                  <urn2:codeSystem>phoneCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>phoneCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>phoneCode</urn2:displayName>
                  <urn2:originalText>phoneCode</urn2:originalText>
               </urn2:phoneNumberType>
            </urn2:phoneNumber>
            <urn2:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:addressType>
                  <urn2:code>AddrCode</urn2:code>
                  <urn2:codeSystem>AddrCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>AddrCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>AddrCode</urn2:displayName>
                  <urn2:originalText>AddrCode</urn2:originalText>
               </urn2:addressType>
               <urn2:city>Addr2City</urn2:city>
               <urn2:country>Addr2Country</urn2:country>
               <urn2:state>Addr2State</urn2:state>
               <urn2:streetAddress>Addr2Street</urn2:streetAddress>
               <urn2:zipCode>Addr2Zip</urn2:zipCode>
            </urn2:secondWitnessAddress>
            <urn2:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:familyName>Smith</urn2:familyName>
               <urn2:givenName>Sammy</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>nameCode</urn2:code>
                  <urn2:codeSystem>nameCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>nameCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>nameCode</urn2:displayName>
                  <urn2:originalText>nameCode</urn2:originalText>
               </urn2:nameType>
               <urn2:secondNameOrInitials>s</urn2:secondNameOrInitials>
               <urn2:fullName>Sammy S. Smith</urn2:fullName>
            </urn2:secondWitnessName>
            <urn2:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:areaCode>321</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>5424</urn2:extension>
               <urn2:localNumber>542-6823</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>phoneCode</urn2:code>
                  <urn2:codeSystem>phoneCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>phoneCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>phoneCode</urn2:displayName>
                  <urn2:originalText>phoneCode</urn2:originalText>
               </urn2:phoneNumberType>
            </urn2:secondWitnessPhone>
            <urn2:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn2:SSN>
            <urn2:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn2:uniquePatientId>
            <urn2:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:addressType>
                  <urn2:code>addrCode</urn2:code>
                  <urn2:codeSystem>addrCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>addrCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>addrCode</urn2:displayName>
                  <urn2:originalText>addrCode</urn2:originalText>
               </urn2:addressType>
               <urn2:city>Burnell</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>FL</urn2:state>
               <urn2:streetAddress>825 North</urn2:streetAddress>
               <urn2:zipCode>32184</urn2:zipCode>
            </urn2:witnessAddress>
            <urn2:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:familyName>Smith</urn2:familyName>
               <urn2:givenName>Scott</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>nameCode</urn2:code>
                  <urn2:codeSystem>nameCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>nameCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>nameCode</urn2:displayName>
                  <urn2:originalText>nameCode</urn2:originalText>
               </urn2:nameType>
               <urn2:secondNameOrInitials>S.</urn2:secondNameOrInitials>
               <urn2:fullName>Scott S. Smith</urn2:fullName>
            </urn2:witnessName>
            <urn2:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:areaCode>321</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>8432</urn2:extension>
               <urn2:localNumber>985-2239</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>phoneCode</urn2:code>
                  <urn2:codeSystem>phoneCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>phoneCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>phoneCode</urn2:displayName>
                  <urn2:originalText>phoneCode</urn2:originalText>
               </urn2:phoneNumberType>
            </urn2:witnessPhone>
            <urn2:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:personName>
                  <urn2:familyName>Skagerberg</urn2:familyName>
                  <urn2:givenName>Karl</urn2:givenName>
                  <urn2:nameType>
                     <urn2:code>nameCode</urn2:code>
                     <urn2:codeSystem>nameCodeSyst</urn2:codeSystem>
                     <urn2:codeSystemName>nameCodeSystName</urn2:codeSystemName>
                     <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                     <urn2:displayName>nameCode</urn2:displayName>
                     <urn2:originalText>nameCode</urn2:originalText>
                  </urn2:nameType>
                  <urn2:secondNameOrInitials>S</urn2:secondNameOrInitials>
                  <urn2:fullName>Kasrl S. Skagerberg</urn2:fullName>
               </urn2:personName>
               <urn2:userName>kskagerb</urn2:userName>
               <urn2:org>
                  <urn2:description>${#Project#LocalHCDescription}</urn2:description>
                  <urn2:homeCommunityId>${#Project#LocalHCID}</urn2:homeCommunityId>
                  <urn2:name>${#Project#LocalHCDescription}</urn2:name>
               </urn2:org>
               <urn2:roleCoded>
                  <urn2:code>307969004</urn2:code>
                  <urn2:codeSystem>2.16.840.1.113883.6.96</urn2:codeSystem>
                  <urn2:codeSystemName>SNOMED_CT</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>Public Health</urn2:displayName>
                  <urn2:originalText>Public Health</urn2:originalText>
               </urn2:roleCoded>
            </urn2:userInfo>
            <urn2:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn2:authorized>
            <urn2:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:code>PUBLICHEALTH</urn2:code>
               <urn2:codeSystem>2.16.840.1.113883.3.18.7.1</urn2:codeSystem>
               <urn2:codeSystemName>nhin-purpose</urn2:codeSystemName>
               <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
               <urn2:displayName>Use or disclosure of Psychotherapy Notes</urn2:displayName>
               <urn2:originalText>Use or disclosure of Psychotherapy Notes</urn2:originalText>
            </urn2:purposeOfDisclosureCoded>
            <urn2:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:authInstant>2009-04-16T13:15:39Z</urn2:authInstant>
               <urn2:sessionIndex>987</urn2:sessionIndex>
               <urn2:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn2:authContextClassRef>
               <urn2:subjectLocalityAddress>158.147.185.168</urn2:subjectLocalityAddress>
               <urn2:subjectLocalityDNSName>cs.myharris.net</urn2:subjectLocalityDNSName>
            </urn2:samlAuthnStatement>
            <urn2:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:decision>Permit</urn2:decision>
               <urn2:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn2:resource>
               <urn2:action>TestSaml</urn2:action>
               <urn2:evidence>
                  <urn2:assertion>
                     <urn2:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn2:id>
                     <urn2:issueInstant>2009-04-16T13:10:39.093Z</urn2:issueInstant>
                     <urn2:version>2.0</urn2:version>
                     <urn2:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn2:issuerFormat>
                     <urn2:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn2:issuer>
                     <urn2:conditions>
                        <urn2:notBefore>2009-04-16T13:10:39.093Z</urn2:notBefore>
                        <urn2:notOnOrAfter>2009-12-31T12:00:00.000Z</urn2:notOnOrAfter>
                     </urn2:conditions>
                     <urn2:accessConsentPolicy>urn:oid:1.2.3.4</urn2:accessConsentPolicy>
                     <urn2:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn2:instanceAccessConsentPolicy>
                  </urn2:assertion>
               </urn2:evidence>
            </urn2:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn2:nhinTargetCommunity>
               <urn2:homeCommunity>
                  <urn2:description>${#Project#RemoteHCDescription}</urn2:description>
                  <urn2:homeCommunityId>${#Project#RemoteHCID}</urn2:homeCommunityId>
                  <urn2:name>${#Project#RemoteHCDescription}</urn2:name>
               </urn2:homeCommunity>
            </urn2:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayRetrieveRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="8a234c0b-bcd4-4681-a043-a1f09f685a72"/>
            <con:assertion type="SOAP Fault Assertion" id="e0767e41-19f7-496b-919d-ec151958e802"/>
            <con:assertion type="Schema Compliance" disabled="true" id="fc4837ff-8b05-4832-9e1d-df637e5f299e">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Doc Repository ID" type="XPath Match" id="52ff871a-8cf6-46d2-8ed1-05b4de84ec3f">
              <con:configuration>
                <path>declare namespace ns5='urn:ihe:iti:xds-b:2007';
					//ns5:RetrieveDocumentSetResponse[1]/ns5:DocumentResponse[1]/ns5:RepositoryUniqueId[1]</path>
                <content>${#Project#DRRepoID}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Doc ID" type="XPath Match" id="94ba075f-1803-43b5-a5e8-43082b92669f">
              <con:configuration>
                <path>declare namespace ns5='urn:ihe:iti:xds-b:2007';
					//ns5:RetrieveDocumentSetResponse[1]/ns5:DocumentResponse[1]/ns5:DocumentUniqueId[1]</path>
                <content>${#Project#DRDocID}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Document Data" type="GroovyScriptAssertion" id="ed79985b-1f19-4da1-bec5-1d60c8c1c8b2">
              <con:configuration>
                <scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
					def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
					holder.namespaces["ns"]="urn:ihe:iti:xds-b:2007"
					def docData = holder["//ns:RetrieveDocumentSetResponse[1]/ns:DocumentResponse[1]/ns:Document[1]"]
					log.info docData.toString()
					assert (docData.size() != 0)</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig action="urn:gov:hhs:fha:nhinc:entitydocretrieve/EntityDocRetrievePortType/RespondingGateway_CrossGatewayRetrieveRequest" mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay">
        <con:settings/>
        <con:config>
          <delay>2000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="837f4e46-0ed2-4b1f-8da7-261fcad448be">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
	    	assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	     if(!node.@UserName.isEmpty()){
        		assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
	     if(!node.RoleIDCode.isEmpty()){
   	     	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant.RoleIDCode.@code" )
	     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant.RoleIDCode.@codeSystemName" )
	   		assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )
	     }
	}
  }
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	if(!node.@AlternativeUserID.isEmpty()){
     		//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	}
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )
   	     if(!node.@AlternativeUserID.isEmpty()){
   	     	//commented out as this element value is dynamic at runtime. Ref spec for more detail. 
	     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Destination.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     if(!node.@ParticipantObjectID.isEmpty()){
	     	//commented out until code updated to return correct value as per spec	     	
	     	assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     }
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )	     
     }	
 }
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectID" )
   	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole" )
         	assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName" )
	          	 	
	 	if(!node.ParticipantObjectQuery.text().isEmpty()){
	 		assert node.ParticipantObjectQuery.text() == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectQuery" )	
	 	}
		parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].each{			
			def decodedData1 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@value.text().decodeBase64())
  			assert decodedData1 == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value" )
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type" )	 		
	 		def decodedData2 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@value.text().decodeBase64())
	 		def remoteHCID = testRunner.testCase.testSuite.project.getPropertyValue("RemoteHCID")
	 		def remoteHCIDWithPrefix 
	 		if(remoteHCID.startsWith("urn:oid:")){
	 			remoteHCIDWithPrefix= remoteHCID
	 		}
	 		else{
	 			remoteHCIDWithPrefix = "urn:oid:"+remoteHCID
	 		}
  			assert decodedData2 == remoteHCIDWithPrefix
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type" )	 		
	 	}	    
      } 
  }
}]]></script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2)">
        <con:settings/>
        <con:config><script><![CDATA[import java.util.regex.*
context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification_Responder.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification_Responder.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification_Responder.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->
	     
	     if(!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Destination.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     if(!node.@ParticipantObjectID.isEmpty()){	     
	     //	assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectID" )	     	
	     }
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole" )
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName" )
	          	 	
	 	if(!node.ParticipantObjectQuery.text().isEmpty()){
	 		assert node.ParticipantObjectQuery.text() == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectQuery" )	
	 	}	
		parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].each{			
			def decodedData1 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@value.text().decodeBase64())
  			assert decodedData1 == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value" )
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type" )
	 		def decodedData2 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@value.text().decodeBase64())
  			def remoteHCID = testRunner.testCase.testSuite.project.getPropertyValue("RemoteHCID")
	 		def remoteHCIDWithPrefix 
	 		if(remoteHCID.startsWith("urn:oid:")){
	 			remoteHCIDWithPrefix= remoteHCID
	 		}
	 		else{
	 			remoteHCIDWithPrefix = "urn:oid:"+remoteHCID
	 		}
  			assert decodedData2 == remoteHCIDWithPrefix
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type" )	 		
	 	}	  
	}
 }
}]]></script></con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG1ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/RetrieveDocumentAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>CorrectedRemoteHCID</con:name>
          <con:value>urn:oid:2.2</con:value>
        </con:property>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-27T16:15:27Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-27T16:25:27Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/27/2015 16:15:27</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-26T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@value</con:name>
          <con:value>urn:oid:2.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110107</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>urn:oid:1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectName</con:name>
          <con:value>anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>&lt;--Document</con:name>
          <con:value>--></con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Retrieve</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail_one.@value</con:name>
          <con:value>homeCommunityID</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>500000000^^^&amp;1.1&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.EventID.@code</con:name>
          <con:value>110106</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectQuery</con:name>
          <con:value>unknown</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail.@value</con:name>
          <con:value>ihe:RepositoryUniqueId</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-39</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--Patient--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectQuery</con:name>
          <con:value>unknown</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>9</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>3</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail_one.@type</con:name>
          <con:value>ihe:homeCommunityID</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Import</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>C</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type</con:name>
          <con:value>ihe:homeCommunityID</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.EventID.@displayName</con:name>
          <con:value>Export</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectID</con:name>
          <con:value>1.123407.777777</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/DocumentRetrieve/3_0/NhinService/RespondingGateway_Retrieve_Service/DocRetrieve</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_Initiator.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.@EventActionCode</con:name>
          <con:value>R</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Report Number</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type</con:name>
          <con:value>Repository Unique Id</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail.@type</con:name>
          <con:value>Repository Unique Id</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source_g0.@UserID</con:name>
          <con:value>http://localhost:8080/Gateway/DocumentRetrieve/2_0/EntityService/EntityDocRetrieve</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Admin Distribution" searchProperties="true" id="5783cde4-97f8-4dfb-bdda-ea9d97aee5d1">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="5f570c7b-b6a2-4f34-af0a-198870b3b714">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Admin Distribution" type="request" id="b15beb8d-3fce-4309-a782-fcbeb3d20663">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>AdministrativeDistribution_Binding_Soap12_g1</con:interface>
          <con:operation>SendAlertMessage</con:operation>
          <con:request name="Admin Distribution" id="97dbaf7d-3013-4db8-aa8d-8daa0ec303be">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-EntityAdminDist}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:urn2="urn:oasis:names:tc:emergency:EDXL:DE:1.0">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Admin Distribution">
      <urn:RespondingGateway_SendAlertMessage>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>253987546</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>500000000^^^&amp;1.1&amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>${#TestCase#UserId}</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#LocalHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#LocalHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>80584001</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Psychiatrist</urn1:displayName>
                  <urn1:originalText>Psychiatrist</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PSYCHOTHERAPY</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-09-01T13:00:00.000Z</urn1:authInstant>
               <urn1:sessionIndex>mySessionIndex</urn1:sessionIndex>
               <urn1:authContextClassRef>myContextClassRef</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>mySubjectLocalityAddress</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>mySubjectLocalityDns</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>myAuthzDecisionStatementResource</urn1:resource>
               <urn1:action>myAuthzDecisionStatementAction</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>AuthzDecisionStatementEvidenceAssertionId</urn1:id>
                     <urn1:issueInstant>2009-09-02T14:00:00.000Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuer>CN=Mr Saml User,OU=SU,O=Mr SAML Org,L=Chantilly,ST=VA,C=US</urn1:issuer>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
            <urn1:samlSignature>
               <!--Optional:-->
               <urn1:keyInfo>
                  <!--Optional:-->
                  <urn1:rsaKeyValueModulus>cid:243113487404</urn1:rsaKeyValueModulus>
                  <!--Optional:-->
                  <urn1:rsaKeyValueExponent>cid:159355901562</urn1:rsaKeyValueExponent>
               </urn1:keyInfo>
               <!--Optional:-->
               <urn1:signatureValue>cid:383675305350</urn1:signatureValue>
            </urn1:samlSignature>
            </urn:assertion>
         <!--Optional:-->
         <urn:nhinTargetCommunities>
            <!--1 or more repetitions:-->
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
               <urn1:list>?</urn1:list>
               <urn1:region>?</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>
         <urn2:EDXLDistribution>
            <urn2:distributionID>633990682441061250</urn2:distributionID>
            <urn2:senderID>actor@2.16.840.1.113883.3.166</urn2:senderID>
            <urn2:dateTimeSent>2010-08-14T12:18:13.512375-08:00</urn2:dateTimeSent>
            <urn2:distributionStatus>Actual</urn2:distributionStatus>
            <urn2:distributionType>Update</urn2:distributionType>
            <urn2:combinedConfidentiality>Public</urn2:combinedConfidentiality>
            <!--Optional:-->
            <urn2:language>?</urn2:language>
            <!--Zero or more repetitions:-->
            <urn2:senderRole>
               <urn2:valueListUrn>?</urn2:valueListUrn>
               <!--1 or more repetitions:-->
               <urn2:value>?</urn2:value>
            </urn2:senderRole>
            <!--Zero or more repetitions:-->
            <urn2:recipientRole>
               <urn2:valueListUrn>?</urn2:valueListUrn>
               <!--1 or more repetitions:-->
               <urn2:value>?</urn2:value>
            </urn2:recipientRole>
            <!--Zero or more repetitions:-->
            <urn2:keyword>
               <urn2:valueListUrn>?</urn2:valueListUrn>
               <!--1 or more repetitions:-->
               <urn2:value>?</urn2:value>
            </urn2:keyword>
            <!--Zero or more repetitions:-->
            <urn2:distributionReference>?</urn2:distributionReference>
            <!--Zero or more repetitions:-->
            <urn2:explicitAddress>
               <urn2:explicitAddressScheme>modified_IHEIntendedRecipient</urn2:explicitAddressScheme>
               <!--1 or more repetitions:-->
               <urn2:explicitAddressValue>^^^^^^^^^2.16.840.1.113883.3.166|0000000001</urn2:explicitAddressValue>
            </urn2:explicitAddress>
            <!--Zero or more repetitions:-->
            <urn2:targetArea>
               <!--Zero or more repetitions:-->
               <urn2:circle>?</urn2:circle>
               <!--Zero or more repetitions:-->
               <urn2:polygon>?</urn2:polygon>
               <!--Zero or more repetitions:-->
               <urn2:country>?</urn2:country>
               <!--Zero or more repetitions:-->
               <urn2:subdivision>?</urn2:subdivision>
               <!--Zero or more repetitions:-->
               <urn2:locCodeUN>?</urn2:locCodeUN>
            </urn2:targetArea>
            <!--Zero or more repetitions:-->
            <urn2:contentObject>
               <!--Optional:-->
               <urn2:contentDescription>PH Alert Message</urn2:contentDescription>
               <!--Zero or more repetitions:-->
               <urn2:contentKeyword>
                  <urn2:valueListUrn>?</urn2:valueListUrn>
                  <!--1 or more repetitions:-->
                  <urn2:value>?</urn2:value>
               </urn2:contentKeyword>
               <!--Optional:-->
               <urn2:incidentID>TEST</urn2:incidentID>
               <!--Optional:-->
               <urn2:incidentDescription>This is a test message</urn2:incidentDescription>
               <!--Zero or more repetitions:-->
               <urn2:originatorRole>
                  <urn2:valueListUrn>?</urn2:valueListUrn>
                  <!--1 or more repetitions:-->
                  <urn2:value>?</urn2:value>
               </urn2:originatorRole>
               <!--Zero or more repetitions:-->
               <urn2:consumerRole>
                  <urn2:valueListUrn>?</urn2:valueListUrn>
                  <!--1 or more repetitions:-->
                  <urn2:value>?</urn2:value>
               </urn2:consumerRole>
               <!--Optional:-->
               <urn2:confidentiality>Public</urn2:confidentiality>
               <!--You have a CHOICE of the next 2 items at this level-->
		<urn2:nonXMLContent>
                  <urn2:mimeType>application/pdf</urn2:mimeType>
                  <!--Optional:-->
                  <urn2:size>19</urn2:size>
                  <!--Optional:-->
                  <urn2:digest>?</urn2:digest>
                  <!--Optional:-->
                  <urn2:uri>?</urn2:uri>
                  <!--Optional:-->
                  <urn2:contentData>LDLIHAPIISDALKDF902383K1182K4J49DFNF3KR0482HJ1029F393</urn2:contentData>
               </urn2:nonXMLContent>
               <!--You may enter ANY elements at this point-->
            </urn2:contentObject>
         </urn2:EDXLDistribution>
      </urn:RespondingGateway_SendAlertMessage>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Delay" type="delay" id="f527e8d2-8c77-4917-8a30-68bf67386c84">
        <con:settings/>
        <con:config>
          <delay>60000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="c74eb94a-66f7-4571-ba28-11cebec043b2">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 4 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Entity Inbound" and communityId="1.1"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 3 and messageType="Nhin Inbound" and communityId="1.1"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 4 and messageType="Adapter Outbound" and communityId="1.1"')[0]
}</script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG1ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-01T20:21:49Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-01T20:31:49Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/01/2015 20:21:49</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-10-31T00:00:00Z</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:properties>
      <con:property>
        <con:name>Endpoint-DocRetrieve</con:name>
        <con:value>http://localhost:8080/Gateway/DocumentRetrieve/3_0/EntityService/EntityDocRetrieve</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-DSDeferredResp</con:name>
        <con:value>http://localhost:8080/Gateway/DocumentSubmission/2_0/EntityService/EntityDocSubmissionDeferredResponseUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-EntityAdminDist</con:name>
        <con:value>http://localhost:8080/Gateway/AdminDistribution/2_0/AdministrativeDistribution_Service</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-EntityXDRRequest</con:name>
        <con:value>http://localhost:8080/Gateway/DocumentSubmission/2_0/EntityService/EntityDocSubmissionDeferredRequestUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-XDREntity</con:name>
        <con:value>http://localhost:8080/Gateway/DocumentSubmission/2_0/EntityService/EntityDocSubmissionUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-DocQuery</con:name>
        <con:value>http://localhost:8080/Gateway/DocumentQuery/3_0/EntityService/EntityDocQueryUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-Notify</con:name>
        <con:value>http://localhost:8080/Gateway/HIEM/2_0/EntityNotificationConsumer</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-PatientDiscovery</con:name>
        <con:value>http://localhost:8080/Gateway/PatientDiscovery/1_0/EntityPatientDiscovery</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-PatientDiscoveryAsyncReq</con:name>
        <con:value>http://localhost:8080/Gateway/PatientDiscovery/1_0/EntityService/EntityPatientDiscoveryDeferredRequestUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-PatientDiscoveryAsyncResp</con:name>
        <con:value>http://localhost:8080/Gateway/PatientDiscovery/1_0/EntityService/EntityPatientDiscoveryDeferredResponseUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-Subscribe</con:name>
        <con:value>http://localhost:8080/Gateway/HIEM/2_0/EntityNotificationProducer</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-Unsubscribe</con:name>
        <con:value>http://localhost:8080/Gateway/HIEM/2_0/EntitySubscriptionManager</con:value>
      </con:property>
    </con:properties>
    <con:setupScript/>
    <con:tearDownScript/>
    <con:reportParameters/>
  </con:testSuite>
  <con:testSuite name="g0" id="1273c8d5-ccef-40c7-81fe-7694df2894a5">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Submission Deferred Req" searchProperties="true" id="94e4f365-297e-4c77-aba9-1de42c5decb5">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="557091a6-d63d-4ef5-901c-8d794f4188b7">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Doc Submission Deferred Req" type="request" id="eff8f56f-58c6-4a3b-8e58-0a3e6ee0750b">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityXDRAsyncRequest_Binding</con:interface>
          <con:operation>ProvideAndRegisterDocumentSet-bAsyncRequest</con:operation>
          <con:request incomingWss="" name="Doc Submission Deferred Req" outgoingWss="" useWsAddressing="true" wssPasswordType="" id="63af1f8a-563c-40b8-a921-9f236a6c015a">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-EntityXDRRequest}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:urn3="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:urn4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn5="urn:ihe:iti:xds-b:2007">
   <soap:Header/>
   <soap:Body testSuite="Entity_g0" testCase="Document Submission Deferred Request">
      <urn:RespondingGateway_ProvideAndRegisterDocumentSetRequest>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>253-98-7546</urn1:SSN>
            <urn1:uniquePatientId>500000000^^^&amp;1.1&amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTHKIERAN</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>

         <urn:nhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>

         <urn:ProvideAndRegisterDocumentSetRequest>
            <urn2:SubmitObjectsRequest id="123" comment="comme">
               <!--Optional:-->

               <urn4:RegistryObjectList>
                  <urn4:ExtrinsicObject id="Document01" mimeType="text/xml" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1">
                     <urn4:Slot name="creationTime">
                        <urn4:ValueList>
                           <urn4:Value>20051224</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="languageCode">
                        <urn4:ValueList>
                           <urn4:Value>en-us</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="serviceStartTime">
                        <urn4:ValueList>
                           <urn4:Value>200412230800</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="serviceStopTime">
                        <urn4:ValueList>
                           <urn4:Value>200412230801</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="sourcePatientId">
                        <urn4:ValueList>
                           <urn4:Value>ST-1000^^^&amp;1.3.6.1.4.1.21367.2003.3.9&amp;ISO</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="sourcePatientInfo">
                        <urn4:ValueList>
                           <urn4:Value>PID-3|ST-1000^^^&amp;1.3.6.1.4.1.21367.2003.3.9&amp;ISO</urn4:Value>
                           <urn4:Value>PID-5|Doe^John^^^</urn4:Value>
                           <urn4:Value>PID-7|19560527</urn4:Value>
                           <urn4:Value>PID-8|M</urn4:Value>
                           <urn4:Value>PID-11|100 Main St^^Metropolis^Il^44130^USA</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Name>
                        <urn4:LocalizedString value="Physical"/>
                     </urn4:Name>
                     <urn4:Description/>
                     <urn4:Classification id="cl01" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="Document01">
                        <urn4:Slot name="authorPerson">
                           <urn4:ValueList>
                              <urn4:Value>Gerald Smitty</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorInstitution">
                           <urn4:ValueList>
                              <urn4:Value>Cleveland Clinic</urn4:Value>
                              <urn4:Value>Parma Community</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorRole">
                           <urn4:ValueList>
                              <urn4:Value>Attending</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorSpecialty">
                           <urn4:ValueList>
                              <urn4:Value>Orthopedic</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                     </urn4:Classification>
                     <urn4:Classification id="cl02" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="Document01" nodeRepresentation="History and Physical">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon classCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="History and Physical"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl03" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="Document01" nodeRepresentation="1.3.6.1.4.1.21367.2006.7.101">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon confidentialityCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Clinical-Staff"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="Document01" nodeRepresentation="CDAR2/IHE 1.0">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon formatCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="CDAR2/IHE 1.0"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl05" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="Document01" nodeRepresentation="Outpatient">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon healthcareFacilityTypeCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Outpatient"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl06" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="Document01" nodeRepresentation="General Medicine">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon practiceSettingCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="General Medicine"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl07" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="Document01" nodeRepresentation="34108-1">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>LOINC</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Outpatient Evaluation And Management"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:ExternalIdentifier id="ei01" registryObject="Document01" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" value="SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSDocumentEntry.patientId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei02" registryObject="Document01" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" value="1.3.6.1.4.1.21367.2005.3.9999.32">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                  </urn4:ExtrinsicObject>
                  <urn4:RegistryPackage id="SubmissionSet01">
                     <urn4:Slot name="submissionTime">
                        <urn4:ValueList>
                           <urn4:Value>20041225235050</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Name>
                        <urn4:LocalizedString value="Physical"/>
                     </urn4:Name>
                     <urn4:Description>
                        <urn4:LocalizedString value="Annual physical"/>
                     </urn4:Description>
                     <urn4:Classification id="cl08" classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet01">
                        <urn4:Slot name="authorPerson">
                           <urn4:ValueList>
                              <urn4:Value>Sherry Dopplemeyer</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorInstitution">
                           <urn4:ValueList>
                              <urn4:Value>Cleveland Clinic</urn4:Value>
                              <urn4:Value>Berea Community</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorRole">
                           <urn4:ValueList>
                              <urn4:Value>Purn4ary Surgon</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorSpecialty">
                           <urn4:ValueList>
                              <urn4:Value>Orthopedic</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                     </urn4:Classification>
                     <urn4:Classification id="cl09" classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet01" nodeRepresentation="History and Physical">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon contentTypeCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="History and Physical"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:ExternalIdentifier id="ei03" registryObject="SubmissionSet01" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" value="1.3.6.1.4.1.21367.2005.3.9999.33">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.uniqueId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei04" registryObject="SubmissionSet01" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" value="3670984664">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.sourceId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei05" registryObject="SubmissionSet01" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" value="SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.patientId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                  </urn4:RegistryPackage>
                  <urn4:Classification id="cl10" classifiedObject="SubmissionSet01" classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd"/>
                  <urn4:Association id="as01" associationType="HasMember" sourceObject="SubmissionSet01" targetObject="Document01">
                     <urn4:Slot name="SubmissionSetStatus">
                        <urn4:ValueList>
                           <urn4:Value>Original</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                  </urn4:Association>
               </urn4:RegistryObjectList>

            </urn2:SubmitObjectsRequest>
            <!--1 or more repetitions:-->
            <urn5:Document id="Document01">UjBsR09EbGhjZ0dTQUxNQUFBUUNBRU1tQ1p0dU1GUXhEUzhi</urn5:Document>
         </urn:ProvideAndRegisterDocumentSetRequest>
      </urn:RespondingGateway_ProvideAndRegisterDocumentSetRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="98357dea-4634-462e-9efe-28fadaf622d6"/>
            <con:assertion type="SOAP Fault Assertion" id="12323a86-24ab-4e89-a453-c5b8a83a37b0"/>
            <con:assertion name="Match content of [@status]" type="XPath Match" id="d5490b4a-4298-48ed-ac96-09eddabffe01">
              <con:configuration>
                <path>declare namespace ns10='http://www.hhs.gov/healthit/nhin';
							//ns10:XDRAcknowledgement[1]/ns10:message[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:RequestAccepted</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Schema Compliance" type="Schema Compliance" id="12fc9897-7d71-4bc7-acf2-97672a3f09cd">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:assertion type="Schema Compliance" id="236560f0-9a32-498a-8af6-196cd4d69576">
              <con:configuration/>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig action="urn:gov:hhs:fha:nhinc:nhincentityxdr:async:request:ProvideAndRegisterDocumentSet-bAsyncRequest_RequestMessage" generateMessageId="true" mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="9b286e1c-cf4f-4a95-971b-c012ef67150f" disabled="true">
        <con:settings/>
        <con:config><script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
	
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)" disabled="true">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

//check for Human Requestor details
if (!parsedXmlMessage.ActiveParticipant[0].UserID.isEmpty()){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
	    	assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	     if(!node.@UserName.isEmpty()){
        		assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
	
	}
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID_g0" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
   	     if(!node.@AlternativeUserID.isEmpty()){
	     	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

//Audit Source details
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}


// ParticipantObjectIdentification Patient details
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
 }
 
 
// check for  ParticipantObjectIdentification Submission Set details
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	assert(!node.@ParticipantObjectID.isEmpty())
		if (!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )     
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )	
		assert(!node.@ParticipantObjectIDTypeCode.isEmpty())		 
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given.text() == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script></con:config>
      </con:testStep><con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2) - ACK" disabled="true">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
assert it.@EventActionCode == context.findProperty( "EventIdentification_Responder.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification_Responder.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification_Responder.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	     
	     if (!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }

     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	    	assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID_g0" )	    
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
	    assert(!node.@AlternativeUserID.isEmpty())
	    // assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID") 
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){		
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
 }
 
 if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->	     
	    		 
		 if(!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
		 
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )	     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script></con:config>
      </con:testStep><con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/DocumentSubmissionDeferredRequestAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-28T18:05:44Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-28T18:15:44Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/28/2015 18:05:44</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-27T00:00:00Z</con:value>
        </con:property>
      <con:property><con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name><con:value>110153</con:value></con:property><con:property><con:name>ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode</con:name><con:value>2</con:value></con:property><con:property><con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name><con:value>1</con:value></con:property><con:property><con:name>&lt;!--Destination--></con:name><con:value/></con:property><con:property><con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@displayName</con:name><con:value>submission set classificationNode</con:value></con:property><con:property><con:name>EventIdentification_Responder.@EventActionCode</con:name><con:value>C</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/2_0/DocumentRepositoryXDR_Service</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name><con:value>false</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name><con:value>1</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@AlternativeUserID</con:name><con:value>19233@192.168.1.2</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@code</con:name><con:value>ITI-41</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name><con:value>1010</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name><con:value>IHE Transactions</con:value></con:property><con:property><con:name>EventIdentification_Responder.EventID.@code</con:name><con:value>110107</con:value></con:property><con:property><con:name>ActiveParticipant.@UserIsRequestor</con:name><con:value>true</con:value></con:property><con:property><con:name>&lt;--Patient--></con:name><con:value/></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name><con:value>Destination</con:value></con:property><con:property><con:name>&lt;--Submission</con:name><con:value>Set --></con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name><con:value>localhost</con:value></con:property><con:property><con:name>&lt;!--Human</con:name><con:value>Requestor--></con:value></con:property><con:property><con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name><con:value>2</con:value></con:property><con:property><con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name><con:value>Patient Number</con:value></con:property><con:property><con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name><con:value>Source</con:value></con:property><con:property><con:name>ActiveParticipant.@UserName</con:name><con:value>Karl Skagerberg</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name><con:value>192.168.1.2</con:value></con:property><con:property><con:name>EventIdentification.@EventActionCode</con:name><con:value>R</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name><con:value>110152</con:value></con:property><con:property><con:name>EventIdentification.EventID.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name><con:value>Gateway 1</con:value></con:property><con:property><con:name>EventIdentification.EventID.@displayName</con:name><con:value>Export</con:value></con:property><con:property><con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name><con:value>1</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserName</con:name><con:value>Karl Skagerberg</con:value></con:property><con:property><con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name><con:value>SNOMED_CT</con:value></con:property><con:property><con:name>ActiveParticipant.@AlternativeUserID</con:name><con:value>19233@192.168.1.1</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@displayName</con:name><con:value>Provide and Register Document Set-b</con:value></con:property><con:property><con:name>EventIdentification.EventID.@code</con:name><con:value>110106</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name><con:value>19233@192.168.1.2</con:value></con:property><con:property><con:name>ActiveParticipant.RoleIDCode.@code</con:name><con:value>307969004</con:value></con:property><con:property><con:name>EventIdentification.@EventDateTime</con:name><con:value>2015-04-02T13:47:30.199Z</con:value></con:property><con:property><con:name>ParticipantObjectIdentification_Set.@ParticipantObjectTypeCodeRole</con:name><con:value>20</con:value></con:property><con:property><con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@code</con:name><con:value>urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd</con:value></con:property><con:property><con:name>EventIdentification.@EventOutcomeIndicator</con:name><con:value>0</con:value></con:property><con:property><con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name><con:value>RFC-3881</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserIsRequestor</con:name><con:value>true</con:value></con:property><con:property><con:name>ActiveParticipant.RoleIDCode.@displayName</con:name><con:value>Human Requestor</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserID</con:name><con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value></con:property><con:property><con:name>AuditMessage.xmlns</con:name><con:value>http://nhinc.services.com/schema/auditmessage</con:value></con:property><con:property><con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@codeSystemName</con:name><con:value>IHE XDS Metadata</con:value></con:property><con:property><con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name><con:value>2</con:value></con:property><con:property><con:name>&lt;!--Source--></con:name><con:value/></con:property><con:property><con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name><con:value>SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</con:value></con:property><con:property><con:name>EventIdentification_Responder.EventID.@displayName</con:name><con:value>Import</con:value></con:property><con:property><con:name>ParticipantObjectIdentification_Set.@ParticipantObjectID</con:name><con:value>1.3.6.1.4.1.21367.2005.3.9999.33</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditSourceID</con:name><con:value>urn:oid:1.1</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserName</con:name><con:value>Karl Skagerberg</con:value></con:property><con:property><con:name>ActiveParticipant.@UserID</con:name><con:value>kskagerb</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID_g1</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/2_0/NhinService/XDRRequest_Service</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID_g0</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/1_1/NhinService/XDRRequest_Service</con:value></con:property></con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Submission Deferred Resp" searchProperties="true" id="fffd46f0-f42b-442d-a5f4-3c91df14ea93">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="676eb591-0268-48a9-b4b3-6ea15f2b23b9">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Doc Submission Deferred Resp" type="request" id="e54c0271-bbdd-4a97-82f7-8b2e2ac234f2">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityXDRAsyncResponse_Binding</con:interface>
          <con:operation>ProvideAndRegisterDocumentSet-bAsyncResponse</con:operation>
          <con:request name="Doc Submission Deferred Resp" id="deddfda3-80d7-456b-90ee-5c1e68c2da1e">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-DSDeferredResp}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:urn3="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
   <soap:Header/>
   <soap:Body testSuite="Entity_g0" testCase="Document Submission Deferred Resp">
      <urn:RespondingGateway_ProvideAndRegisterDocumentSetResponseRequest>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
               <urn1:prefix>Ms.</urn1:prefix>
               <urn1:suffix>?</urn1:suffix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
               <urn1:prefix>Mr.</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>253-98-7546</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>500000000^^^&amp;1.1&amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>?addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
               <urn1:prefix>Mr.</urn1:prefix>
               <urn1:suffix>?</urn1:suffix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>SkagerBerg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                     <!--Zero or more repetitions:-->
                     <urn1:translation/>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Karl S. Skagerberg</urn1:fullName>
                  <urn1:prefix>?</urn1:prefix>
                  <urn1:suffix>?</urn1:suffix>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:org>
               <!--Optional:-->
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <!--Optional:-->
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTHKIERAN</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy notes</urn1:originalText>
               <!--Zero or more repetitions:-->
               <urn1:translation/>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <!--Optional:-->
                     <urn1:version>2.0</urn1:version>
                     <!--Optional:-->
                     <urn1:issuer>CN=SAML User,OU=Harris,0=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <!--Optional:-->
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <!--Optional:-->
                     <urn1:conditions>
                        <!--Optional:-->
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <!--Optional:-->
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <!--Zero or more repetitions:-->
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <!--Zero or more repetitions:-->
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
            <!--Optional:-->
            <urn1:samlSignature>
               <!--Optional:-->
               <urn1:keyInfo>
                  <!--Optional:-->
                  <urn1:rsaKeyValueModulus>cid:721645965035</urn1:rsaKeyValueModulus>
                  <!--Optional:-->
                  <urn1:rsaKeyValueExponent>cid:146207300753</urn1:rsaKeyValueExponent>
               </urn1:keyInfo>
               <!--Optional:-->
               <urn1:signatureValue>cid:783710993742</urn1:signatureValue>
            </urn1:samlSignature>
            <!--Optional:-->
            <urn1:samlIssuer>
               <!--Optional:-->
               <urn1:issuer>?</urn1:issuer>
               <!--Optional:-->
               <urn1:issuerFormat>?</urn1:issuerFormat>
            </urn1:samlIssuer>
            <!--Optional:-->
            <urn1:messageId>?</urn1:messageId>
            <!--1 or more repetitions:-->
            <urn1:relatesToList>uuid:088a26e8-6b03-4bf8-84f1-737dc94be2e0</urn1:relatesToList>
         </urn:assertion>
         <!--Optional:-->
         <urn:nhinTargetCommunities>
            <!--1 or more repetitions:-->
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>
         <urn:RegistryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" requestId="?"><!--Optional:-->
            <urn2:ResponseSlotList>
               <!--Zero or more repetitions:-->
               <urn3:Slot name="?" slotType="?">
                  <urn3:ValueList>
                     <urn3:Value>?</urn3:Value>
                  </urn3:ValueList>
               </urn3:Slot>
            </urn2:ResponseSlotList>
            <!--Optional:-->
            <urn2:RegistryErrorList highestSeverity="?">
               <!--1 or more repetitions:-->
               <urn2:RegistryError codeContext="?" errorCode="?" severity="urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error" location="?">?</urn2:RegistryError>
            </urn2:RegistryErrorList>
         </urn:RegistryResponse>
      </urn:RespondingGateway_ProvideAndRegisterDocumentSetResponseRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="4071ced1-b41a-41f9-b31c-748e15bb6f97"/>
            <con:assertion type="Schema Compliance" id="ed2b1ee6-bbe5-4f86-9802-9a33ebb0bdf8">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="02fef744-920a-4730-be81-5074df791300"/>
            <con:assertion type="XPath Match" id="1e3d1438-8da6-4a26-8234-e9132fd91411">
              <con:configuration>
                <path>declare namespace ns10='http://www.hhs.gov/healthit/nhin';
//ns10:XDRAcknowledgement[1]/ns10:message[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:ResponseAccepted</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="1beb8e26-5072-49a0-ac2f-43a76017455b" disabled="true">
        <con:settings/>
        <con:config><script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
	
}</script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)" disabled="true">
        <con:settings/>
        <con:config><script>context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}



//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() &amp;&amp; parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
		//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() &amp;&amp; parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID_g0" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
   	    assert(!node.@AlternativeUserID.isEmpty())
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

//Audit Source details
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

}</script></con:config>
      </con:testStep><con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2) - ACK" disabled="true">
        <con:settings/>
        <con:config><script>context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification_Responder.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification_Responder.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification_Responder.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() &amp;&amp; parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	     
	     if (!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }

     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() &amp;&amp; parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	    	assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID_g0" )	    
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }

     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){		
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}


}</script></con:config>
      </con:testStep><con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/DocumentSubmissionDeferredResponseAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-28T18:05:07Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-28T18:15:07Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/28/2015 18:05:07</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-27T00:00:00Z</con:value>
        </con:property>
      <con:property><con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name><con:value>110153</con:value></con:property><con:property><con:name>&lt;!--Destination--></con:name><con:value/></con:property><con:property><con:name>EventIdentification_Responder.@EventActionCode</con:name><con:value>R</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/2_0/DocumentRepositoryXDR_Service</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name><con:value>false</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name><con:value>1</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@AlternativeUserID</con:name><con:value>19233@192.168.1.2</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@code</con:name><con:value>ITI-41</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name><con:value>1010</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name><con:value>IHE Transactions</con:value></con:property><con:property><con:name>EventIdentification_Responder.EventID.@code</con:name><con:value>110106</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name><con:value>Destination</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name><con:value>2</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name><con:value>localhost</con:value></con:property><con:property><con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name><con:value>Source</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name><con:value>192.168.1.2</con:value></con:property><con:property><con:name>EventIdentification.@EventActionCode</con:name><con:value>C</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name><con:value>110152</con:value></con:property><con:property><con:name>EventIdentification.EventID.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name><con:value>Gateway 1</con:value></con:property><con:property><con:name>EventIdentification.EventID.@displayName</con:name><con:value>Import</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserName</con:name><con:value>Karl Skagerberg</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name><con:value>DCM</con:value></con:property><con:property><con:name>EventIdentification.EventTypeCode.@displayName</con:name><con:value>Provide and Register Document Set-b</con:value></con:property><con:property><con:name>EventIdentification.EventID.@code</con:name><con:value>110107</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name><con:value>19233@192.168.1.2</con:value></con:property><con:property><con:name>EventIdentification.@EventDateTime</con:name><con:value>2015-04-02T13:47:30.199Z</con:value></con:property><con:property><con:name>EventIdentification.@EventOutcomeIndicator</con:name><con:value>0</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserIsRequestor</con:name><con:value>true</con:value></con:property><con:property><con:name>ActiveParticipant_Source.@UserID</con:name><con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value></con:property><con:property><con:name>AuditMessage.xmlns</con:name><con:value>http://nhinc.services.com/schema/auditmessage</con:value></con:property><con:property><con:name>&lt;!--Source--></con:name><con:value/></con:property><con:property><con:name>EventIdentification_Responder.EventID.@displayName</con:name><con:value>Export</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserName</con:name><con:value>Karl Skagerberg</con:value></con:property><con:property><con:name>AuditSourceIdentification.@AuditSourceID</con:name><con:value>urn:oid:1.1</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID_g1</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/2_0/NhinService/XDRResponse_Service</con:value></con:property><con:property><con:name>ActiveParticipant_Dest.@UserID_g0</con:name><con:value>https://localhost:8181/Gateway/DocumentSubmission/1_1/NhinService/XDRResponse_Service</con:value></con:property></con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Submission" searchProperties="true" id="fb0a6077-5978-4615-ae36-a77a19ceef7d">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="a6bf2189-f4b7-424b-834c-fd4846263567">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Doc Submission" type="request" id="29f4a6f6-7da9-485f-a6fe-0aac2b25df4d">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityXDR_Binding</con:interface>
          <con:operation>ProvideAndRegisterDocumentSet-b</con:operation>
          <con:request incomingWss="" name="Doc Submission" outgoingWss="" wssPasswordType="" id="2f92ba8e-5aff-40cb-947c-dca7d071a584">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-XDREntity}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:urn3="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:urn4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn5="urn:ihe:iti:xds-b:2007">
   <soap:Header/>
   <soap:Body testSuite="Entity_g0" testCase="Document Submission">
      <urn:RespondingGateway_ProvideAndRegisterDocumentSetRequest>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>253-98-7546</urn1:SSN>
            <urn1:uniquePatientId>500000000^^^&amp;1.1&amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTHKIERAN</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>

         <urn:nhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>

         <urn:ProvideAndRegisterDocumentSetRequest>
            <urn2:SubmitObjectsRequest id="123" comment="comme">
               <!--Optional:-->

               <urn4:RegistryObjectList>
                  <urn4:ExtrinsicObject id="Document01" mimeType="text/xml" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1">
                     <urn4:Slot name="creationTime">
                        <urn4:ValueList>
                           <urn4:Value>20051224</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="languageCode">
                        <urn4:ValueList>
                           <urn4:Value>en-us</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="serviceStartTime">
                        <urn4:ValueList>
                           <urn4:Value>200412230800</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="serviceStopTime">
                        <urn4:ValueList>
                           <urn4:Value>200412230801</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="sourcePatientId">
                        <urn4:ValueList>
                           <urn4:Value>ST-1000^^^&amp;1.3.6.1.4.1.21367.2003.3.9&amp;ISO</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Slot name="sourcePatientInfo">
                        <urn4:ValueList>
                           <urn4:Value>PID-3|ST-1000^^^&amp;1.3.6.1.4.1.21367.2003.3.9&amp;ISO</urn4:Value>
                           <urn4:Value>PID-5|Doe^John^^^</urn4:Value>
                           <urn4:Value>PID-7|19560527</urn4:Value>
                           <urn4:Value>PID-8|M</urn4:Value>
                           <urn4:Value>PID-11|100 Main St^^Metropolis^Il^44130^USA</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Name>
                        <urn4:LocalizedString value="Physical"/>
                     </urn4:Name>
                     <urn4:Description/>
                     <urn4:Classification id="cl01" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="Document01">
                        <urn4:Slot name="authorPerson">
                           <urn4:ValueList>
                              <urn4:Value>Gerald Smitty</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorInstitution">
                           <urn4:ValueList>
                              <urn4:Value>Cleveland Clinic</urn4:Value>
                              <urn4:Value>Parma Community</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorRole">
                           <urn4:ValueList>
                              <urn4:Value>Attending</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorSpecialty">
                           <urn4:ValueList>
                              <urn4:Value>Orthopedic</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                     </urn4:Classification>
                     <urn4:Classification id="cl02" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="Document01" nodeRepresentation="History and Physical">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon classCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="History and Physical"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl03" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="Document01" nodeRepresentation="1.3.6.1.4.1.21367.2006.7.101">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon confidentialityCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Clinical-Staff"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl04" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="Document01" nodeRepresentation="CDAR2/IHE 1.0">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon formatCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="CDAR2/IHE 1.0"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl05" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="Document01" nodeRepresentation="Outpatient">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon healthcareFacilityTypeCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Outpatient"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl06" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="Document01" nodeRepresentation="General Medicine">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon practiceSettingCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="General Medicine"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:Classification id="cl07" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="Document01" nodeRepresentation="34108-1">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>LOINC</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="Outpatient Evaluation And Management"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:ExternalIdentifier id="ei01" registryObject="Document01" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" value="SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSDocumentEntry.patientId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei02" registryObject="Document01" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" value="1.3.6.1.4.1.21367.2005.3.9999.32">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                  </urn4:ExtrinsicObject>
                  <urn4:RegistryPackage id="SubmissionSet01">
                     <urn4:Slot name="submissionTime">
                        <urn4:ValueList>
                           <urn4:Value>20041225235050</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                     <urn4:Name>
                        <urn4:LocalizedString value="Physical"/>
                     </urn4:Name>
                     <urn4:Description>
                        <urn4:LocalizedString value="Annual physical"/>
                     </urn4:Description>
                     <urn4:Classification id="cl08" classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet01">
                        <urn4:Slot name="authorPerson">
                           <urn4:ValueList>
                              <urn4:Value>Sherry Dopplemeyer</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorInstitution">
                           <urn4:ValueList>
                              <urn4:Value>Cleveland Clinic</urn4:Value>
                              <urn4:Value>Berea Community</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorRole">
                           <urn4:ValueList>
                              <urn4:Value>Purn4ary Surgon</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Slot name="authorSpecialty">
                           <urn4:ValueList>
                              <urn4:Value>Orthopedic</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                     </urn4:Classification>
                     <urn4:Classification id="cl09" classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet01" nodeRepresentation="History and Physical">
                        <urn4:Slot name="codingScheme">
                           <urn4:ValueList>
                              <urn4:Value>Connect-a-thon contentTypeCodes</urn4:Value>
                           </urn4:ValueList>
                        </urn4:Slot>
                        <urn4:Name>
                           <urn4:LocalizedString value="History and Physical"/>
                        </urn4:Name>
                     </urn4:Classification>
                     <urn4:ExternalIdentifier id="ei03" registryObject="SubmissionSet01" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" value="1.3.6.1.4.1.21367.2005.3.9999.33">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.uniqueId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei04" registryObject="SubmissionSet01" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" value="3670984664">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.sourceId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                     <urn4:ExternalIdentifier id="ei05" registryObject="SubmissionSet01" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" value="SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO">
                        <urn4:Name>
                           <urn4:LocalizedString value="XDSSubmissionSet.patientId"/>
                        </urn4:Name>
                     </urn4:ExternalIdentifier>
                  </urn4:RegistryPackage>
                  <urn4:Classification id="cl10" classifiedObject="SubmissionSet01" classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd"/>
                  <urn4:Association id="as01" associationType="HasMember" sourceObject="SubmissionSet01" targetObject="Document01">
                     <urn4:Slot name="SubmissionSetStatus">
                        <urn4:ValueList>
                           <urn4:Value>Original</urn4:Value>
                        </urn4:ValueList>
                     </urn4:Slot>
                  </urn4:Association>
               </urn4:RegistryObjectList>

            </urn2:SubmitObjectsRequest>
            <!--1 or more repetitions:-->
            <urn5:Document id="Document01">UjBsR09EbGhjZ0dTQUxNQUFBUUNBRU1tQ1p0dU1GUXhEUzhi</urn5:Document>
         </urn:ProvideAndRegisterDocumentSetRequest>
      </urn:RespondingGateway_ProvideAndRegisterDocumentSetRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="6ce41004-3e1b-4d47-834f-e747c107057f"/>
            <con:assertion type="SOAP Fault Assertion" id="e4dee3d8-6ff1-45cc-b167-a253dda9310d"/>
            <con:assertion type="XPath Match" id="1e50ce52-abdc-4afc-8071-cb42e37d6300">
              <con:configuration>
                <path>declare namespace ns11='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
							//ns11:RegistryResponse[1]/@status</path>
                <content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Schema Compliance" type="Schema Compliance" id="c287e8ce-2743-4a82-baf3-b526918755bc">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig action="{urn:gov:hhs:fha:nhinc:nhincentityxdr}ProvideAndRegisterDocumentSet-b" mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay">
        <con:settings/>
        <con:config>
          <delay>2000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="2eb71bf5-f7f8-4bb7-a788-fc4eda18b04d">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
		assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	     }     	
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
     	if(!node.RoleIDCode.isEmpty()){
   	     	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant.RoleIDCode.@code" )
	     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant.RoleIDCode.@codeSystemName" )
	   		assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )
	     }
	}
  }
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     //assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
          assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserName" )
	     }
   	     if(!node.@AlternativeUserID.isEmpty()){
	     	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->	    
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )
     	assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}	
}
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     //assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCodeRole" )
	     assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@displayName" )
  	}
 }
}]]></script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification_Responder.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification_Responder.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification_Responder.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->
	     
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     //assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
          assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserName" )
	     }
   	     //assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )	     
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
     	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){
			log.info "inside auditsourcetype code" + it.@AuditSourceTypeCode
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )
     	assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}	
}
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     //assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Set.@ParticipantObjectTypeCodeRole" )
	     assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@displayName" )
  	}
 }
}]]></script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/DocumentSubmissionAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-27T20:03:24Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-27T20:13:24Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/27/2015 20:03:24</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-26T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>submission set classificationNode</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.@EventActionCode</con:name>
          <con:value>C</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/DocumentSubmission/2_0/DocumentRepositoryXDR_Service</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-41</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.EventID.@code</con:name>
          <con:value>110107</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--Patient--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--Submission</con:name>
          <con:value>Set --></con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>R</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Export</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Provide and Register Document Set-b</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110106</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>20</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>IHE XDS Metadata</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>SELF-5^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.EventID.@displayName</con:name>
          <con:value>Import</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Set.@ParticipantObjectID</con:name>
          <con:value>1.3.6.1.4.1.21367.2005.3.9999.33</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>urn:oid:1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Patient Discovery Deferred Req" searchProperties="true" id="2d01ba9b-8e2f-4495-9afb-0df274e6ff49">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="809a434a-ba0b-48e1-98db-e52ff6b22075">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery Deferred Req" type="request" id="a49a8d24-19ba-4232-a4fa-a58cc9365089">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryAsyncReqBindingSoap</con:interface>
          <con:operation>ProcessPatientDiscoveryAsyncReq</con:operation>
          <con:request name="Patient Discovery Deferred Req" useWsAddressing="true" id="59496b2d-d746-43b6-8d11-e74f36bb3a59">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-PatientDiscoveryAsyncReq}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g0" testCase="Patient Discovery Deferred Req">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#RemoteHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#LocalAA}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="${#Project#RemoteHCID}" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#Gender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#BirthTime}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#FamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#GivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#LocalAA}" extension="${#Project#LocalPatientID}"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:assertion>
            <urn1:nationalProviderId>1234567890</urn1:nationalProviderId>         
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>LEESBURG</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>20176</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>19990627</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>YOUNGER</urn1:familyName>
               <urn1:givenName>GALLOW</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>123456789</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>D123401^^^&amp;amp;2.16.840.1.113883.3.337&amp;amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>Test HCID1</urn1:description>
                  <urn1:homeCommunityId>2.16.840.1.113883.3.337</urn1:homeCommunityId>
                  <urn1:name>HCID1</urn1:name>
               </urn1:org>
               <!--Optional:-->
               <urn1:roleCoded>
                  <urn1:code>Code</urn1:code>
                  <urn1:codeSystem>CodeSystem</urn1:codeSystem>
                  <urn1:codeSystemName>CodeSystemName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>codeSystemVersion</urn1:codeSystemVersion>
                  <urn1:displayName>displayName</urn1:displayName>
                  <urn1:originalText>originalText</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>authorized</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTHKIERAN</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <!--Optional:-->
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
            <!--Optional:-->
            <urn1:samlSignature>
               <!--Optional:-->
               <urn1:keyInfo>
                  <!--Optional:-->
                  <urn1:rsaKeyValueModulus>cid:1157111506023</urn1:rsaKeyValueModulus>
                  <!--Optional:-->
                  <urn1:rsaKeyValueExponent>cid:136268302631</urn1:rsaKeyValueExponent>
               </urn1:keyInfo>
               <!--Optional:-->
               <urn1:signatureValue>cid:880867232879</urn1:signatureValue>
            </urn1:samlSignature>
         </urn:assertion>
         <!--Optional:-->
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="7472b85b-18a5-4867-946b-25e8e6d79d09"/>
            <con:assertion type="SOAP Fault Assertion" id="5e2e1f22-a597-4ebb-8a3a-8c50e65f8ce6"/>
            <con:assertion name="Verify Receiver" type="XPath Match" id="146d2cd3-4770-4db4-ac42-722b4b130daa">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
							//ns3:MCCI_IN000002UV01[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
                <content>1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Verify Sender" type="XPath Match" id="5d456bb9-7c1f-4b49-addd-42aa2e56ab91">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
							//ns3:MCCI_IN000002UV01[1]/ns3:sender[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
                <content>2.2</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Verify Message" type="XPath Match" id="eedb31ff-6dab-47b6-9ad3-09759933b3d5">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
							//ns3:MCCI_IN000002UV01[1]/ns3:acknowledgement[1]/ns3:acknowledgementDetail[1]/ns3:text[1]/text()</path>
                <content>Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Verify RelatesTo" type="XPath Match" id="77a9decb-9562-4bc0-a47c-4873d44096a1">
              <con:configuration>
                <path>declare namespace ns1='http://www.w3.org/2005/08/addressing';
							//ns1:RelatesTo[1]/text()</path>
                <content>uuid:6666666666.66666.666.66</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Schema Compliance" type="Schema Compliance" id="37eac785-f03d-44b0-8cf5-f577561f5003">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig action="urn:gov:hhs:fha:nhinc:entitypatientdiscoveryasyncreq:ProcessPatientDiscoveryAsyncReqAsyncRequest" addDefaultTo="true" messageID="uuid:6666666666.66666.666.66" mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="0fa073f7-7cd1-403b-a396-78420ded9acd">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
	
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty()){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
	    	assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	     if(!node.@UserName.isEmpty()){
        		assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
	
	}
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
   	     if(!node.@AlternativeUserID.isEmpty()){
	     	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
 }
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
		if (!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )     
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given.text() == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2) - ACK">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	     
	     if (!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }

     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	    	assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	    
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
	    assert(!node.@AlternativeUserID.isEmpty())
	    // assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID") 
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){		
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

if (parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty()){
	// Patient details will not be populated for PD Deferred 
 }
 
 
 if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->	     
	    		 
		 if(!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
		 
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )	     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script></con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/PatientDiscoveryDeferredAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>LocalHCID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAA</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalHCDescription</con:name>
          <con:value>InternalTest1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteHCID</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAA</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteHCDescription</con:name>
          <con:value>InternalTest2</con:value>
        </con:property>
        <con:property>
          <con:name>RemotePatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>NHINGatewayConfigDir</con:name>
          <con:value>C:/Sun/AppServer/domains/domain1/config/nhin</con:value>
        </con:property>
        <con:property>
          <con:name>MPIDir</con:name>
          <con:value>C:/Sun/AppServer/domains/domain1/config</con:value>
        </con:property>
        <con:property>
          <con:name>LocalConfigDir</con:name>
          <con:value>C:/SelfTest/EndToEndSelfTest</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-DocQuery</con:name>
          <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocQueryUnsecured</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-DocRetrieve</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityDocRetrieve</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Reidentification</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntitySubjectDiscovery</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Subscribe</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityNotificationProducer</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Notify</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityNotificationConsumer</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Unsubscribe</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntitySubscriptionManager</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-AuditLogQuery</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityAuditQuery</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-PatientDiscoveryAsyncReq</con:name>
          <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityPatientDiscoveryDeferredRequestUnsecured</con:value>
        </con:property>
        <con:property>
          <con:name>DBHost</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>DBPort</con:name>
          <con:value>3306</con:value>
        </con:property>
        <con:property>
          <con:name>DBUser</con:name>
          <con:value>nhincuser</con:value>
        </con:property>
        <con:property>
          <con:name>DBPass</con:name>
          <con:value>nhincpass</con:value>
        </con:property>
        <con:property>
          <con:name>PatientCorrelationDB</con:name>
          <con:value>patientcorrelationdb</con:value>
        </con:property>
        <con:property>
          <con:name>PatientCorrelationTable</con:name>
          <con:value>correlatedidentifiers</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionDB</con:name>
          <con:value>subscriptionrepository</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionTable</con:name>
          <con:value>subscription</con:value>
        </con:property>
        <con:property>
          <con:name>AAMappingDB</con:name>
          <con:value>assigningauthoritydb</con:value>
        </con:property>
        <con:property>
          <con:name>AAMappingTable</con:name>
          <con:value>aa_to_home_community_mapping</con:value>
        </con:property>
        <con:property>
          <con:name>PseudonymAA</con:name>
          <con:value>ABC</con:value>
        </con:property>
        <con:property>
          <con:name>PseudonymPatientID</con:name>
          <con:value>PSEUDO001</con:value>
        </con:property>
        <con:property>
          <con:name>RealAA</con:name>
          <con:value>1.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>RealPatientID</con:name>
          <con:value>D1234010050</con:value>
        </con:property>
        <con:property>
          <con:name>DQDocID</con:name>
          <con:value>1.123401.11111</con:value>
        </con:property>
        <con:property>
          <con:name>DQPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>DynamicDQDocID</con:name>
          <con:value>103.8.9284320.020.3590.75^1266324032288</con:value>
        </con:property>
        <con:property>
          <con:name>DRDocID</con:name>
          <con:value>1.123407.777777</con:value>
        </con:property>
        <con:property>
          <con:name>DRRepoID</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>NotificationEndpoint</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationConsumerService/HiemNotify</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionEndpoint</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationProducerService/HiemSubscription</con:value>
        </con:property>
        <con:property>
          <con:name>SubscribePatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>NotifySubscriptionID</con:name>
          <con:value>-f7c1a5d:1204e50e42e:-79eb</con:value>
        </con:property>
        <con:property>
          <con:name>NotifySubscriptionManagerEndpointAddress</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
        </con:property>
        <con:property>
          <con:name>UnSubscriptionID</con:name>
          <con:value>3e74139f-5271-4db1-98c0-88748fa3e4e3</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionManagerEndpointAddress</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
        </con:property>
        <con:property>
          <con:name>AQUserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>AQPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-EntityXDRRequest</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityProxyService/EntityXDRRequest</con:value>
        </con:property>
        <con:property>
          <con:name>AsyncMsgDB</con:name>
          <con:value>asyncmsgs</con:value>
        </con:property>
        <con:property>
          <con:name>AsyncMsgTable</con:name>
          <con:value>asyncmsgrepo</con:value>
        </con:property>
        <con:property>
          <con:name>Gender</con:name>
          <con:value>M</con:value>
        </con:property>
        <con:property>
          <con:name>BirthTime</con:name>
          <con:value>19630804</con:value>
        </con:property>
        <con:property>
          <con:name>FamilyName</con:name>
          <con:value>Younger</con:value>
        </con:property>
        <con:property>
          <con:name>GivenName</con:name>
          <con:value>Gallow</con:value>
        </con:property>
        <con:property>
          <con:name>SubjectID</con:name>
          <con:value>1111</con:value>
        </con:property>
        <con:property>
          <con:name>UniquePatientId</con:name>
          <con:value>1111^^^&amp;amp;1.1&amp;amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>StreetAddress</con:name>
          <con:value>123 Johnson Rd</con:value>
        </con:property>
        <con:property>
          <con:name>City</con:name>
          <con:value>Melbourne</con:value>
        </con:property>
        <con:property>
          <con:name>State</con:name>
          <con:value>FL</con:value>
        </con:property>
        <con:property>
          <con:name>ZipCode</con:name>
          <con:value>12345</con:value>
        </con:property>
        <con:property>
          <con:name>Country</con:name>
          <con:value>US</con:value>
        </con:property>
        <con:property>
          <con:name>SSN</con:name>
          <con:value>123456789</con:value>
        </con:property>
        <con:property>
          <con:name>PurposeOfDisclosure</con:name>
          <con:value>Mental</con:value>
        </con:property>
        <con:property>
          <con:name>ExpirationDate</con:name>
          <con:value>20100520</con:value>
        </con:property>
        <con:property>
          <con:name>DOB</con:name>
          <con:value>19800516</con:value>
        </con:property>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-21T00:35:53Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-21T00:45:53Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/21/2015 00:35:53</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-20T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110112</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>24</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText</con:name>
          <con:value>LivingSubject.birthTime</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given.@partType</con:name>
          <con:value>GIV</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>D123401^^^&amp;1.1&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family.@partType</con:name>
          <con:value>FAM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>responseModalityCode.@code</con:name>
          <con:value>R</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.value.@value</con:name>
          <con:value>19630804</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectID</con:name>
          <con:value>a797fa28-45fd-4a29-867d-32f3301e73fe</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor.inbound</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--ParticipantObjectIdentification_Query.ParticipantObjectQuery</con:name>
          <con:value>checks --></con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@root</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText</con:name>
          <con:value>LivingSubject.name</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@extension</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>responsePriorityCode.@code</con:name>
          <con:value>I</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/PatientDiscovery/1_0/NhinService/NhinPatientDiscoveryAsyncReq</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family</con:name>
          <con:value>Younger</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given</con:name>
          <con:value>Gallow</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Query</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText</con:name>
          <con:value>LivingSubject.administrativeGender</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>E</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>queryId.@root</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.value.@code</con:name>
          <con:value>M</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_Initiator.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>queryId.@extension</con:name>
          <con:value>-abd3453dcd24wkkks545</con:value>
        </con:property>
        <con:property>
          <con:name>statusCode.@code</con:name>
          <con:value>new</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Responder.@ParticipantObjectID</con:name>
          <con:value>D123401^^^&amp;1.1&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Patient Discovery Deferred Resp" searchProperties="true" id="62a59f14-2e37-40a3-90c8-4afd3041d32d">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="5239df91-5bfe-424b-a952-f22ba8e4c481">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery Deferred Resp" type="request" id="53ed50fb-ec85-4d41-b161-a0cc67d1266f">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryAsyncRespBindingSoap</con:interface>
          <con:operation>ProcessPatientDiscoveryAsyncResp</con:operation>
          <con:request name="Patient Discovery Deferred Resp" id="86fe14f0-3efd-42df-b492-e8b4e34cf120">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-PatientDiscoveryAsyncResp}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header xmlns:add="SoapUI_Test/ValidationSuite/2-EndToEndSelfTest-soapui-project.xml">
      <add:Action>urn:gov:hhs:fha:nhinc:entitypatientdiscoveryasyncresp:ProcessPatientDiscoveryAsyncRespAsyncRequest</add:Action>
      <add:MessageID>uuid:12bcfc1e-f422-4d1d-af99-ff83d050313e</add:MessageID>
      <add:RelatesTo>uuid:6666666666.66666.666.66</add:RelatesTo>
      <add:To>${#TestSuite#Endpoint-PatientDiscoveryAsyncResp}</add:To>
   </soap:Header>
   <soap:Body testSuite="Entity_g0" testCase="Patient Discovery Deferred Resp">
      <urn:RespondingGateway_PRPA_IN201306UV02Request>
         <urn:PRPA_IN201306UV02 ITSVersion="XML_1.0">
            <urn:id root="2.2" extension="-5a3e95b1:11d1fa33d45:-8e45"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201306UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <!--1 or more repetitions:-->
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="1.1"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="1.1"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="2.2"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id extension="D123402" root="2.2"/>
                           <urn:statusCode code="SD"/>
                           <urn:patientPerson>
                              <urn:name>
                                 <urn:family partType="FAM">Younger</urn:family>
                                 <urn:given partType="GIV">Gallow</urn:given>
                              </urn:name>
                              <urn:administrativeGenderCode code="M"/>
                              <urn:birthTime value="19630804"/>
                              <urn:addr>
                                 <urn:city>LEESBURG</urn:city>
                                 <urn:state>VA</urn:state>
                                 <urn:postalCode>20176</urn:postalCode>
                              </urn:addr>
                           </urn:patientPerson>
                           <urn:providerOrganization determinerCode="" classCode="">
                              <urn:id root="2.2"/>
                              <urn:contactParty xsi:nil="true" classCode="CON" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </urn:providerOrganization>
                        </urn:patient>
                     </urn:subject1>
                     <urn:custodian typeCode="">
                        <urn:assignedEntity classCode="">
                           <urn:id root="2.2"/>
                        </urn:assignedEntity>
                     </urn:custodian>
                  </urn:registrationEvent>
               </urn:subject>
               <urn:queryAck>
                  <urn:queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
                  <urn:queryResponseCode code="OK"/>
                  <urn:resultTotalQuantity value="1"/>
                  <urn:resultCurrentQuantity value="1"/>
                  <urn:resultRemainingQuantity value="0"/>
               </urn:queryAck>
               <urn:queryByParameter>
                  <urn:queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="M"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="19630804"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectId>
                        <urn:value extension="D123401" root="1.1"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">Younger</urn:family>
                           <urn:given partType="GIV">Gallow</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201306UV02>
         <urn:assertion>
            <urn1:nationalProviderId>1234567890</urn1:nationalProviderId>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>LEESBURG</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>20176</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>19990627</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>Test HCID1</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>HCID1</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>YOUNGER</urn1:familyName>
               <urn1:givenName>GALLOW</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>123456789</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>D123401^^^&amp;amp;2.16.840.1.113883.3.337&amp;amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>Test HCID1</urn1:description>
                  <urn1:homeCommunityId>1.1</urn1:homeCommunityId>
                  <urn1:name>HCID1</urn1:name>
               </urn1:org>
               <!--Optional:-->
               <urn1:roleCoded>
                  <urn1:code>Code</urn1:code>
                  <urn1:codeSystem>CodeSystem</urn1:codeSystem>
                  <urn1:codeSystemName>CodeSystemName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>codeSystemVersion</urn1:codeSystemVersion>
                  <urn1:displayName>displayName</urn1:displayName>
                  <urn1:originalText>originalText</urn1:originalText>
                  <!--Zero or more repetitions:-->
                  <urn1:translation/>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>authorized</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTHKIERAN</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
            <!--Optional:-->
            <urn1:samlSignature>
               <!--Optional:-->
               <urn1:keyInfo>
                  <!--Optional:-->
                  <urn1:rsaKeyValueModulus>cid:1157111506023</urn1:rsaKeyValueModulus>
                  <!--Optional:-->
                  <urn1:rsaKeyValueExponent>cid:136268302631</urn1:rsaKeyValueExponent>
               </urn1:keyInfo>
               <!--Optional:-->
               <urn1:signatureValue>cid:880867232879</urn1:signatureValue>
            </urn1:samlSignature>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_PRPA_IN201306UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="d23d84a9-90a1-4651-b7f7-c5ee3e05df7f"/>
            <con:assertion type="SOAP Fault Assertion" id="58071050-c5a4-43c1-8f9c-2032530b7e78"/>
            <con:assertion name="Match content of [typeCode/@code]" type="XPath Match" id="56388bd0-8df3-4576-aa21-9f6a8b019832">
              <con:configuration>
                <path>declare namespace ns2='urn:hl7-org:v3';//ns2:MCCI_IN000002UV01[1]/ns2:acknowledgement[1]/ns2:typeCode[1]/@code</path>
                <content>CA</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Match content of [acknowledgementDetail/text/text()]" type="XPath Match" id="dde5d85d-287e-47d2-bd13-5a19547a4b4d">
              <con:configuration>
                <path>declare namespace ns2='urn:hl7-org:v3';//ns2:MCCI_IN000002UV01[1]/ns2:acknowledgement[1]/ns2:acknowledgementDetail[1]/ns2:text/text()</path>
                <content>Success</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Schema Compliance" type="Schema Compliance" id="910aa0b1-5123-4d97-96bd-a18fa26b61ec">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay">
        <con:settings/>
        <con:config>
          <delay>50000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="75840f83-2ae6-4898-8c2e-6c61104588a2">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
	
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}



//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	if(!node.@UserName.isEmpty())
			assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
	     assert(!node.@AlternativeUserID.isEmpty())
   	     if(!node.@AlternativeUserID.isEmpty()){
	     //	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

//check for Patient ParticipantObjectIdentification
if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
 }
 
 
//check for Query Parameters ParticipantObjectIdentification
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
		if (!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )     
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given.text() == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1) - ACK">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

//check for ActiveParticipant Source details
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	     
	     if (!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }
     	assert(!node.@AlternativeUserID.isEmpty())
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}

//check for ActiveParticipant Destination details
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	    	assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	    
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
	    assert(!node.@AlternativeUserID.isEmpty())
	    // assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID") 
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}

parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){		
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

//check for Patient ParticipantObjectIdentification
if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
}
 
 //check for Query Parameter ParticipantObjectIdentification
 if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->	     
	    		 
		 if(!node.@ParticipantObjectID.isEmpty()){
			assert node.@ParticipantObjectID == context.findProperty ( "queryId.@extension" )
		}
		 
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )	     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/PatientDiscoveryDeferredResponseAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>LocalHCID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAA</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalHCDescription</con:name>
          <con:value>InternalTest1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteHCID</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAA</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteHCDescription</con:name>
          <con:value>InternalTest2</con:value>
        </con:property>
        <con:property>
          <con:name>RemotePatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>NHINGatewayConfigDir</con:name>
          <con:value>C:/Sun/AppServer/domains/domain1/config/nhin</con:value>
        </con:property>
        <con:property>
          <con:name>MPIDir</con:name>
          <con:value>C:/Sun/AppServer/domains/domain1/config</con:value>
        </con:property>
        <con:property>
          <con:name>LocalConfigDir</con:name>
          <con:value>C:/SelfTest/EndToEndSelfTest</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-DocQuery</con:name>
          <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocQueryUnsecured</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-DocRetrieve</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityDocRetrieve</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Reidentification</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntitySubjectDiscovery</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Subscribe</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityNotificationProducer</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Notify</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityNotificationConsumer</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-Unsubscribe</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntitySubscriptionManager</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-AuditLogQuery</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityAuditQuery</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-PatientDiscoveryAsyncReq</con:name>
          <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityPatientDiscoveryDeferredRequestUnsecured</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-PatientDiscoveryAsyncResp</con:name>
          <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityPatientDiscoveryDeferredResponseUnsecured</con:value>
        </con:property>
        <con:property>
          <con:name>DBHost</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>DBPort</con:name>
          <con:value>3306</con:value>
        </con:property>
        <con:property>
          <con:name>DBUser</con:name>
          <con:value>nhincuser</con:value>
        </con:property>
        <con:property>
          <con:name>DBPass</con:name>
          <con:value>nhincpass</con:value>
        </con:property>
        <con:property>
          <con:name>PatientCorrelationDB</con:name>
          <con:value>patientcorrelationdb</con:value>
        </con:property>
        <con:property>
          <con:name>PatientCorrelationTable</con:name>
          <con:value>correlatedidentifiers</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionDB</con:name>
          <con:value>subscriptionrepository</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionTable</con:name>
          <con:value>subscription</con:value>
        </con:property>
        <con:property>
          <con:name>AAMappingDB</con:name>
          <con:value>assigningauthoritydb</con:value>
        </con:property>
        <con:property>
          <con:name>AAMappingTable</con:name>
          <con:value>aa_to_home_community_mapping</con:value>
        </con:property>
        <con:property>
          <con:name>AsyncMsgDB</con:name>
          <con:value>asyncmsgs</con:value>
        </con:property>
        <con:property>
          <con:name>AsyncMsgTable</con:name>
          <con:value>asyncmsgrepo</con:value>
        </con:property>
        <con:property>
          <con:name>PseudonymAA</con:name>
          <con:value>ABC</con:value>
        </con:property>
        <con:property>
          <con:name>PseudonymPatientID</con:name>
          <con:value>PSEUDO001</con:value>
        </con:property>
        <con:property>
          <con:name>RealAA</con:name>
          <con:value>1.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>RealPatientID</con:name>
          <con:value>D1234010050</con:value>
        </con:property>
        <con:property>
          <con:name>DQDocID</con:name>
          <con:value>1.123401.11111</con:value>
        </con:property>
        <con:property>
          <con:name>DQPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>DynamicDQDocID</con:name>
          <con:value>103.8.9284320.020.3590.75^1266324032288</con:value>
        </con:property>
        <con:property>
          <con:name>DRDocID</con:name>
          <con:value>1.123407.777777</con:value>
        </con:property>
        <con:property>
          <con:name>DRRepoID</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>NotificationEndpoint</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationConsumerService/HiemNotify</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionEndpoint</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationProducerService/HiemSubscription</con:value>
        </con:property>
        <con:property>
          <con:name>SubscribePatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>NotifySubscriptionID</con:name>
          <con:value>-f7c1a5d:1204e50e42e:-79eb</con:value>
        </con:property>
        <con:property>
          <con:name>NotifySubscriptionManagerEndpointAddress</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
        </con:property>
        <con:property>
          <con:name>UnSubscriptionID</con:name>
          <con:value>3e74139f-5271-4db1-98c0-88748fa3e4e3</con:value>
        </con:property>
        <con:property>
          <con:name>SubscriptionManagerEndpointAddress</con:name>
          <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
        </con:property>
        <con:property>
          <con:name>AQUserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>AQPatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>Endpoint-EntityXDRRequest</con:name>
          <con:value>http://localhost:8080/CONNECTAdapter/EntityProxyService/EntityXDRRequest</con:value>
        </con:property>
        <con:property>
          <con:name>Gender</con:name>
          <con:value>M</con:value>
        </con:property>
        <con:property>
          <con:name>BirthTime</con:name>
          <con:value>19630804</con:value>
        </con:property>
        <con:property>
          <con:name>FamilyName</con:name>
          <con:value>Younger</con:value>
        </con:property>
        <con:property>
          <con:name>GivenName</con:name>
          <con:value>Gallow</con:value>
        </con:property>
        <con:property>
          <con:name>SubjectID</con:name>
          <con:value>1111</con:value>
        </con:property>
        <con:property>
          <con:name>UniquePatientId</con:name>
          <con:value>1111^^^&amp;amp;1.1&amp;amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>StreetAddress</con:name>
          <con:value>123 Johnson Rd</con:value>
        </con:property>
        <con:property>
          <con:name>City</con:name>
          <con:value>Melbourne</con:value>
        </con:property>
        <con:property>
          <con:name>State</con:name>
          <con:value>FL</con:value>
        </con:property>
        <con:property>
          <con:name>ZipCode</con:name>
          <con:value>12345</con:value>
        </con:property>
        <con:property>
          <con:name>Country</con:name>
          <con:value>US</con:value>
        </con:property>
        <con:property>
          <con:name>SSN</con:name>
          <con:value>123456789</con:value>
        </con:property>
        <con:property>
          <con:name>PurposeOfDisclosure</con:name>
          <con:value>Mental</con:value>
        </con:property>
        <con:property>
          <con:name>ExpirationDate</con:name>
          <con:value>20100520</con:value>
        </con:property>
        <con:property>
          <con:name>DOB</con:name>
          <con:value>19800516</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-17T05:03:24Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/17/2015 04:53:24</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-16T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-17T04:53:24Z</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110112</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>24</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText</con:name>
          <con:value>LivingSubject.birthTime</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given.@partType</con:name>
          <con:value>GIV</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>D123402^^^&amp;2.2&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family.@partType</con:name>
          <con:value>FAM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>responseModalityCode.@code</con:name>
          <con:value>R</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.value.@value</con:name>
          <con:value>19630804</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectID</con:name>
          <con:value>a797fa28-45fd-4a29-867d-32f3301e73fe</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor.inbound</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--ParticipantObjectIdentification_Query.ParticipantObjectQuery</con:name>
          <con:value>checks --></con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@root</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText</con:name>
          <con:value>LivingSubject.name</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@extension</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>responsePriorityCode.@code</con:name>
          <con:value>I</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/PatientDiscovery/1_0/NhinService/NhinPatientDiscoveryAsyncResp</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family</con:name>
          <con:value>Younger</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given</con:name>
          <con:value>Gallow</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Query</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText</con:name>
          <con:value>LivingSubject.administrativeGender</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>E</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>queryId.@root</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.value.@code</con:name>
          <con:value>M</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_Initiator.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>queryId.@extension</con:name>
          <con:value>-abd3453dcd24wkkks545</con:value>
        </con:property>
        <con:property>
          <con:name>statusCode.@code</con:name>
          <con:value>new</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Responder.@ParticipantObjectID</con:name>
          <con:value>D123402^^^&amp;2.2&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Patient Discovery" searchProperties="true" id="a2f144ec-2c70-4d77-a7ea-81f9a550fee7">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="a3e2a1c5-113e-4b35-ac9b-68d12c1974b8">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="clear correlations table" type="groovy" id="fecaa138-e608-4f78-956b-50aafd6eb321">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
			sql.execute('delete from ' + context.findProperty('PatientCorrelationTable'))
			}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery" type="request" id="3661c0c3-cb7f-4bfe-9989-6d77f18562e8">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
          <con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
          <con:request name="Patient Discovery" id="3aa80ef3-92c3-4da3-8f26-cb9cbd674dfd">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-PatientDiscovery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soap:Header/>
   <soap:Body testSuite="Entity_g0" testCase="Patient Discovery">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#RemoteHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#LocalAA}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="${#Project#LocalHCID}" extension="${#TestCase#queryId.@extension}"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#Gender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#BirthTime}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#FamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#GivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#LocalAA}" extension="${#Project#SubjectID}"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:assertion>
            <urn1:nationalProviderId>1234567890</urn1:nationalProviderId>         
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>${#Project#City}</urn1:city>
               <urn1:country>${#Project#Country}</urn1:country>
               <urn1:state>${#Project#State}</urn1:state>
               <urn1:streetAddress>${#Project#StreetAddress}</urn1:streetAddress>
               <urn1:zipCode>${#Project#ZipCode}</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>${#Project#DOB}</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>${#Project#FamilyName}</urn1:familyName>
               <urn1:givenName>${#Project#GivenName}</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#SSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#UniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#LocalHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#LocalHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
               <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="6952878b-36ae-48f5-aa03-aeb0f80ef4f8"/>
            <con:assertion disabled="true" type="Schema Compliance" id="1cf3cc8b-c524-4b2e-af89-9f66c809603d">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="ea0394fb-f52f-4087-877f-2b6698687a19"/>
            <con:assertion name="Check for existance of [ns3:controlActProcess]" type="XPath Match" id="9d056e33-b55e-46f8-a730-71f18e7a3022">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
				exists( //ns3:PRPA_IN201306UV02/ns3:controlActProcess)</path>
                <content>true</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Given Name XPath Match" type="XPath Match" id="f4985565-a1d9-43f6-8010-bbe086a4ba0f">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
				//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:given[1]</path>
                <content>${#Project#GivenName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Family Name XPath Match" type="XPath Match" id="a1e47daa-d850-4f59-a190-e4fc24f406da">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
				//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:family[1]</path>
                <content>${#Project#FamilyName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="count correlations (1)" type="groovy" id="a775155b-36e7-4814-bfb7-8304a4ac8adb">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
		assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
		}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for Audit table to populate">
        <con:settings/>
        <con:config>
          <delay>1500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="c5eb777c-ace8-40f7-be9f-836ad52b1295">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
	    	assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	     if(!node.@UserName.isEmpty()){
        		assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
	     if(!node.RoleIDCode.isEmpty()){
   	     	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant.RoleIDCode.@code" )
	     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant.RoleIDCode.@codeSystemName" )
	   		assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )
	     }
	}
}
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
   	     if(!node.@AlternativeUserID.isEmpty()){
	     	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}
 }
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     //assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )     
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2)">
        <con:settings/>
        <con:config>
          <script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}

if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	     
	     if(!node.@UserID.isEmpty()){
	     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	    	assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )	    
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
	    assert(!node.@AlternativeUserID.isEmpty())
	    // assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID") 
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){		
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}

if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	    	assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Responder.@ParticipantObjectID" )
   	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )	     
	}
 }
 if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->	     
	     //	assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode" )	     
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole" )
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName" )

	 	if(!node.ParticipantObjectQuery.text().isEmpty()){	 		
	 		byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()			
			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))			
			parsedParticipantObjectQuery.queryId.find{				
				assert it.@root == context.findProperty( "queryId.@root" )
				assert it.@extension == context.findProperty ( "queryId.@extension" )
			}
			assert parsedParticipantObjectQuery.statusCode.@code == context.findProperty( "statusCode.@code" )
			assert parsedParticipantObjectQuery.responseModalityCode.@code == context.findProperty( "responseModalityCode.@code" )
			assert parsedParticipantObjectQuery.responsePriorityCode.@code == context.findProperty( "responsePriorityCode.@code" )
			parsedParticipantObjectQuery.parameterList.livingSubjectAdministrativeGender.find{
				assert it.value.@code == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.value.@code" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectAdministrativeGender.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectBirthTime.find{
				assert it.value.@value == context.findProperty ( "parameterList.livingSubjectBirthTime.value.@value" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectBirthTime.semanticsText" )
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectId.find{
				assert it.value.@root == context.findProperty ( "parameterList.livingSubjectId.value.@root" )
				assert it.value.@extension == context.findProperty ( "parameterList.livingSubjectId.value.@extension" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectId.semanticsText.@representation" )				
			}
			parsedParticipantObjectQuery.parameterList.livingSubjectName.find{
				assert it.value.family.@partType == context.findProperty ( "parameterList.livingSubjectName.value.family.@partType" )
				assert it.value.family.text() == context.findProperty ( "parameterList.livingSubjectName.value.family" )
				assert it.value.given.@partType == context.findProperty ( "parameterList.livingSubjectName.value.given.@partType" )
				assert it.value.given == context.findProperty ( "parameterList.livingSubjectName.value.given" )
				assert it.semanticsText.@representation == context.findProperty ( "parameterList.livingSubjectName.semanticsText.@representation" )
				assert it.semanticsText.text() == context.findProperty ( "parameterList.livingSubjectName.semanticsText" )
			}			
	 	}
	}
  }
}]]></script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/PatientDiscoveryAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-15T16:11:54Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-15T16:21:54Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/15/2015 16:11:54</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-14T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor.inbound</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectQuery</con:name>
          <con:value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxxdWVyeUJ5UGFyYW1ldGVyIHhtbG5zPSJ1cm46aGw3LW9yZzp2MyIgeG1sbnM6bnMyPSJ1cm46aGw3LW9yZzpzZHRjIiB4bWxuczpuczM9InVybjpnb3Y6aGhzOmZoYTpuaGluYzpjb21tb246bmhpbmNjb21tb24iIHhtbG5zOm5zND0idXJuOmdvdjpoaHM6ZmhhOm5oaW5jOmNvbW1vbjpwYXRpZW50Y29ycmVsYXRpb25mYWNhZGUiIHhtbG5zOm5zNT0iaHR0cDovL3d3dy53My5vcmcvMjAwNS8wOC9hZGRyZXNzaW5nIj48cXVlcnlJZCByb290PSIxLjEiIGV4dGVuc2lvbj0iLWFiZDM0NTNkY2QyNHdra2tzNTQ1Ii8+PHN0YXR1c0NvZGUgY29kZT0ibmV3Ii8+PHJlc3BvbnNlTW9kYWxpdHlDb2RlIGNvZGU9IlIiLz48cmVzcG9uc2VQcmlvcml0eUNvZGUgY29kZT0iSSIvPjxwYXJhbWV0ZXJMaXN0PjxsaXZpbmdTdWJqZWN0QWRtaW5pc3RyYXRpdmVHZW5kZXI+PHZhbHVlIGNvZGU9Ik0iLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmFkbWluaXN0cmF0aXZlR2VuZGVyPC9zZW1hbnRpY3NUZXh0PjwvbGl2aW5nU3ViamVjdEFkbWluaXN0cmF0aXZlR2VuZGVyPjxsaXZpbmdTdWJqZWN0QmlydGhUaW1lPjx2YWx1ZSB2YWx1ZT0iMTk2MzA4MDQiLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmJpcnRoVGltZTwvc2VtYW50aWNzVGV4dD48L2xpdmluZ1N1YmplY3RCaXJ0aFRpbWU+PGxpdmluZ1N1YmplY3RJZD48dmFsdWUgcm9vdD0iMS4xIiBleHRlbnNpb249IjExMTEiLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIi8+PC9saXZpbmdTdWJqZWN0SWQ+PGxpdmluZ1N1YmplY3ROYW1lPjx2YWx1ZT48ZmFtaWx5IHBhcnRUeXBlPSJGQU0iPllvdW5nZXI8L2ZhbWlseT48Z2l2ZW4gcGFydFR5cGU9IkdJViI+R2FsbG93PC9naXZlbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC92YWx1ZT48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0Lm5hbWU8L3NlbWFudGljc1RleHQ+PC9saXZpbmdTdWJqZWN0TmFtZT48L3BhcmFtZXRlckxpc3Q+PC9xdWVyeUJ5UGFyYW1ldGVyPg==</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectName</con:name>
          <con:value>anonymus</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/PatientDiscovery/1_0/NhinService/NhinPatientDiscovery</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>ITI-55</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectID</con:name>
          <con:value>a797fa28-45fd-4a29-867d-32f3301e73fe</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>E</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Query</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Patient Discovery</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110112</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>24</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>1111^^^&amp;1.1&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail.@value</con:name>
          <con:value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxuczM6Q09SRUVudmVsb3BlUmVhbFRpbWVSZXF1ZXN0IHhtbG5zOm5zMj0iaHR0cDovL3d3dy5jYXFoLm9yZy9TT0FQL1dTREwvQ09SRVJ1bGUyLjIuMC54c2QiIHhtbG5zOm5zMz0idXJuOm9yZzpjYXFoOnNvYXA6d3NkbDpjb3JlcnVsZTJfMl8wIj48UGF5bG9hZFR5cGU+WDEyXzI3MF9SZXF1ZXN0XzAwNTAxMFgyNzlBMTwvUGF5bG9hZFR5cGU+PFByb2Nlc3NpbmdNb2RlPlJlYWxUaW1lPC9Qcm9jZXNzaW5nTW9kZT48UGF5bG9hZElEPmY4MWQ0ZmFlLTdkZWMtMTFkMC1hNzY1LTAwYTBjOTFlNmJmNjwvUGF5bG9hZElEPjxUaW1lU3RhbXA+MjAwNy0wOC0zMFQxMDoyMDozNFo8L1RpbWVTdGFtcD48U2VuZGVySUQ+SG9zcGl0YWxBPC9TZW5kZXJJRD48UmVjZWl2ZXJJRD5QYXllckI8L1JlY2VpdmVySUQ+PENPUkVSdWxlVmVyc2lvbj4yLjIuMDwvQ09SRVJ1bGVWZXJzaW9uPjxQYXlsb2FkPjwvUGF5bG9hZD48L25zMzpDT1JFRW52ZWxvcGVSZWFsVGltZVJlcXVlc3Q+</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectQuery</con:name>
          <con:value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxxdWVyeUJ5UGFyYW1ldGVyIHhtbG5zPSJ1cm46aGw3LW9yZzp2MyIgeG1sbnM6bnMyPSJ1cm46aGw3LW9yZzpzZHRjIiB4bWxuczpuczM9InVybjpnb3Y6aGhzOmZoYTpuaGluYzpjb21tb246bmhpbmNjb21tb24iIHhtbG5zOm5zND0idXJuOmdvdjpoaHM6ZmhhOm5oaW5jOmNvbW1vbjpwYXRpZW50Y29ycmVsYXRpb25mYWNhZGUiIHhtbG5zOm5zNT0iaHR0cDovL3d3dy53My5vcmcvMjAwNS8wOC9hZGRyZXNzaW5nIj48cXVlcnlJZCByb290PSIxLjEiIGV4dGVuc2lvbj0iLWFiZDM0NTNkY2QyNHdra2tzNTQ1Ii8+PHN0YXR1c0NvZGUgY29kZT0ibmV3Ii8+PHJlc3BvbnNlTW9kYWxpdHlDb2RlIGNvZGU9IlIiLz48cmVzcG9uc2VQcmlvcml0eUNvZGUgY29kZT0iSSIvPjxwYXJhbWV0ZXJMaXN0PjxsaXZpbmdTdWJqZWN0QWRtaW5pc3RyYXRpdmVHZW5kZXI+PHZhbHVlIGNvZGU9Ik0iLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmFkbWluaXN0cmF0aXZlR2VuZGVyPC9zZW1hbnRpY3NUZXh0PjwvbGl2aW5nU3ViamVjdEFkbWluaXN0cmF0aXZlR2VuZGVyPjxsaXZpbmdTdWJqZWN0QmlydGhUaW1lPjx2YWx1ZSB2YWx1ZT0iMTk2MzA4MDQiLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0LmJpcnRoVGltZTwvc2VtYW50aWNzVGV4dD48L2xpdmluZ1N1YmplY3RCaXJ0aFRpbWU+PGxpdmluZ1N1YmplY3RJZD48dmFsdWUgcm9vdD0iMS4xIiBleHRlbnNpb249IjExMTEiLz48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIi8+PC9saXZpbmdTdWJqZWN0SWQ+PGxpdmluZ1N1YmplY3ROYW1lPjx2YWx1ZT48ZmFtaWx5IHBhcnRUeXBlPSJGQU0iPllvdW5nZXI8L2ZhbWlseT48Z2l2ZW4gcGFydFR5cGU9IkdJViI+R2FsbG93PC9naXZlbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC92YWx1ZT48c2VtYW50aWNzVGV4dCByZXByZXNlbnRhdGlvbj0iVFhUIj5MaXZpbmdTdWJqZWN0Lm5hbWU8L3NlbWFudGljc1RleHQ+PC9saXZpbmdTdWJqZWN0TmFtZT48L3BhcmFtZXRlckxpc3Q+PC9xdWVyeUJ5UGFyYW1ldGVyPg==</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectDetail.@value</con:name>
          <con:value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxuczM6Q09SRUVudmVsb3BlUmVhbFRpbWVSZXF1ZXN0IHhtbG5zOm5zMj0iaHR0cDovL3d3dy5jYXFoLm9yZy9TT0FQL1dTREwvQ09SRVJ1bGUyLjIuMC54c2QiIHhtbG5zOm5zMz0idXJuOm9yZzpjYXFoOnNvYXA6d3NkbDpjb3JlcnVsZTJfMl8wIj48UGF5bG9hZFR5cGU+WDEyXzI3MF9SZXF1ZXN0XzAwNTAxMFgyNzlBMTwvUGF5bG9hZFR5cGU+PFByb2Nlc3NpbmdNb2RlPlJlYWxUaW1lPC9Qcm9jZXNzaW5nTW9kZT48UGF5bG9hZElEPmY4MWQ0ZmFlLTdkZWMtMTFkMC1hNzY1LTAwYTBjOTFlNmJmNjwvUGF5bG9hZElEPjxUaW1lU3RhbXA+MjAwNy0wOC0zMFQxMDoyMDozNFo8L1RpbWVTdGFtcD48U2VuZGVySUQ+SG9zcGl0YWxBPC9TZW5kZXJJRD48UmVjZWl2ZXJJRD5QYXllckI8L1JlY2VpdmVySUQ+PENPUkVSdWxlVmVyc2lvbj4yLjIuMDwvQ09SRVJ1bGVWZXJzaW9uPjxQYXlsb2FkPjwvUGF5bG9hZD48L25zMzpDT1JFRW52ZWxvcGVSZWFsVGltZVJlcXVlc3Q+</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectName.@value</con:name>
          <con:value>anonymus</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectName.@value</con:name>
          <con:value>anonymus</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectQuery.@value</con:name>
          <con:value>test</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectQuery.@value</con:name>
          <con:value>test</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail</con:name>
          <con:value>test</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Query.ParticipantObjectDetail</con:name>
          <con:value>test</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_Initiator.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Responder.@ParticipantObjectID</con:name>
          <con:value>D123401^^^&amp;1.1&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText</con:name>
          <con:value>LivingSubject.birthTime</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given.@partType</con:name>
          <con:value>GIV</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family.@partType</con:name>
          <con:value>FAM</con:value>
        </con:property>
        <con:property>
          <con:name>responseModalityCode.@code</con:name>
          <con:value>R</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.value.@value</con:name>
          <con:value>19630804</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--ParticipantObjectIdentification_Query.ParticipantObjectQuery</con:name>
          <con:value>checks --></con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@root</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText</con:name>
          <con:value>LivingSubject.name</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.value.@extension</con:name>
          <con:value>1111</con:value>
        </con:property>
        <con:property>
          <con:name>responsePriorityCode.@code</con:name>
          <con:value>I</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.family</con:name>
          <con:value>Younger</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectName.value.given</con:name>
          <con:value>Gallow</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectId.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.semanticsText</con:name>
          <con:value>LivingSubject.administrativeGender</con:value>
        </con:property>
        <con:property>
          <con:name>queryId.@root</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectBirthTime.semanticsText.@representation</con:name>
          <con:value>TXT</con:value>
        </con:property>
        <con:property>
          <con:name>parameterList.livingSubjectAdministrativeGender.value.@code</con:name>
          <con:value>M</con:value>
        </con:property>
        <con:property>
          <con:name>queryId.@extension</con:name>
          <con:value>-abd3453dcd24wkkks545</con:value>
        </con:property>
        <con:property>
          <con:name>statusCode.@code</con:name>
          <con:value>new</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Query" searchProperties="true" id="9ef7d334-39f5-4693-a2ce-bc5609f8a972">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="4ef2fd74-65fd-4311-8b81-2f18dde6f174">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="update config" type="groovy" id="b5d8f64c-b7a3-4266-b2a3-67a407f1ce13">
        <con:settings/>
        <con:config>
          <script>nhinc.FileUtils.updateProperty(context.findProperty('GatewayPropDir'), "gateway.properties", "documentQueryQuerySelf", "false", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table &amp; Add Correlation" type="groovy" id="6b961654-413d-490c-8206-6e045dab9a3b">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
		def table = context.findProperty('PatientCorrelationTable')

		sql.execute('delete from ' + table)

		def localAA = context.findProperty( "LocalAA" )
		def localPatientID = context.findProperty("LocalPatientID")
		def remoteAA = context.findProperty( "RemoteAA" )
		def remotePatientID = context.findProperty("RemotePatientID")
		def insertSql = "insert into " + table + " (correlationId, PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
		"values (1, ?, ?, ?, ?)"
		sql.executeUpdate(insertSql, [localAA, localPatientID, remoteAA, remotePatientID])
		}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy" id="b87ff79b-714d-40c9-b78a-f5027a5a3c63">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -> 
		def table = context.findProperty('AAMappingTable')

		sql.execute('delete from ' + table)

		def remoteAA = context.findProperty( "RemoteAA" )
		def remoteHCID = context.findProperty("RemoteHCID")
		def insertSql = "insert into " + table + " (id, assigningauthorityid, homecommunityid) " + 
		"values (1, ?, ?)"
		sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
		}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request" id="fbb81c35-cba9-4c73-b8cd-354abb25965b">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query" id="4f05b7b6-a9c2-4b12-8f01-1b09e249f668">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g0" testCase="Document Query">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="LeafClass" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>'${#Project#DQPatientID}^^^&amp;${#Project#LocalAA}&amp;ISO'</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryStatus">
                  <urn2:ValueList>
                     <urn2:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
         <urn2:Slot name="$XDSDocumentEntryClassCode">
            <urn2:ValueList>
                    <urn2:Value>34133-9</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryClassCodeScheme">
                  <urn2:ValueList>
                     <urn2:Value>2.16.840.1.113883.6.1</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerberg</urn3:userName>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>158.147.185.168</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>cs.myharris.net</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
         <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#RemoteHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#RemoteHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#RemoteHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="f094a9a0-0b37-4547-b653-3fc549802034"/>
            <con:assertion type="Schema Compliance" id="69cac337-b115-49b5-bd3d-c635af7c0117">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="0c14ff2e-c2de-42fc-8ced-fc2b7015cccf"/>
            <con:assertion name="DocID Match" type="GroovyScriptAssertion" id="69b79389-d51b-4067-bef3-e4b03f7f712c">
              <con:configuration>
                <scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
				def holder = groovyUtils.getXmlHolder( messageExchange.responseContent );
				holder.namespaces["ns1"] = "urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0";
				holder.namespaces["ns3"] = "urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0";

				def documentID = context.findProperty('DQDocID')
				def msgDocID = holder["//ns1:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject[1]/ns3:ExternalIdentifier[@identificationScheme='urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab']/@value"];
				assert (documentID == msgDocID)</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for Audit table to populate">
        <con:settings/>
        <con:config>
          <delay>2500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="d0a30f1e-d90a-48b8-8eb6-1ebfb6ad8004">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
	
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
	    	assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	    	if(!node.@UserName.isEmpty()){	    
        		assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	    	}
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
	     if(!node.RoleIDCode.isEmpty()){
   	     	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant.RoleIDCode.@code" )
	     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant.RoleIDCode.@codeSystemName" )
	   		assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )
	     }
	}
  }
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->	     
     	assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	//Keeping this assertion in because we should implement it in the future
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	 }
}
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	    log.info " user id for destination ###########"+ node.@UserID
	     //assert node.@UserID == context.findProperty( "ActiveParticipant_Dest_g0.@UserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
   	     if(!node.@AlternativeUserID.isEmpty()){
	     	assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->	    
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )   
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )
   	    	
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}	
}
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     //assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectID" )    	
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" ) 
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole" )	     
          assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName" )

	 	byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()   
   		def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))
   		assert parsedParticipantObjectQuery.AdhocQuery.Slot.ValueList.Value.text().contains(context.findProperty( "parsedParticipantObjectQuery.AdhocQuery.Slot.ValueList.Value.PatientID" ))
   		  		
		parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].each{			
			def decodedData1 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@value.text().decodeBase64())
  			assert decodedData1 == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value" )
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type" )
	 		def decodedData2 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@value.text().decodeBase64())
	 			 		def remoteHCID = testRunner.testCase.testSuite.project.getPropertyValue("RemoteHCID")
	 		def remoteHCIDWithPrefix 
	 		if(remoteHCID.startsWith("urn:oid:")){
	 			remoteHCIDWithPrefix= remoteHCID
	 		}
	 		else{
	 			remoteHCIDWithPrefix = "urn:oid:"+remoteHCID
	 		}
  			assert decodedData2 == remoteHCIDWithPrefix
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type" )	 		
	 	} 
  	}
  }
}]]></script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2)">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->	
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )	     
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	if(!node.@UserName.isEmpty())
     	//assert node.@UserName == context.findProperty( "ActiveParticipant_Source.@UserName" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest_g0.@UserID" )
	     //assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )	     
   	     if(!node.@UserName.isEmpty()){
	     	assert node.@UserName == context.findProperty( "ActiveParticipant_Dest.@UserNamee" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Dest.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )      
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )	     
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )
	}	
 }
 if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     //assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectID" )	     	
		assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" ) 
     	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole" )
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName" )

		if(!node.ParticipantObjectQuery.text().isEmpty()){    
    			byte[] participantobjectQueryDecoded = node.ParticipantObjectQuery.text().decodeBase64()   
   			def parsedParticipantObjectQuery = new XmlSlurper().parseText(new String(participantobjectQueryDecoded))  
   			assert parsedParticipantObjectQuery.AdhocQuery.Slot.ValueList.Value.text().contains(context.findProperty( "parsedParticipantObjectQuery.AdhocQuery.Slot.ValueList.Value.PatientID" ))
   		}   		
		parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].each{			
			def decodedData1 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@value.text().decodeBase64())
  			assert decodedData1 == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value" )
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type" )
	 		def decodedData2 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@value.text().decodeBase64())
			def localHCID = testRunner.testCase.testSuite.project.getPropertyValue("LocalHCID")
	 		def localHCIDWithPrefix 
	 		if(localHCID.startsWith("urn:oid:")){
	 			localHCIDWithPrefix= localHCID
	 		}
	 		else{
	 			localHCIDWithPrefix = "urn:oid:"+localHCID
	 		}
  			assert decodedData2 == localHCIDWithPrefix
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type" )
	 		
	 	} 
  	}
  }
}]]></script></con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/QueryDocumentAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-27T16:15:46Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-27T16:25:46Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/27/2015 16:15:46</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-26T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>FullPatientID</con:name>
          <con:value>'D123401^^^&amp;amp;1.1&amp;amp;ISO'</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>24</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type</con:name>
          <con:value>QueryEncoding</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectName</con:name>
          <con:value>anonymus</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/DocumentQuery/3_0/NhinService/RespondingGateway_Query_Service/DocQuery</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-38</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_Initiator.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>ITI-38</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--Patient--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Query</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--Document</con:name>
          <con:value>--></con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value</con:name>
          <con:value>UTF-8</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>E</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Query</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Query</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110112</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@value</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>D123401^^^&amp;2.2&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type</con:name>
          <con:value>urn:ihe:iti:xca:2010:homeCommunityId</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.EventID.@displayName</con:name>
          <con:value>Export</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectQuery</con:name>
          <con:value>unknown</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectQuery</con:name>
          <con:value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxBZGhvY1F1ZXJ5UmVxdWVzdCB4bWx....</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>urn:oid:1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--RESPONDER--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ResponderActiveParticipant_Dest.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/DocumentQuery/2_0/NhinService/RespondingGateway_Query_Service/DocQuery</con:value>
        </con:property>
        <con:property>
          <con:name>parsedParticipantObjectQuery.AdhocQuery.Slot.ValueList.Value.PatientID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_g0.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/DocumentQuery/2_0/NhinService/RespondingGateway_Query_Service/DocQuery</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Document Retrieve" searchProperties="true" id="057be88f-5e6a-47ef-96d8-6ffdef5db6a6">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="1f442a2e-40ee-48cb-ad8b-643fc6ee9edc">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Retrieve" type="request" id="c97198c8-448c-4153-9c9c-e57740dc5fb8">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityDocRetrieveBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayRetrieve</con:operation>
          <con:request incomingWss="" name="Document Retrieve" outgoingWss="" wssPasswordType="" id="7b44ca2b-3c44-4fe2-b9ef-3ae0206930d6">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@expand-mtom-attachments">true</con:setting>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-DocRetrieve}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:ihe:iti:xds-b:2007" xmlns:urn2="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g0" testCase="Document Retrieve">
      <urn:RespondingGateway_CrossGatewayRetrieveRequest>
         <urn1:RetrieveDocumentSetRequest>
            <urn1:DocumentRequest>
               <urn1:HomeCommunityId>${#Project#RemoteHCID}</urn1:HomeCommunityId>
               <urn1:RepositoryUniqueId>${#Project#DRRepoID}</urn1:RepositoryUniqueId>
               <urn1:DocumentUniqueId>${#Project#DRDocID}</urn1:DocumentUniqueId>
            </urn1:DocumentRequest>
         </urn1:RetrieveDocumentSetRequest>
         <urn:assertion>
            <urn2:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:addressType>
                  <urn2:code>AddrCode</urn2:code>
                  <urn2:codeSystem>AddrCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>AddrCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>AddrCode</urn2:displayName>
                  <urn2:originalText>AddrCode</urn2:originalText>
               </urn2:addressType>
               <urn2:city>AddrCity</urn2:city>
               <urn2:country>AddrCountry</urn2:country>
               <urn2:state>AddrState</urn2:state>
               <urn2:streetAddress>AddrStreet</urn2:streetAddress>
               <urn2:zipCode>AddrZip</urn2:zipCode>
            </urn2:address>
            <urn2:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn2:dateOfBirth>
            <urn2:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn2:explanationNonClaimantSignature>
            <urn2:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn2:haveSecondWitnessSignature>
            <urn2:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn2:haveSignature>
            <urn2:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn2:haveWitnessSignature>
            <urn2:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:description>${#Project#LocalHCDescription}</urn2:description>
               <urn2:homeCommunityId>${#Project#LocalHCID}</urn2:homeCommunityId>
               <urn2:name>${#Project#LocalHCDescription}</urn2:name>
            </urn2:homeCommunity>
            <urn2:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:familyName>Smith</urn2:familyName>
               <urn2:givenName>Sandy</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>nameCode</urn2:code>
                  <urn2:codeSystem>nameCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>nameCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>nameCode</urn2:displayName>
                  <urn2:originalText>nameCode</urn2:originalText>
               </urn2:nameType>
               <urn2:secondNameOrInitials>S</urn2:secondNameOrInitials>
               <urn2:fullName>Sandy S. Smith</urn2:fullName>
            </urn2:personName>
            <urn2:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:areaCode>321</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>5436</urn2:extension>
               <urn2:localNumber>253-6849</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>phoneCode</urn2:code>
                  <urn2:codeSystem>phoneCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>phoneCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>phoneCode</urn2:displayName>
                  <urn2:originalText>phoneCode</urn2:originalText>
               </urn2:phoneNumberType>
            </urn2:phoneNumber>
            <urn2:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:addressType>
                  <urn2:code>AddrCode</urn2:code>
                  <urn2:codeSystem>AddrCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>AddrCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>AddrCode</urn2:displayName>
                  <urn2:originalText>AddrCode</urn2:originalText>
               </urn2:addressType>
               <urn2:city>Addr2City</urn2:city>
               <urn2:country>Addr2Country</urn2:country>
               <urn2:state>Addr2State</urn2:state>
               <urn2:streetAddress>Addr2Street</urn2:streetAddress>
               <urn2:zipCode>Addr2Zip</urn2:zipCode>
            </urn2:secondWitnessAddress>
            <urn2:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:familyName>Smith</urn2:familyName>
               <urn2:givenName>Sammy</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>nameCode</urn2:code>
                  <urn2:codeSystem>nameCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>nameCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>nameCode</urn2:displayName>
                  <urn2:originalText>nameCode</urn2:originalText>
               </urn2:nameType>
               <urn2:secondNameOrInitials>s</urn2:secondNameOrInitials>
               <urn2:fullName>Sammy S. Smith</urn2:fullName>
            </urn2:secondWitnessName>
            <urn2:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:areaCode>321</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>5424</urn2:extension>
               <urn2:localNumber>542-6823</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>phoneCode</urn2:code>
                  <urn2:codeSystem>phoneCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>phoneCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>phoneCode</urn2:displayName>
                  <urn2:originalText>phoneCode</urn2:originalText>
               </urn2:phoneNumberType>
            </urn2:secondWitnessPhone>
            <urn2:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn2:SSN>
            <urn2:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn2:uniquePatientId>
            <urn2:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:addressType>
                  <urn2:code>addrCode</urn2:code>
                  <urn2:codeSystem>addrCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>addrCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>addrCode</urn2:displayName>
                  <urn2:originalText>addrCode</urn2:originalText>
               </urn2:addressType>
               <urn2:city>Burnell</urn2:city>
               <urn2:country>USA</urn2:country>
               <urn2:state>FL</urn2:state>
               <urn2:streetAddress>825 North</urn2:streetAddress>
               <urn2:zipCode>32184</urn2:zipCode>
            </urn2:witnessAddress>
            <urn2:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:familyName>Smith</urn2:familyName>
               <urn2:givenName>Scott</urn2:givenName>
               <urn2:nameType>
                  <urn2:code>nameCode</urn2:code>
                  <urn2:codeSystem>nameCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>nameCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>nameCode</urn2:displayName>
                  <urn2:originalText>nameCode</urn2:originalText>
               </urn2:nameType>
               <urn2:secondNameOrInitials>S.</urn2:secondNameOrInitials>
               <urn2:fullName>Scott S. Smith</urn2:fullName>
            </urn2:witnessName>
            <urn2:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:areaCode>321</urn2:areaCode>
               <urn2:countryCode>1</urn2:countryCode>
               <urn2:extension>8432</urn2:extension>
               <urn2:localNumber>985-2239</urn2:localNumber>
               <urn2:phoneNumberType>
                  <urn2:code>phoneCode</urn2:code>
                  <urn2:codeSystem>phoneCodeSyst</urn2:codeSystem>
                  <urn2:codeSystemName>phoneCodeSystName</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>phoneCode</urn2:displayName>
                  <urn2:originalText>phoneCode</urn2:originalText>
               </urn2:phoneNumberType>
            </urn2:witnessPhone>
            <urn2:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:personName>
                  <urn2:familyName>Skagerberg</urn2:familyName>
                  <urn2:givenName>Karl</urn2:givenName>
                  <urn2:nameType>
                     <urn2:code>nameCode</urn2:code>
                     <urn2:codeSystem>nameCodeSyst</urn2:codeSystem>
                     <urn2:codeSystemName>nameCodeSystName</urn2:codeSystemName>
                     <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                     <urn2:displayName>nameCode</urn2:displayName>
                     <urn2:originalText>nameCode</urn2:originalText>
                  </urn2:nameType>
                  <urn2:secondNameOrInitials>S</urn2:secondNameOrInitials>
                  <urn2:fullName>Kasrl S. Skagerberg</urn2:fullName>
               </urn2:personName>
               <urn2:userName>kskagerb</urn2:userName>
               <urn2:org>
                  <urn2:description>${#Project#LocalHCDescription}</urn2:description>
                  <urn2:homeCommunityId>${#Project#LocalHCID}</urn2:homeCommunityId>
                  <urn2:name>${#Project#LocalHCDescription}</urn2:name>
               </urn2:org>
               <urn2:roleCoded>
                  <urn2:code>307969004</urn2:code>
                  <urn2:codeSystem>2.16.840.1.113883.6.96</urn2:codeSystem>
                  <urn2:codeSystemName>SNOMED_CT</urn2:codeSystemName>
                  <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
                  <urn2:displayName>Public Health</urn2:displayName>
                  <urn2:originalText>Public Health</urn2:originalText>
               </urn2:roleCoded>
            </urn2:userInfo>
            <urn2:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn2:authorized>
            <urn2:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:code>PUBLICHEALTH</urn2:code>
               <urn2:codeSystem>2.16.840.1.113883.3.18.7.1</urn2:codeSystem>
               <urn2:codeSystemName>nhin-purpose</urn2:codeSystemName>
               <urn2:codeSystemVersion>1.0</urn2:codeSystemVersion>
               <urn2:displayName>Use or disclosure of Psychotherapy Notes</urn2:displayName>
               <urn2:originalText>Use or disclosure of Psychotherapy Notes</urn2:originalText>
            </urn2:purposeOfDisclosureCoded>
            <urn2:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:authInstant>2009-04-16T13:15:39Z</urn2:authInstant>
               <urn2:sessionIndex>987</urn2:sessionIndex>
               <urn2:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn2:authContextClassRef>
               <urn2:subjectLocalityAddress>158.147.185.168</urn2:subjectLocalityAddress>
               <urn2:subjectLocalityDNSName>cs.myharris.net</urn2:subjectLocalityDNSName>
            </urn2:samlAuthnStatement>
            <urn2:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn2:decision>Permit</urn2:decision>
               <urn2:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn2:resource>
               <urn2:action>TestSaml</urn2:action>
               <urn2:evidence>
                  <urn2:assertion>
                     <urn2:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn2:id>
                     <urn2:issueInstant>2009-04-16T13:10:39.093Z</urn2:issueInstant>
                     <urn2:version>2.0</urn2:version>
                     <urn2:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn2:issuerFormat>
                     <urn2:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn2:issuer>
                     <urn2:conditions>
                        <urn2:notBefore>2009-04-16T13:10:39.093Z</urn2:notBefore>
                        <urn2:notOnOrAfter>2009-12-31T12:00:00.000Z</urn2:notOnOrAfter>
                     </urn2:conditions>
                     <urn2:accessConsentPolicy>urn:oid:1.2.3.4</urn2:accessConsentPolicy>
                     <urn2:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn2:instanceAccessConsentPolicy>
                  </urn2:assertion>
               </urn2:evidence>
            </urn2:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn2:nhinTargetCommunity>
               <urn2:homeCommunity>
                  <urn2:description>${#Project#RemoteHCDescription}</urn2:description>
                  <urn2:homeCommunityId>${#Project#RemoteHCID}</urn2:homeCommunityId>
                  <urn2:name>${#Project#RemoteHCDescription}</urn2:name>
               </urn2:homeCommunity>
            </urn2:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayRetrieveRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="594b9218-52c9-456e-95da-a9975f5cd3d0"/>
            <con:assertion type="SOAP Fault Assertion" id="1f995372-ec3b-430a-96d8-4d00880dfdfc"/>
            <con:assertion type="Schema Compliance" disabled="true" id="23844467-6948-4a9c-a588-dfefc4e989d4">
              <con:configuration>
                <definition/>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Doc Repository ID" type="XPath Match" id="53019ece-40b9-43d6-9fcd-3edba1c013df">
              <con:configuration>
                <path>declare namespace ns5='urn:ihe:iti:xds-b:2007';
					//ns5:RetrieveDocumentSetResponse[1]/ns5:DocumentResponse[1]/ns5:RepositoryUniqueId[1]</path>
                <content>${#Project#DRRepoID}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Doc ID" type="XPath Match" id="128f4d3a-b660-4afc-b75a-fbdc0e1c413e">
              <con:configuration>
                <path>declare namespace ns5='urn:ihe:iti:xds-b:2007';
					//ns5:RetrieveDocumentSetResponse[1]/ns5:DocumentResponse[1]/ns5:DocumentUniqueId[1]</path>
                <content>${#Project#DRDocID}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Document Data" type="GroovyScriptAssertion" id="f1c42ac1-8505-43ad-bd09-011ede3352dd">
              <con:configuration>
                <scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
					def holder = groovyUtils.getXmlHolder( messageExchange.responseContent )
					holder.namespaces["ns"]="urn:ihe:iti:xds-b:2007"
					def docData = holder["//ns:RetrieveDocumentSetResponse[1]/ns:DocumentResponse[1]/ns:Document[1]"]
					log.info docData.toString()
					assert (docData.size() != 0)</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig action="urn:gov:hhs:fha:nhinc:entitydocretrieve/EntityDocRetrievePortType/RespondingGateway_CrossGatewayRetrieveRequest" mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay">
        <con:settings/>
        <con:config>
          <delay>2000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="1dbff829-fbb6-4825-ae7b-f224906e0299">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="1.1"')[0]
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-InitiatingGateway(1.1)">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_22_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="2.2"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_22_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node -> 
	    	assert node.@UserID == context.findProperty( "ActiveParticipant.@UserID" )
	     if(!node.@UserName.isEmpty()){
        		assert node.@UserName == context.findProperty( "ActiveParticipant.@UserName" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant.@UserIsRequestor" )
	     if(!node.RoleIDCode.isEmpty()){
   	     	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant.RoleIDCode.@code" )
	     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant.RoleIDCode.@codeSystemName" )
	   		assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant.RoleIDCode.@displayName" )
	     }
	}
  }
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->	    
	     //assert node.@UserID == context.findProperty( "ActiveParticipant_Source_g0.@UserID" )	     
     	if(!node.@AlternativeUserID.isEmpty()){
     		//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	}
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[2].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[2].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )
   	     if(!node.@AlternativeUserID.isEmpty()){
   	     	//commented out as this element value is dynamic at runtime. Ref spec for more detail. 
	     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Dest.@AlternativeUserID" )
	     }
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Destination.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
         	assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if(!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     if(!node.@ParticipantObjectID.isEmpty()){
	     	//commented out until code updated to return correct value as per spec	     	
	     	assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectID" )
	     }
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCode" )
   	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole" )
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code" )
    		assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName" )
    		assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName" )	     
     }	
 }
if (!parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[1].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[1].each{ node ->
	     assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectID" )
   	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )
	     assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole" )
         	assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName" )
	          	 	
	 	if(!node.ParticipantObjectQuery.text().isEmpty()){
	 		assert node.ParticipantObjectQuery.text() == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectQuery" )	
	 	}
		parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].each{			
			def decodedData1 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@value.text().decodeBase64())
  			assert decodedData1 == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value" )
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type" )
	 		def decodedData2 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@value.text().decodeBase64())
  			def remoteHCID = testRunner.testCase.testSuite.project.getPropertyValue("RemoteHCID")
	 		def remoteHCIDWithPrefix 
	 		if(remoteHCID.startsWith("urn:oid:")){
	 			remoteHCIDWithPrefix= remoteHCID
	 		}
	 		else{
	 			remoteHCIDWithPrefix = "urn:oid:"+remoteHCID
	 		}
  			assert decodedData2 == remoteHCIDWithPrefix
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type" )	 		
	 	}	    
      } 
  }
}]]></script></con:config>
      </con:testStep>
      <con:testStep type="groovy" name="VerifyMessage-NhinOutbound-RespondingGateway(2.2)">
        <con:settings/>
        <con:config><script><![CDATA[context.withSql('AuditRepoDB') {sql ->
def nhinAuditMessage_11_Outbound = sql.firstRow('SELECT CONVERT(message USING utf8) FROM ' + context.findProperty('AuditRepoTable') + ' where messageType="Nhin Outbound" and communityId="1.1"')[0]
def parsedXmlMessage = new XmlSlurper().parseText(nhinAuditMessage_11_Outbound)

parsedXmlMessage.EventIdentification.find{
	assert it.@EventActionCode == context.findProperty( "EventIdentification_Responder.@EventActionCode" )
	//assert it.@EventDateTime == context.findProperty( "EventIdentification.@EventDateTime" )
     assert it.@EventOutcomeIndicator == context.findProperty( "EventIdentification.@EventOutcomeIndicator" )
	assert it.EventID.@code == context.findProperty( "EventIdentification_Responder.EventID.@code" )
	assert it.EventID.@codeSystemName == context.findProperty( "EventIdentification.EventID.@codeSystemName" )
	assert it.EventID.@displayName == context.findProperty( "EventIdentification_Responder.EventID.@displayName" )
	assert it.EventTypeCode.@code == context.findProperty( "EventIdentification.EventTypeCode.@code" )
	assert it.EventTypeCode.@codeSystemName == context.findProperty( "EventIdentification.EventTypeCode.@codeSystemName" )
	assert it.EventTypeCode.@displayName == context.findProperty( "EventIdentification.EventTypeCode.@displayName" )	
}
if (!parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[0].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[0].each{ node ->
	     
	     if(!node.@UserID.isEmpty()){
	     	//Commented out until code fixed to populate UserID as per spec   	
	     	//assert node.@UserID == context.findProperty( "ActiveParticipant_Source.@UserID" )
	     }
     	assert(!node.@AlternativeUserID.isEmpty())
     	//assert node.@AlternativeUserID == context.findProperty( "ActiveParticipant_Source.@AlternativeUserID" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Source.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Source.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Source.RoleIDCode.@displayName" )	     
	}
}
if (!parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName.isEmpty() && parsedXmlMessage.ActiveParticipant[1].RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )){
	parsedXmlMessage.ActiveParticipant[1].each{ node ->
	     assert node.@UserID == context.findProperty( "ActiveParticipant_Dest.@UserID" )
     	assert node.@UserIsRequestor == context.findProperty( "ActiveParticipant_Dest.@UserIsRequestor" )
     	assert(!node.@NetworkAccessPointTypeCode.isEmpty())
   	 	def NetworkAccessPointTypeCode = node.@NetworkAccessPointTypeCode
   	 	assert NetworkAccessPointTypeCode == 1 || NetworkAccessPointTypeCode == 2
     	assert(!node.@NetworkAccessPointID.isEmpty())
     	def NetworkAccessPointID = node.@NetworkAccessPointID
     	if (NetworkAccessPointTypeCode == 1) {

     		assert node.@NetworkAccessPointID == context.findProperty( "ActiveParticipant_Destination.@NetworkAccessPointID" )
     		
     	} else {

     		def x = ~/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
     		def matcher = (NetworkAccessPointID =~ x)  
			assert matcher.matches()
     		
     	}
          assert node.RoleIDCode.@code == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@code" )
     	assert node.RoleIDCode.@codeSystemName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@codeSystemName" )
     	assert node.RoleIDCode.@displayName == context.findProperty( "ActiveParticipant_Dest.RoleIDCode.@displayName" )	     
	}
}
parsedXmlMessage.AuditSourceIdentification.find{
		if(!it.@AuditEnterpriseSiteID.isEmpty()){
			assert it.@AuditEnterpriseSiteID == context.findProperty( "AuditSourceIdentification.@AuditEnterpriseSiteID" )
		}
		if(!it.@AuditSourceTypeCode.isEmpty()){			
			assert it.@AuditSourceTypeCode == context.findProperty( "AuditSourceIdentification.@AuditSourceTypeCode" )
		}
		if(!it.@AuditSourceID.isEmpty()){
			assert it.@AuditSourceID == context.findProperty( "AuditSourceIdentification.@AuditSourceID" )	
		}
}
if (!parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode.isEmpty() && parsedXmlMessage.ParticipantObjectIdentification[0].@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )){
	parsedXmlMessage.ParticipantObjectIdentification[0].each{ node ->
	     if(!node.@ParticipantObjectID.isEmpty()){	     
	     //	assert node.@ParticipantObjectID == context.findProperty( "ParticipantObjectIdentification_Query.@ParticipantObjectID" )	     	
	     }
	     assert node.@ParticipantObjectTypeCode == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode" )
   	    	assert node.@ParticipantObjectTypeCodeRole == context.findProperty( "ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole" )
    		assert node.ParticipantObjectIDTypeCode.@code == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code" )
     	assert node.ParticipantObjectIDTypeCode.@codeSystemName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName" )
     	assert node.ParticipantObjectIDTypeCode.@displayName == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName" )
	          	 	
	 	if(!node.ParticipantObjectQuery.text().isEmpty()){
	 		assert node.ParticipantObjectQuery.text() == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectQuery" )	
	 	}	
		parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].each{			
			def decodedData1 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@value.text().decodeBase64())
  			assert decodedData1 == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value" )
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[0].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type" )
	 		def decodedData2 = new String (parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@value.text().decodeBase64())
  			def remoteHCID = testRunner.testCase.testSuite.project.getPropertyValue("RemoteHCID")
	 		def remoteHCIDWithPrefix 
	 		if(remoteHCID.startsWith("urn:oid:")){
	 			remoteHCIDWithPrefix= remoteHCID
	 		}
	 		else{
	 			remoteHCIDWithPrefix = "urn:oid:"+remoteHCID
	 		}
  			assert decodedData2 == remoteHCIDWithPrefix
	 		assert parsedXmlMessage.ParticipantObjectIdentification[1].ParticipantObjectDetail[1].@type == context.findProperty( "ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type" )	 		
	 	}	  
	}
 }
}]]></script></con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def propertiesFilename = projectPath + "/RetrieveDocumentAuditLog.properties"
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
 def props = new Properties()
 props.load(new FileInputStream(propertiesFile))
 props.each { key, value ->
     testCase.setPropertyValue(key, value)
 }
}</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>CorrectedRemoteHCID</con:name>
          <con:value>urn:oid:2.2</con:value>
        </con:property>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-27T16:16:08Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-27T16:26:08Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/27/2015 16:16:08</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-11-26T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@value</con:name>
          <con:value>urn:oid:2.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@code</con:name>
          <con:value>110107</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceID</con:name>
          <con:value>urn:oid:1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectName</con:name>
          <con:value>anonymus</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserID</con:name>
          <con:value>kskagerb</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>&lt;--Document</con:name>
          <con:value>--></con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCode</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@displayName</con:name>
          <con:value>Cross Gateway Retrieve</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@displayName</con:name>
          <con:value>Destination</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail_one.@value</con:name>
          <con:value>homeCommunityID</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointID</con:name>
          <con:value>localhost</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectDataLifeCycle</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@code</con:name>
          <con:value>307969004</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectID</con:name>
          <con:value>500000000^^^&amp;1.1&amp;ISO</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventDateTime</con:name>
          <con:value>2015-04-02T13:47:30.199Z</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@displayName</con:name>
          <con:value>Source</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Human</con:name>
          <con:value>Requestor--></con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.@ParticipantObjectSensitivity</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.EventID.@code</con:name>
          <con:value>110106</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectQuery</con:name>
          <con:value>unknown</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>AuditMessage.xmlns</con:name>
          <con:value>http://nhinc.services.com/schema/auditmessage</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail.@value</con:name>
          <con:value>ihe:RepositoryUniqueId</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditEnterpriseSiteID</con:name>
          <con:value>Gateway 1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@codeSystemName</con:name>
          <con:value>IHE Transactions</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventTypeCode.@code</con:name>
          <con:value>ITI-39</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>AuditSourceIdentification.@AuditSourceTypeCode</con:name>
          <con:value>1010</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventOutcomeIndicator</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Patient Number</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserID</con:name>
          <con:value>http://www.w3.org/2005/08/addressing/anonymous</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Destination--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserIsRequestor</con:name>
          <con:value>false</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;--Patient--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectQuery</con:name>
          <con:value>unknown</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@displayName</con:name>
          <con:value>Human Requestor</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>9</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectTypeCodeRole</con:name>
          <con:value>3</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserIsRequestor</con:name>
          <con:value>true</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail_one.@type</con:name>
          <con:value>ihe:homeCommunityID</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@displayName</con:name>
          <con:value>Import</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.RoleIDCode.@code</con:name>
          <con:value>110153</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.RoleIDCode.@code</con:name>
          <con:value>110152</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.@EventActionCode</con:name>
          <con:value>C</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail_1.@type</con:name>
          <con:value>ihe:homeCommunityID</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.EventID.@displayName</con:name>
          <con:value>Export</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.@ParticipantObjectID</con:name>
          <con:value>1.123407.777777</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant.RoleIDCode.@codeSystemName</con:name>
          <con:value>SNOMED_CT</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source.@UserID</con:name>
          <con:value>https://localhost:8181/Gateway/DocumentRetrieve/3_0/NhinService/RespondingGateway_Retrieve_Service/DocRetrieve</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@code</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>&lt;!--Source--></con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectName</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification.EventID.@codeSystemName</con:name>
          <con:value>DCM</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest_Initiator.@NetworkAccessPointTypeCode</con:name>
          <con:value>2</con:value>
        </con:property>
        <con:property>
          <con:name>EventIdentification_Responder.@EventActionCode</con:name>
          <con:value>R</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@UserName</con:name>
          <con:value>Karl Skagerberg</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectIDTypeCode.@displayName</con:name>
          <con:value>Report Number</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail.@value</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Dest.@AlternativeUserID</con:name>
          <con:value>19233@192.168.1.2</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification_Document.ParticipantObjectDetail.@type</con:name>
          <con:value>Repository Unique Id</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectDetail.@type</con:name>
          <con:value>Repository Unique Id</con:value>
        </con:property>
        <con:property>
          <con:name>ParticipantObjectIdentification.ParticipantObjectIDTypeCode.@codeSystemName</con:name>
          <con:value>RFC-3881</con:value>
        </con:property>
        <con:property>
          <con:name>ActiveParticipant_Source_g0.@UserID</con:name>
          <con:value>http://localhost:8080/Gateway/DocumentRetrieve/2_0/EntityService/EntityDocRetrieve</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Admin Distribution" searchProperties="true" id="30b2d3bb-0976-4d6a-b7f1-3d6b31875764">
      <con:settings/>
      <con:testStep type="groovy" name="Clear Audit Logs" id="56c3f188-fc85-4d80-acfd-208e905ef83e">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) { sql -> 
	sql.execute('delete from ' + context.findProperty('AuditRepoTable'))
	sql.execute('alter table ' + context.findProperty('AuditRepoTable') + ' AUTO_INCREMENT=1')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Admin Distribution" type="request" id="1c21463e-f9c7-4566-a226-14e11486b482">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>AdministrativeDistribution_Binding_Soap12_g0</con:interface>
          <con:operation>SendAlertMessage</con:operation>
          <con:request name="Admin Distribution" id="2e77c3ce-6ab8-4a7e-8d3b-3000dec48aa6">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#TestSuite#Endpoint-EntityAdminDist}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:urn2="urn:oasis:names:tc:emergency:EDXL:DE:1.0">
   <soap:Header/>
   <soap:Body testSuite="Entity_g0" testCase="Admin Distribution">
      <urn:RespondingGateway_SendAlertMessage>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>253987546</urn1:SSN>
            <!--1 or more repetitions:-->
            <urn1:uniquePatientId>500000000^^^&amp;1.1&amp;ISO</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>${#TestCase#UserId}</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#LocalHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#LocalHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>80584001</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Psychiatrist</urn1:displayName>
                  <urn1:originalText>Psychiatrist</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PSYCHOTHERAPY</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-09-01T13:00:00.000Z</urn1:authInstant>
               <urn1:sessionIndex>mySessionIndex</urn1:sessionIndex>
               <urn1:authContextClassRef>myContextClassRef</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>mySubjectLocalityAddress</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>mySubjectLocalityDns</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>myAuthzDecisionStatementResource</urn1:resource>
               <urn1:action>myAuthzDecisionStatementAction</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>AuthzDecisionStatementEvidenceAssertionId</urn1:id>
                     <urn1:issueInstant>2009-09-02T14:00:00.000Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuer>CN=Mr Saml User,OU=SU,O=Mr SAML Org,L=Chantilly,ST=VA,C=US</urn1:issuer>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
            <urn1:samlSignature>
               <!--Optional:-->
               <urn1:keyInfo>
                  <!--Optional:-->
                  <urn1:rsaKeyValueModulus>cid:921853060605</urn1:rsaKeyValueModulus>
                  <!--Optional:-->
                  <urn1:rsaKeyValueExponent>cid:507157468547</urn1:rsaKeyValueExponent>
               </urn1:keyInfo>
               <!--Optional:-->
               <urn1:signatureValue>cid:175264679488</urn1:signatureValue>
            </urn1:samlSignature>
         </urn:assertion>
         <!--Optional:-->
         <urn:nhinTargetCommunities>
            <!--1 or more repetitions:-->
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
               <urn1:list>?</urn1:list>
               <urn1:region>?</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:nhinTargetCommunities>
         <urn2:EDXLDistribution>
            <urn2:distributionID>633990682441061250</urn2:distributionID>
            <urn2:senderID>actor@2.16.840.1.113883.3.166</urn2:senderID>
            <urn2:dateTimeSent>2010-08-14T12:18:13.512375-08:00</urn2:dateTimeSent>
            <urn2:distributionStatus>Actual</urn2:distributionStatus>
            <urn2:distributionType>Update</urn2:distributionType>
            <urn2:combinedConfidentiality>Public</urn2:combinedConfidentiality>
            <!--Optional:-->
            <urn2:language>?</urn2:language>
            <!--Zero or more repetitions:-->
            <urn2:senderRole>
               <urn2:valueListUrn>?</urn2:valueListUrn>
               <!--1 or more repetitions:-->
               <urn2:value>?</urn2:value>
            </urn2:senderRole>
            <!--Zero or more repetitions:-->
            <urn2:recipientRole>
               <urn2:valueListUrn>?</urn2:valueListUrn>
               <!--1 or more repetitions:-->
               <urn2:value>?</urn2:value>
            </urn2:recipientRole>
            <!--Zero or more repetitions:-->
            <urn2:keyword>
               <urn2:valueListUrn>?</urn2:valueListUrn>
               <!--1 or more repetitions:-->
               <urn2:value>?</urn2:value>
            </urn2:keyword>
            <!--Zero or more repetitions:-->
            <urn2:distributionReference>?</urn2:distributionReference>
            <!--Zero or more repetitions:-->
            <urn2:explicitAddress>
               <urn2:explicitAddressScheme>modified_IHEIntendedRecipient</urn2:explicitAddressScheme>
               <!--1 or more repetitions:-->
               <urn2:explicitAddressValue>^^^^^^^^^2.16.840.1.113883.3.166|0000000001</urn2:explicitAddressValue>
            </urn2:explicitAddress>
            <!--Zero or more repetitions:-->
            <urn2:targetArea>
               <!--Zero or more repetitions:-->
               <urn2:circle>?</urn2:circle>
               <!--Zero or more repetitions:-->
               <urn2:polygon>?</urn2:polygon>
               <!--Zero or more repetitions:-->
               <urn2:country>?</urn2:country>
               <!--Zero or more repetitions:-->
               <urn2:subdivision>?</urn2:subdivision>
               <!--Zero or more repetitions:-->
               <urn2:locCodeUN>?</urn2:locCodeUN>
            </urn2:targetArea>
            <!--Zero or more repetitions:-->
            <urn2:contentObject>
               <!--Optional:-->
               <urn2:contentDescription>PH Alert Message</urn2:contentDescription>
               <!--Zero or more repetitions:-->
               <urn2:contentKeyword>
                  <urn2:valueListUrn>?</urn2:valueListUrn>
                  <!--1 or more repetitions:-->
                  <urn2:value>?</urn2:value>
               </urn2:contentKeyword>
               <!--Optional:-->
               <urn2:incidentID>TEST</urn2:incidentID>
               <!--Optional:-->
               <urn2:incidentDescription>This is a test message</urn2:incidentDescription>
               <!--Zero or more repetitions:-->
               <urn2:originatorRole>
                  <urn2:valueListUrn>?</urn2:valueListUrn>
                  <!--1 or more repetitions:-->
                  <urn2:value>?</urn2:value>
               </urn2:originatorRole>
               <!--Zero or more repetitions:-->
               <urn2:consumerRole>
                  <urn2:valueListUrn>?</urn2:valueListUrn>
                  <!--1 or more repetitions:-->
                  <urn2:value>?</urn2:value>
               </urn2:consumerRole>
               <!--Optional:-->
               <urn2:confidentiality>Public</urn2:confidentiality>
               <!--You have a CHOICE of the next 2 items at this level-->
    <urn2:nonXMLContent>
                  <urn2:mimeType>application/pdf</urn2:mimeType>
                  <!--Optional:-->
                  <urn2:size>19</urn2:size>
                  <!--Optional:-->
                  <urn2:digest>?</urn2:digest>
                  <!--Optional:-->
                  <urn2:uri>?</urn2:uri>
                  <!--Optional:-->
                  <urn2:contentData>LDLIHAPIISDALKDF902383K1182K4J49DFNF3KR0482HJ1029F393</urn2:contentData>
               </urn2:nonXMLContent>
               <!--You may enter ANY elements at this point-->
            </urn2:contentObject>
         </urn2:EDXLDistribution>
      </urn:RespondingGateway_SendAlertMessage>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Delay" type="delay" id="560ff13a-4a92-4f92-8675-53d0726b9b29">
        <con:settings/>
        <con:config>
          <delay>60000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="groovy" name="Verify Audit Logs" id="bf71d9b4-c6df-4bf3-9592-ca407e105d0a">
        <con:settings/>
        <con:config>
          <script>context.withSql(context.findProperty('AuditRepoDB')) {sql ->
	assert 4 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable'))[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 1 and messageType="Entity Inbound" and communityId="1.1"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 2 and messageType="Nhin Outbound" and communityId="2.2"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 3 and messageType="Nhin Inbound" and communityId="1.1"')[0]
	assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AuditRepoTable') + ' where id = 4 and messageType="Adapter Outbound" and communityId="1.1"')[0]
}</script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
nhinc.FileUtils.setG0ConnectionInfo(context.expand(context.testCase.testSuite.project.resourceRoot)+'/../', context.findProperty('GatewayPropDir'), log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2015-10-01T20:23:05Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2015-10-01T20:33:05Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>10/01/2015 20:23:05</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2015-10-31T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:properties>
      <con:property>
        <con:name>Endpoint-DocQuery</con:name>
        <con:value>http://localhost:8080/Gateway/DocumentQuery/2_0/EntityService/EntityDocQueryUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-DocRetrieve</con:name>
        <con:value>http://localhost:8080/Gateway/DocumentRetrieve/2_0/EntityService/EntityDocRetrieve</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-DSDeferredResp</con:name>
        <con:value>http://localhost:8080/Gateway/DocumentSubmission/1_1/EntityService/EntityDocSubmissionDeferredResponseUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-EntityAdminDist</con:name>
        <con:value>http://localhost:8080/Gateway/AdminDistribution/1_0/AdministrativeDistribution_Service</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-EntityXDRRequest</con:name>
        <con:value>http://localhost:8080/Gateway/DocumentSubmission/1_1/EntityService/EntityDocSubmissionDeferredRequestUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-Notify</con:name>
        <con:value>http://localhost:8080/Gateway/HIEM/2_0/EntityNotificationConsumer</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-PatientDiscovery</con:name>
        <con:value>http://localhost:8080/Gateway/PatientDiscovery/1_0/EntityPatientDiscovery</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-PatientDiscoveryAsyncReq</con:name>
        <con:value>http://localhost:8080/Gateway/PatientDiscovery/1_0/EntityService/EntityPatientDiscoveryDeferredRequestUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-PatientDiscoveryAsyncResp</con:name>
        <con:value>http://localhost:8080/Gateway/PatientDiscovery/1_0/EntityService/EntityPatientDiscoveryDeferredResponseUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-Subscribe</con:name>
        <con:value>http://localhost:8080/Gateway/HIEM/2_0/EntityNotificationProducer</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-Unsubscribe</con:name>
        <con:value>http://localhost:8080/Gateway/HIEM/2_0/EntitySubscriptionManager</con:value>
      </con:property>
      <con:property>
        <con:name>Endpoint-XDREntity</con:name>
        <con:value>http://localhost:8080/Gateway/DocumentSubmission/1_1/EntityService/EntityDocSubmissionUnsecured</con:value>
      </con:property>
    </con:properties>
    <con:setupScript/>
    <con:tearDownScript/>
    <con:reportParameters/>
  </con:testSuite>
  <con:properties>
    <con:property>
      <con:name>AAMappingDB</con:name>
      <con:value>assigningauthoritydb</con:value>
    </con:property>
    <con:property>
      <con:name>AAMappingTable</con:name>
      <con:value>aa_to_home_community_mapping</con:value>
    </con:property>
    <con:property>
      <con:name>AsyncMsgDB</con:name>
      <con:value>asyncmsgs</con:value>
    </con:property>
    <con:property>
      <con:name>AsyncMsgTable</con:name>
      <con:value>asyncmsgrepo</con:value>
    </con:property>
    <con:property>
      <con:name>AuditRepoDB</con:name>
      <con:value>auditrepo</con:value>
    </con:property>
    <con:property>
      <con:name>AuditRepoTable</con:name>
      <con:value>auditrepository</con:value>
    </con:property>
    <con:property>
      <con:name>BirthTime</con:name>
      <con:value>19630804</con:value>
    </con:property>
    <con:property>
      <con:name>City</con:name>
      <con:value>Melbourne</con:value>
    </con:property>
    <con:property>
      <con:name>Country</con:name>
      <con:value>US</con:value>
    </con:property>
    <con:property>
      <con:name>DBHost</con:name>
      <con:value>localhost</con:value>
    </con:property>
    <con:property>
      <con:name>DBPass</con:name>
      <con:value>nhincpass</con:value>
    </con:property>
    <con:property>
      <con:name>DBPort</con:name>
      <con:value>3306</con:value>
    </con:property>
    <con:property>
      <con:name>DBUser</con:name>
      <con:value>nhincuser</con:value>
    </con:property>
    <con:property>
      <con:name>DeferredPatientDiscoveryReqMessageID</con:name>
      <con:value>uuid:6666666666.66666.666.66</con:value>
    </con:property>
    <con:property>
      <con:name>DOB</con:name>
      <con:value>19800516</con:value>
    </con:property>
    <con:property>
      <con:name>DQDocID</con:name>
      <con:value>1.123401.55555</con:value>
    </con:property>
    <con:property>
      <con:name>DQPatientID</con:name>
      <con:value>D123401</con:value>
    </con:property>
    <con:property>
      <con:name>DRDocID</con:name>
      <con:value>1.123407.777777</con:value>
    </con:property>
    <con:property>
      <con:name>DRRepoID</con:name>
      <con:value>1</con:value>
    </con:property>
    <con:property>
      <con:name>DynamicDQDocID</con:name>
      <con:value>103.8.9284320.020.3590.75^1266324032288</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-DocQuery</con:name>
      <con:value>http://localhost:8080/Gateway/DocumentQuery/2_0/EntityService/EntityDocQueryUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-DocRetrieve</con:name>
      <con:value>http://localhost:8080/Gateway/DocumentRetrieve/2_0/EntityService/EntityDocRetrieve</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-DSDeferredResp</con:name>
      <con:value>http://localhost:8080/Gateway/DocumentSubmission/1_1/EntityService/EntityDocSubmissionDeferredResponseUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-EntityAdminDist</con:name>
      <con:value>http://localhost:8080/Gateway/AdminDistribution/1_0/AdministrativeDistribution_Service</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-EntityXDRRequest</con:name>
      <con:value>http://localhost:8080/Gateway/DocumentSubmission/1_1/EntityService/EntityDocSubmissionDeferredRequestUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-Notify</con:name>
      <con:value>http://localhost:8080/Gateway/HIEM/2_0/EntityNotificationConsumer</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-PatientDiscovery</con:name>
      <con:value>http://localhost:8080/Gateway/PatientDiscovery/1_0/EntityPatientDiscovery</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-PatientDiscoveryAsyncReq</con:name>
      <con:value>http://localhost:8080/Gateway/PatientDiscovery/1_0/EntityService/EntityPatientDiscoveryDeferredRequestUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-PatientDiscoveryAsyncResp</con:name>
      <con:value>http://localhost:8080/Gateway/PatientDiscovery/1_0/EntityService/EntityPatientDiscoveryDeferredResponseUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-Subscribe</con:name>
      <con:value>http://localhost:8080/Gateway/HIEM/2_0/EntityNotificationProducer</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-Unsubscribe</con:name>
      <con:value>http://localhost:8080/Gateway/HIEM/2_0/EntitySubscriptionManager</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-XDREntity</con:name>
      <con:value>http://localhost:8080/Gateway/DocumentSubmission/1_1/EntityService/EntityDocSubmissionUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>ExpirationDate</con:name>
      <con:value>20100520</con:value>
    </con:property>
    <con:property>
      <con:name>FamilyName</con:name>
      <con:value>Younger</con:value>
    </con:property>
    <con:property>
      <con:name>GatewayPropDir</con:name>
      <con:value/>
    </con:property>
    <con:property>
      <con:name>Gender</con:name>
      <con:value>M</con:value>
    </con:property>
    <con:property>
      <con:name>GivenName</con:name>
      <con:value>Gallow</con:value>
    </con:property>
    <con:property>
      <con:name>LocalAA</con:name>
      <con:value>1.1</con:value>
    </con:property>
    <con:property>
      <con:name>LocalHCDescription</con:name>
      <con:value>InternalTest1</con:value>
    </con:property>
    <con:property>
      <con:name>LocalHCID</con:name>
      <con:value>1.1</con:value>
    </con:property>
    <con:property>
      <con:name>LocalPatientID</con:name>
      <con:value>D123401</con:value>
    </con:property>
    <con:property>
      <con:name>NotificationEndpoint</con:name>
      <con:value>https://localhost:8181/Gateway/HIEM/2_0/NhinService/NotificationConsumerService/HiemNotify</con:value>
    </con:property>
    <con:property>
      <con:name>NotifySubscriptionID</con:name>
      <con:value>f2064549-c802-41be-bb0d-6319c6437072</con:value>
    </con:property>
    <con:property>
      <con:name>NotifySubscriptionManagerEndpointAddress</con:name>
      <con:value>https://localhost:8181/Gateway/HIEM/2_0/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
    </con:property>
    <con:property>
      <con:name>PatientCorrelationDB</con:name>
      <con:value>patientcorrelationdb</con:value>
    </con:property>
    <con:property>
      <con:name>PatientCorrelationTable</con:name>
      <con:value>correlatedidentifiers</con:value>
    </con:property>
    <con:property>
      <con:name>project.name</con:name>
      <con:value>EntityValidation</con:value>
    </con:property>
    <con:property>
      <con:name>PurposeOfDisclosure</con:name>
      <con:value>Mental</con:value>
    </con:property>
    <con:property>
      <con:name>RemoteAA</con:name>
      <con:value>2.2</con:value>
    </con:property>
    <con:property>
      <con:name>RemoteHCDescription</con:name>
      <con:value>InternalTest2</con:value>
    </con:property>
    <con:property>
      <con:name>RemoteHCID</con:name>
      <con:value>2.2</con:value>
    </con:property>
    <con:property>
      <con:name>RemotePatientID</con:name>
      <con:value>D123401</con:value>
    </con:property>
    <con:property>
      <con:name>SSN</con:name>
      <con:value>123456789</con:value>
    </con:property>
    <con:property>
      <con:name>State</con:name>
      <con:value>FL</con:value>
    </con:property>
    <con:property>
      <con:name>StreetAddress</con:name>
      <con:value>123 Johnson Rd</con:value>
    </con:property>
    <con:property>
      <con:name>SubjectID</con:name>
      <con:value>1111</con:value>
    </con:property>
    <con:property>
      <con:name>SubscribePatientID</con:name>
      <con:value>D123401</con:value>
    </con:property>
    <con:property>
      <con:name>SubscriptionDB</con:name>
      <con:value>subscriptionrepository</con:value>
    </con:property>
    <con:property>
      <con:name>SubscriptionEndpoint</con:name>
      <con:value>https://localhost:8181/Gateway/HIEM/2_0/NhinService/NotificationProducerService/HiemSubscription</con:value>
    </con:property>
    <con:property>
      <con:name>SubscriptionManagerEndpointAddress</con:name>
      <con:value>https://localhost:8181/Gateway/HIEM/2_0/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
    </con:property>
    <con:property>
      <con:name>SubscriptionTable</con:name>
      <con:value>subscription</con:value>
    </con:property>
    <con:property>
      <con:name>UniquePatientId</con:name>
      <con:value>1111^^^&amp;amp;1.1&amp;amp;ISO</con:value>
    </con:property>
    <con:property>
      <con:name>UnSubscriptionID</con:name>
      <con:value>664f3c6e-ea88-4dae-a88e-b58661d8c253</con:value>
    </con:property>
    <con:property>
      <con:name>ZipCode</con:name>
      <con:value>12345</con:value>
    </con:property>
  </con:properties>
  <con:afterLoadScript>def propertiesFilename = project.path[0..(project.path.size()-4)] + 'properties'
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
	def props = new Properties()
	props.load(new FileInputStream(propertiesFile))
	props.each { key, value ->
	    project.setPropertyValue(key, value)
	}
}


TimeZone.setDefault(TimeZone.getTimeZone("UTC"))
def testRunListener = [
  afterRun: { testRunner, runContext -> },
  afterStep: { testRunner, runContext, result -> },
  beforeStep: { testRunner, runContext -> },
  beforeStep: { testRunner, runContext, testStep -> },
  beforeRun: { testRunner, runContext -> 
    use (org.codehaus.groovy.runtime.TimeCategory) {
      def startDate = 5.minutes.ago
      def endDate = 5.minutes.from.now
      def expireDate = 30.days.from.now

      def df = "yyyy-MM-dd'T'HH:mm:ss'Z'"
      def dfSig = "MM/dd/yyyy' 'HH:mm:ss"

      runContext.testCase.setPropertyValue("startDate", startDate.format(df))
      runContext.testCase.setPropertyValue("endDate", endDate.format(df))
      runContext.testCase.setPropertyValue("sigDate", startDate.format(dfSig))
      runContext.testCase.setPropertyValue("expireDate", expireDate.format(df))
    }
  }   
] as com.eviware.soapui.model.testsuite.TestRunListener

project.testSuiteList*.testCaseList.flatten()*.addTestRunListener(testRunListener)



com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.findProperty = { propertyName ->
    return delegate.getProperty(propertyName) ?:
                delegate.testCase.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.project.getPropertyValue(propertyName) ?:
                com.eviware.soapui.SoapUI.globalProperties.getPropertyValue(propertyName)
}

com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.withSql = { dbOrPropertyName, block ->
  def dbName = delegate.findProperty(dbOrPropertyName) ?: dbOrPropertyName
  def host = delegate.findProperty('DBHost')
  def port = delegate.findProperty('DBPort')
  def user = delegate.findProperty('DBUser')
  def pass = delegate.findProperty('DBPass')
  
  def connectString = "jdbc:mysql://${host}:${port}/${dbName}"
  def sql = groovy.sql.Sql.newInstance(connectString, user, pass, "com.mysql.jdbc.Driver");
  try {
     block(sql)
  } finally {
    sql.close()
  }
}

import javax.management.remote.JMXConnectorFactory as JmxFactory
import javax.management.remote.JMXServiceURL as JmxUrl
import javax.management.remote.*;

com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.setGatewayStandard = { standard ->
  def username = delegate.findProperty("ASUsername");
  def password = delegate.findProperty("ASPassword");
  def jmxHost = delegate.findProperty("JMXHost");
  def jmxPort = delegate.findProperty("JMXPort");
  log.info "Value of the Param Name -->"+name;
  // use jmx to set passthru mode
  def env = [
    (JMXConnector.CREDENTIALS): (String[])[username, password]
  ];
  def serverUrl = 'service:jmx:rmi://' + jmxHost + ':' + jmxPort + '/jndi/rmi://' + jmxHost + ':' + jmxPort + 
'/jmxrmi';
  log.info "Standard value-->"+standard
  def server = JmxFactory.connect(new JmxUrl(serverUrl), env);
  def config = new GroovyMBean(server.MBeanServerConnection, 'org.connectopensource.mbeans:type=Configuration');
  //set the Gateway to Standard Mode
    if (standard){
  	config.setStandardMode();
  	log.info "Inside STD"
  }
  else{
  	log.info "Inside PASS"
     config.setPassthruMode();	
  }
  server.close();
  return true;
}

com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.isStandard = { serviceName, direction ->
  def username = delegate.findProperty("ASUsername");
  def password = delegate.findProperty("ASPassword");
  def jmxHost = delegate.findProperty("JMXHost");
  def jmxPort = delegate.findProperty("JMXPort");
  log.info "Value of the Param Name -->"+name;
  // use jmx to set passthru mode
  def env = [
    (JMXConnector.CREDENTIALS): (String[])[username, password]
  ];
  def serverUrl = 'service:jmx:rmi://' + jmxHost + ':' + jmxPort + '/jndi/rmi://' + jmxHost + ':' + jmxPort + 
'/jmxrmi';
   
  def server = JmxFactory.connect(new JmxUrl(serverUrl), env);
  def config = new GroovyMBean(server.MBeanServerConnection, 'org.connectopensource.mbeans:type=Configuration');
  //set the Gateway to Standard Mode
  def isStandard = config.isStandard(serviceName, direction);
  server.close();
  return isStandard;
}

com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.setGatewayStandard = { standard, serviceName, direction ->
  def username = delegate.findProperty("ASUsername");
  def password = delegate.findProperty("ASPassword");
  def jmxHost = delegate.findProperty("JMXHost");
  def jmxPort = delegate.findProperty("JMXPort");
  log.info "Value of the Param Name -->"+name;
  // use jmx to set passthru mode
  def env = [
    (JMXConnector.CREDENTIALS): (String[])[username, password]
  ];
  def serverUrl = 'service:jmx:rmi://' + jmxHost + ':' + jmxPort + '/jndi/rmi://' + jmxHost + ':' + jmxPort + 
'/jmxrmi';
  log.info "Standard value-->"+standard
  def server = JmxFactory.connect(new JmxUrl(serverUrl), env);
  def config = new GroovyMBean(server.MBeanServerConnection, 'org.connectopensource.mbeans:type=Configuration');
  //set the Gateway to Standard Mode
    if (standard){
  	config.setStandardMode(serviceName, direction);
  	log.info "Inside STD"
  }
  else{
  	log.info "Inside PASS"
     config.setPassthruMode(serviceName, direction);	
  }
  server.close();
  return true;
}</con:afterLoadScript>
  <con:wssContainer/>
  <con:oAuth2ProfileContainer/>
  <con:sensitiveInformation/>
</con:soapui-project>