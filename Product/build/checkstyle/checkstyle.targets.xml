<?xml version="1.0" encoding="UTF-8"?>
<project name="checkstyle.targets" basedir=".">

    <dirname property="checkstyle.targets.basedir" file="${ant.file.checkstyle.targets}"/>
    <property name="checkstyle.targets.ant.lib.dir" location="${checkstyle.targets.basedir}/../../../Build/Packages/Ant/Ant/lib"/>

    <taskdef resource="checkstyletask.properties">
        <classpath>
            <fileset dir="${checkstyle.targets.ant.lib.dir}/">
                <include name="*.jar"/>
            </fileset>
        </classpath>
    </taskdef>

    <import file="checkstyle.properties.xml" />

    <target name="checkstyle.help">
    
    </target>

    <target name="checkstyle.clean">
        <delete dir="${checkstyle.report.dir.path}" failonerror="true" />
    </target>

  <!-- -->
  <!-- Run checkstyle and generate error report with links to source code -->
  <!-- -->
  <target name="checkstyle.style"
          description="Runs checkstyle and generates an error report">
    
    <mkdir dir="${checkstyle.report.dir.path}"/>
    <checkstyle failonviolation="false" config="${checkstyle.configuration.file.path}">
      <fileset dir="${checkstyle.src.dir}"
               includes="**/src/**/*.java, **/src/**/*.properties"/>
      <formatter type="xml" toFile="${checkstyle.report.file.path}"/>
    </checkstyle>

    <xslt basedir="${checkstyle.report.dir.path}"
           destdir="${checkstyle.report.dir.path}"
           includes="${checkstyle.report.file.name}"
           style="${checkstyle.xsl.file.path}">
           <param name="output.dir" expression="${checkstyle.report.dir.path}"/>
     </xslt>
  </target>
  
</project>